<dom-module id="fc-tabbed-calendar-card">
<template>
<style>
 :host {
        max-width: 1300px; max-height: 2200px;
        @apply(--layout-horizontal);
        height: 480px;
        width: 360px;
        background: yellow;
        position: relative;
        z-index:3300;
      }
      paper-tab{font-size: 12px;}
      .main {
        width: 1300px;
        height: 560px;
        border: 1px solid green;
        background: white;
        @apply(--layout-flex);
        @apply(--layout-scroll);
        @apply(--shadow-elevation-5dp);
      }


.selectedp{ 
min-width: 660px;/*will change*/
min-height: 560px;
max-height: 100%;
max-width: 900px;
border: 2px solid blue;

}
 .circle{
        border-radius: 180px;
        position: absolute; 
        top: 1px; 
        left: 8px;
        z-index: 180;
        width: 12px;
        height: 12px;
        z-index: 28;
        background: red;
        border: 2px solid white;
        padding: 2px;
        margin: 0px 2px 2px 2px;
        cursor: pointer;
      
        @apply(--shadow-elevation-8dp);

      }

</style>
 <firebase-collection 
      id='student' 
      location="https://focused0ne.firebaseio.com/students"
      order-by-child="fcid"
      equal-to="{{fcid}}" 
      data="{{studlist}}">
</firebase-collection> 
<div 
      class="circle" 
      id="button" 
      on-click="_onClearButtonClick">
</div>
<div id="main" class="vertical layout wrap main">
      <div class=" horizontal layout wrap">
      <paper-material elevation="2" class="grid-box">    
            <paper-tabs id="studenttabs" selected="{{selected}}" style="line-height:.6; background: #aecdfe;" scrollable>
                  <paper-tab>Courses Calendars</paper-tab>
                  <paper-tab>Teacher Calendars</paper-tab>
                  <paper-tab>Course Syllabi</paper-tab>
                  <paper-tab>Student Calendar</paper-tab>
                  <paper-tab>n</paper-tab>
                  <paper-tab>m</paper-tab>
            </paper-tabs>
            <hr>
            <div class="vertical layout wrap" style="height: 78px;"> 
                <div class="selectedp">
                     <template is="dom-repeat" items="{{daysEvents}}" as="yourEvents">
                         <event-list-two events="{{yourEvents}}">
                         </event-list-two> 
                      </template>
                  </div>
                  <div class="selectedp" id="inquiries">
                      <hr>
           
            <hr>
            <iron-pages id="pageHanger" class="horizontal row wrap layout" style="height: 100vh; padding:3px; overflow-y: scroll;" selected="{{selected}}">
                 
                  <div class="selectedp">
                   
      <paper-listbox class="layout vertical slides">
        <template is="dom-repeat" items="{{option.selectItems}}" as="value">
            <paper-item on-tap="soSelected" class="layout horizontal courseData" group="courseData" draggable=true>
              <paper-item-body  class="layout vertical one" value$="{{value}}" two-line>
                <div class="primary">[[value]]</div>
                <div class="secondary">[[option.labelA]]</div>
              </paper-item-body>    
              <paper-icon-button icon="star" on-tap="soUnSelected" value$="{{val}}" alt="favourite this!">
              </paper-icon-button>
              </paper-item>
          </template>
        </paper-listbox>  
      </section>
        </div>
                  <div class="selectedp" id="inquiries">
                        Inquiries<br>
                        <template is="dom-repeat" items="{{_computeInquiryArray(FcStudent.inquiries)}}" as="inq">
                              <fc-inquiry inquiry="{{inq}}">
                              </fc-inquiry>
                        </template>
                  </div>
               <div class="selectedp">
                     <div>
                          <div style="overflow-x: scroll;  min-width: 320px; max-width: 900px;">
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Pretest</b>: <span>[[potato.scoresPreTest]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 1</b>: <span>[[potato.scoresTest1]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 2</b>: <span>[[potato.scoresTest2]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 3</b>: <span>[[potato.scoresTest3]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 4</b>: <span>[[potato.scoresTest4]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 5</b>: <span>[[potato.scoresTest5]]</span></span><br><br>
                         <span><b style="font-size: 16px; color: #000066; font-weight: 700;">Test 6</b>: <span>[[potato.scoresTest6]]</span></span><br><br>
                         <span style="font-size: 16px; color: #000066; font-weight: 700;">REAL SAT: <span>[[potato.realSAT]]</span></span><br><br>
                    </div>
               </div>
          </div>
        <div class="selectedp">
           Past Academics<br>
         
          <fc-grid-table data-source$="{{FcStudent.pastacademics}}"></fc-grid-table>
         
      </div>
        <div class="selectedp">
        Account<br>
        </div>
        
        <div class="selectedp">
        ROI<br>
       
        
          <b>Courses Taken: </b><span>{{ro.coursesTaken}}</span><br>
          <b>FcValueAtCompletion70Percent: </b><span>{{ro.FcValueAtCompletion70Percent}}</span><br>
        
        </div>

    <div class="selectedp">
        Past Academics<br>
        
          <b>Graduates: </b><span>{{pa.graduates}}</span><br>
          <b>School: </b><span>{{pa.school}}</span><br>
        
        </div>

        
        </iron-pages>
  

</paper-material>

</div>
</div>
</template>


        </iron-pages>
  
</template>
</div>


<script>
FcTabbedCalendarCard=Polymer({
   	is: 'fc-tabbed-calendar-card',
     behaviors: [
      Polymer.NeonAnimatableBehavior,
      fcDraggableDataBehavior, 
      Polymer.NeonAnimationRunnerBehavior,
      Polymer.NeonAnimationRunnerBehavior
    ],
  observers: [
    'studentChanged(studlist.splices)'
  ],
  properties: {
    studlist:{
      type: Array,
      notify: true
    },
    student: {
      value: Object,
      notify: true
    },
    accountDetails: {
      type: Array,
      value: [],
      notify: true,
    },
    syllabus: {
      type: Array, 
      value: [],
      notify: true
    },
    defaultPath: "",
    gridType: String, 
    fcid: {
      type: String, 
      value:'',
      notify: true,
      reflectToAttributes: true
    },
    fcids: {
      type: Array,
      notify: true,
      value: [],
      reflectToAttributes: true
    },
    scores: {
      type: Array,
      value: [],
      notify: true,
      reflectToAttributes: true
      },
    gridImageOne: '',
    gridImageTwo: '',
    selected: {
    	type: Number,
    	value: 0,
    	notify: true,
    	reflectToAttributes: true
    },
    FcStudent:{
      type: Object, 
      value: {},
      notify: true
    },
   
    layoutClasses: {},
    sharedElements: {
        type: Object,
        value: function() {
          return {
            'hero': this.$.main
          };
        }
      },
    animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this.$.button
            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this
            }],
            'exit': [{
              name: 'fade-out-animation',
              node: this.$.button
            }, {
              name: 'scale-down-animation',
              node: this.$.main,
              transformOrigin: '50% 50%',
              axis: 'y'
            }]
          }
        }
      }
    },
    _onClearButtonClick: function() {
      this.fire('close');
    },
    // setProfile:function(data){
    //   this.set("data", data);
    //   console.log("in profile card", this.data);


    // },
 
    setStudent: function(argFcid){
      console.log(argFcid, this.studlist);
      this.set("fcid", argFcid);
     

    },
    ready: function (){
     
     console.log(this.studlist);
    //  var obj= new FcStudentProfile(val);
    //  var ob = new FcPastAcademics(val);
    //  Object.keys(obj).forEach(function(key,index) {
    //     arr.push({"label": key,"val": obj[key], "index": index});
    //   });
    // Object.keys(ob).forEach(function(key,index) {
    //     array.push({"label": key,"val": ob[key], "index": index});
    //   });
},
attached: function(){
     console.log(this.studlist);

},

// .forEach(function(key,index) {
//       self.push("studlist", val[key]);
//       }

studentChanged: function(argChange)
{    console.log(this.studlist);
     if(argChange!=null){
     console.log(argChange);
      this.set("student.profile", new FcStudentProfile(this.studlist[0]));
      console.log(this.student.profile);
      this.set("student.inquiries", this.studlist[0].inquiries); 
      this.set("student.pastacademics", new FcPastAcademics(this.studlist[0].pastacademics));
      console.log(this.student);
      this.set("FcStudent", this.student);
      this.fire("studentSelected", {"FcStudent": this.FcStudent});
      console.log(this.FcStudent);
 }

},


_computeInquiryArray: function(argInq){
  var arr=[];
  console.log(argInq);
  if(argInq!=null){
  Object.keys(argInq).forEach(function(key,index) {
      arr.push(argInq[key]);
      }
    );
}
return arr;
},


_pastacademics: function(source){
    var arr=[];
    var counter = source.length;
    for(i=0; i<counter; i++)
    {
      arr=[];
      var obj=new FcPastAcademics(source[i]);
      console.log(obj); 
      Object.keys(obj).forEach(function(key,index) {
        arr.push({"label": key,"val": obj[key], "index": index});
      });
      this.push("pastacademics", arr);
    }
    
}
 
});
</script>
</dom-module>

