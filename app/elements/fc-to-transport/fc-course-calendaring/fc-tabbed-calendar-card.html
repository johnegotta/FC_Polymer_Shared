<dom-module id="fc-tabbed-calendar-card">
<template>
<style>
 :host {
        max-width: 348px;
        @apply(--layout-vertical);
        height: 480px!important;
        min-width: 310px;
        background: white;
        position: relative;
        margin: 14px 8px 12px 8px;
        z-index:3;
      }
      paper-tab{font-size: 12px; margin-left: -10px;}
      
.main{




}

.selectedp{ 
  margin-left: 4px;
  padding: 0px;
min-width: 312px;/*will change*/
min-height: 340px;
max-height: 348px;
max-width: 338px;
border: 1px solid blue;
background: white;
padding: 4px 4px 4px 10px;

}
 .circle{
        border-radius: 180px;
        position: absolute; 
        top: 1px; 
        left: 8px;
        z-index: 180;
        width: 12px;
        height: 12px;
        z-index: 28;
        background: red;
        border: 2px solid white;
        padding: 2px;
        margin: 0px 2px 2px 2px;
        cursor: pointer;
      
        @apply(--shadow-elevation-8dp);

      }

</style>
 <!-- <firebase-collection 
      id='student' 
      location="https://focused0ne.firebaseio.com/students"
      order-by-child="fcid"
      equal-to="{{fcid}}" 
      data="{{studlist}}">
</firebase-collection>  -->
<div 
      class="circle" 
      id="button" 
      on-click="_onClearButtonClick">
</div>
<div class="vertical layout wrap">
      <div class=" horizontal layout wrap">
      <paper-material elevation="2">    
            <paper-tabs selected="{{selected}}" style="line-height:.6; width: 345px;background: #aecdfe;" scrollable>
                  <paper-tab>Day Events</paper-tab>
                  <paper-tab>Event Inputs</paper-tab>
            </paper-tabs>
      </paper-material>
            <iron-pages id="pageHanger" class="horizontal layout" style="overflow-y: scroll;" selected="{{selected}}">
                 
    <div id="main" class="selectedp main">
        <paper-tabs 
            id="calendarTabs" 
            scrollable="true" 
            style="padding: 2px 0px; height: 380px; outline: 0px;" 
            class="horizontal layout flex scroll" 
            bar="true" 
            hide-scroll-buttons="false"> 
          <div 
              class="horizontal layout justified" 
              style="width: 330px; margin: 8px; overflow-x: scroll;">
            
        <fc-cal-day-events-list
            event-list="{{eventList}}"
            cal-day="{{calDay}}"
            fc-course="{{fcCourse}}"
            >
            </fc-cal-day-events-list>
          </div>
          </paper-tabs>
      </div>
      <div class="selectedp" id="eventInputs" style="background: white;" >
            <h4>Event Card: {{event.date}}</h4>
      <paper-dialog-scrollable style="height: 280px; overflow-y: scroll; width: 310px; background:white;">
        <fc-input-prime value={{event.name}} label="Event Name"></fc-input-prime><br>
        <fc-input-prime value={{event.coach}} label="Coach"></fc-input-prime><br>
        <fc-input-prime value={{event.startTime}} label="Start Time"></fc-input-prime><br>
        <fc-input-prime value={{event.activity}} label="Activity"></fc-input-prime><br>
        <fc-input-prime value={{event.endTime}} label="End Time"></fc-input-prime><br>
        <fc-input-prime value={{event.location}} label="Location"></fc-input-prime><br>
        <fc-input-prime value={{event.duration}} label="Duration"></fc-input-prime><br>
        <fc-input-prime value={{event.totalTime}} label="Hours in Package or Course"></fc-input-prime><br>
        <fc-input-prime value={{event.coachFcid}} label="Coach's Id"></fc-input-prime><br>
        <fc-input-prime value={{event.fcid}} label="Event Id"></fc-input-prime><br>
        <fc-input-prime value={{event.studentNames}} label="Name of Related Student or Students"></fc-input-prime><br>
        <fc-input-prime value={{event.studentFcids}} label="Related Student FCIDs"></fc-input-prime><br>
        <fc-input-prime value={{event.color}} type="color" input-type="color" label="Event Color"></fc-input-prime><br>
        <fc-input-prime value={{event.parentEventName}}  input-type="text" label="Parent Event Name"></fc-input-prime><br>
        <fc-input-prime value={{event.parentEventNameFcid}}  input-type="text" label="Parent Event FCID"></fc-input-prime><br>
        <fc-input-prime value={{event.isChangeNotificationNeeded}} label="Is Notification Of Event Change Required"></fc-input-prime>
        <fc-input-prime value={{event.reasonForEventModification}} label="Reason For Event Modification"></fc-input-prime><br>
      </paper-dialog-scrollable>
                        
                  </div>
               <div class="selectedp">
                     <div>
                        
               </div>
          </div>
        <div class="selectedp">
           Past Academics<br>
         
         
         
      </div>
        <div class="selectedp">




        </div>
        
        </iron-pages>
  

</paper-material>

</div>
</div>
</template>


        </iron-pages>
  
</template>
</div>


<script>
FcTabbedCalendarCard=Polymer({
   	is: 'fc-tabbed-calendar-card',
     behaviors: [
      "Polymer.NeonAnimatableBehavior",
      "fcDraggableDataBehavior",
      "FCBehaviors.FcCalendarBehaviorPrime",
      "Polymer.NeonAnimationRunnerBehavior"
    ],
  observers: [
    'calendarDayChanged(event.splices)'
  ],
  listeners:{'on-pass-click': 'catchdate'},
  properties: {
   fcCourse:{
    type: FcCourse, 
    value:function(){return new FcCourse();},
    notify: true
   },
   courseCalendarDaysArray: {
      type: Array,
      value: [],
      notify: true
   },
   calendarDay: {
    type: FcCalendarDay,
    value: function(){return new FcCalendarDay();},
    notify: true
   },
   goodCatch:{
      type: Object,
      value:{},
      observer:"watchGoodCatch",
      notify: true


   },
   eventList: {
      type: Array,
      value:[],
      notify: true
   },

   event:{
    type: FcEvent,
    value: function(){new FcEvent({});},
    notify: true
   },
    calDay: {
    type: FcCalendarDay,
    value: function(){return new FcCalendarDay();},
    notify: true
   },
    
    sharedElements: {
        type: Object,
        value: function() {
          return {
            'hero': this.$.main
          };
        }
      },
    animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this.$.button
            }, {
              name: 'hero-animation',
              id: 'hero',
              toPage: this
            }],
            'exit': [{
              name: 'fade-out-animation',
              node: this.$.button
            }, {
              name: 'scale-down-animation',
              node: this.$.main,
              transformOrigin: '50% 50%',
              axis: 'y'
            }]
          }
        }
      }
    },
    _onClearButtonClick: function() {
      this.fire('close');
    },

    catchdate: function(e){
      console.log(e.detail, e, e.detail.calDay);




     },
     watchGoodCatch:function(newVal, oldVal){
      console.log(newVal);
      if(newVal){if(newVal.day){this.set("calDay", newVal.day);if(newVal.eventList){ this.set("eventList", newVal.eventList); this.set("calDay.background", newVal.background); this.set("calDay.color", newVal.color);}}
      }


     },


    ready: function (){
     
     console.log(this.studlist);
    //  var obj= new FcStudentProfile(val);
    //  var ob = new FcPastAcademics(val);
    //  Object.keys(obj).forEach(function(key,index) {
    //     arr.push({"label": key,"val": obj[key], "index": index});
    //   });
    // Object.keys(ob).forEach(function(key,index) {
    //     array.push({"label": key,"val": ob[key], "index": index});
    //   });
},
attached: function(){
     console.log(this.studlist);

},

// .forEach(function(key,index) {
//       self.push("studlist", val[key]);
//       }

studentChanged: function(argChange)
{    console.log(this.studlist);
     if(argChange!=null){
     console.log(argChange);
      this.set("student.profile", new FcStudentProfile(this.studlist[0]));
      console.log(this.student.profile);
      this.set("student.inquiries", this.studlist[0].inquiries); 
      this.set("student.pastacademics", new FcPastAcademics(this.studlist[0].pastacademics));
      console.log(this.student);
      this.set("FcStudent", this.student);
      this.fire("studentSelected", {"FcStudent": this.FcStudent});
      console.log(this.FcStudent);
 }

},


_computeInquiryArray: function(argInq){
  var arr=[];
  console.log(argInq);
  if(argInq!=null){
  Object.keys(argInq).forEach(function(key,index) {
      arr.push(argInq[key]);
      }
    );
}
return arr;
},


_pastacademics: function(source){
    var arr=[];
    var counter = source.length;
    for(i=0; i<counter; i++)
    {
      arr=[];
      var obj=new FcPastAcademics(source[i]);
      console.log(obj); 
      Object.keys(obj).forEach(function(key,index) {
        arr.push({"label": key,"val": obj[key], "index": index});
      });
      this.push("pastacademics", arr);
    }
    
}
 
});
</script>
</dom-module>

