<script>

function getAllMeetings(weeks, practiceTestDay, testDate, startTime, endTime,repeating, coach, courseSize, courseType,associatedCoach,location, day1, day2, day3) 
{ if(repeating){
	var dur = duration(startTime, endTime);//in hours;
	dur = parseFloat(dur);
	console.log(dur);
// 	var allTestDates = [];
// allTestDates = [[2016, 5, 7], [2016, 6, 4], [2016, 8, 6], [2016, 10, 1], [2016, 11, 5], [2016, 12, 3], [2017, 1, 28], [2017, 3, 11], [2017, 5, 6], [2017, 6, 3], [2017, 8, 26], [2017, 10, 7], [2017, 11, 4], [2017, 12, 2], [2018, 3, 10], [2018, 5, 5], [2018, 6, 2], [2018, 8, 25], [2018, 10, 6], [2018, 11, 3], [2018, 12, 1], [2019, 3, 9], [2019, 5, 4], [2019, 6, 1]];
// 	var counter = allTestDates.length;
		var testSet = [];
	 var yourEvent=[];
		var j = 0;
		var yourCourse =[];
		for (j = 0; j < weeks; j++) 
		{
			var myTestDate =new Date(testDate);
			var d = new Date(testDate);
			var daySet1 = new Date(testDate);
			var daySet2 = new Date(testDate);
			var daySet3 = new Date(testDate);
			var sat = j*7+7;
			var sun = j*7+6;
			var mon = j*7+5;
			var tue= j*7+4;
			var wed= j*7+3;
			var thu= j*7+2;
			var fri= j*7+1;
		var less = (practiceTestDay=="Sunday")? sun: sat;
		var day1Less =(day1=="Monday")?mon:(day1=="Tuesday")?tue:(day1=="Wednesday")?wed:day1=="Thursday"?thu:(day1=="Friday")?fri: alert("BAD DATA"); 
		var day2Less =(day2=="Monday")?mon:(day2=="Tuesday")?tue:(day2=="Wednesday")?wed:day2=="Thursday"?thu:(day2=="Friday")?fri: alert("BAD DATA"); 
		if(day3)
		{
			var day3Less =(day3=="Monday")?mon:(day3=="Tuesday")?tue:(day3=="Wednesday")?wed:day3=="Thursday"?thu:(day3=="Friday")?fri: alert("BAD DATA"); 
		}	
			d.setDate(d.getDate() - less);
			daySet1.setDate(daySet1.getDate() - day1Less);
			daySet2.setDate(daySet2.getDate() - day2Less);
			daySet3.setDate(daySet3.getDate() - day3Less);
			testSet.push(d.toDateString());
			
	if(day3){yourCourse.push(daySet3.toDateString());}
			yourCourse.push(daySet2.toDateString());
			yourCourse.push(daySet1.toDateString());
		
	
	if(day3){yourEvent.push(daySet3);}
			yourEvent.push(daySet2);
			yourEvent.push(daySet1);
			yourEvent.push(d);
		}
		myEventArray=[];
	 myEventArray=yourEvent.reverse();
		var myCourse=[];
		myCourse = yourCourse.reverse();
		var myTests=[];
		myTests= testSet.reverse();
		console.log(myTests, myCourse);
	var numberOfpTests=myTests.length;
	var numberOfClasses = myCourse.length;
	console.log(numberOfClasses, numberOfpTests);
	var totalCourseHours=numberOfClasses*dur;
	console.log(totalCourseHours);
	var days = day1+ ", " + day2 + ", " + day3;
	var cost=costGenerator(totalCourseHours);
	var classfcid = courseFcidGenerator(myTestDate, "FrazzanoJason00001", "focusedNJ00002", days, practiceTestDay, startTime, endTime, myEventArray);
	this.event=new FcCourse();
		this.event.testDate = myTestDate;
		this.event.courseType = courseType;
		this.event.courseLength= weeks+" weeks"; 
		this.event.practiceTestDay= practiceTestDay;
		this.event.presetCoursePattern="none";
		this.event.numberOfMeetings=numberOfClasses;
		this.event.numberOfPracticeTests=numberOfpTests;
		this.event.startTime=startTime;
		this.event.endTime= endTime;
		this.event.eventLocation=location; 
		this.event.associatedCoaches=associatedCoach;
		this.event.courseSize=courseSize;
		this.event.courseMeetingDays = day1+ ", " + day2 + ", " + day3;
		this.event.coach = coach;
		this.event.eventArray = myEventArray;
		this.event.practiceTestArray = myTests;
		this.event.courseMeetingArray = myCourse;
		this.event.fcid = classfcid;
		this.event.currentEnrollment=courseSize;
		this.event.price="$"+cost;
		this.event.meetingLength=dur;
		this.event.hoursTotal=totalCourseHours;
	console.log(this.event);
		return this.event;
		}
	}
// (function(){getAllMeetings(8, "Sunday", 6, "3:45PM", "11:15PM", true, "Monday", "Wednesday", "Friday");})();
Date.prototype.dayStamp= function()
{
 	var year= this.getFullYear(); 
	var month= this.getMonth();
	var day = this.getDate();
    var dayStamp= Date.UTC(year, month, day);
    return dayStamp;
}	
function courseFcidGenerator(testDate, coachFcid, location, meetingDays, practiceTestDay, startTime, endTime, eventDateArray){
	var len =eventDateArray.length;
	var weekdays="";
	var mdays= meetingDays.replace(/\s/g,'');
	var arr=mdays.split(',');
	var len = arr.length;
	for(var i=0;i<len; i++){
	weekdays += arr[i][2];
	}
	startTime=startTime.replace(":", "");
	endTime=endTime.replace(":","");
	console.log(endTime);
	var fcid= dayStamp(testDate)+"_"+coachFcid+location+startTime+weekdays+endTime+"_"+len.toString()+practiceTestDay;
	console.log(fcid);
	return fcid;
}
function duration(timeOne, timeTwo){
	var startHrs = stringTime(timeOne);
	var endHrs = stringTime(timeTwo);
	var tot=endHrs-startHrs;
	console.log(tot);
	return tot;	
}
	function dayStamp(someDate){
			 var date = new Date(someDate);
	 	var year= date.getFullYear(); 
	var month= date.getMonth();
	var day = date.getDate();
    var date= Date.UTC(year, month, day);
		return date;	
	}
function costGenerator(numberOfHours)
{
	var cost = (numberOfHours<50)?numberOfHours*60:(numberOfHours<75&&numberOfHours>50)?numberOfHours*55:numberOfHours*50;
	return cost;
	
}
function stringTime(time)
{
	var start = parseInt(time);
	console.log(start);
	var len = time.length;
	var ampm = (start!==12 && time.charAt(len-2)=="P")?12: 0;
	ampm=parseInt(ampm);
	var hoursStart = ampm+start;
	console.log(hoursStart, ampm, start);
	var minStart =(parseInt(time.charAt(len-4))*10)+parseInt(time.charAt(len-3));
	var minHundreds =minStart/60;
	console.log(minStart, minHundreds);
	var tot=hoursStart +minHundreds;
	console.log(tot);
	return tot;
}
</script>

