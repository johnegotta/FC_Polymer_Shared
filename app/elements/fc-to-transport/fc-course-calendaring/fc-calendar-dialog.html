<dom-module id="fc-calendar-dialog">
<template>
<style>
:host{background: white;
padding: 0px 3px 4px 8px;
opacity: 1;

		display: flex;}
.selected{}
</style>		
<fc-ddr-card drags="true" head-class="darkBlue" is-picker="true" header-title="Focused Planner" class="flex layout vertical" style="padding-right:2px; margin: 4px 0px 4px 0px; width: 100%!important; height: 360px;">
	

	<paper-icon-button on-tap="_backOne" icon="icons:arrow-back" style="margin-bottom: 11px; position: absolute; left: 15px;" class="headerLeft"></paper-icon-button>

		<paper-icon-button on-tap="_forward" icon="icons:arrow-forward" style="color: white; margin-bottom: 11px; position:absolute; right: 15px; top: 2px;" class="headerRight"></paper-icon-button>

 			<div class="horizontal flex layout center-justified">
			<neon-animated-pages class="vertical flex-1 layout" id="pages" style="width: 320px; height:360px;" selected="0"> 
				<fc-date-picker-proto fc-course="{{fcCourseObject}}" displayed-month="{{displayedMonth}}" on-dblclick="_dateSelected" fc-course="{{fcCourseSelectable}}" id="myCalendarCard">
				<span class="headers">[[_computeCalendarHeading(displayedMonth)]] [[computeYear(displayedMonth)]]</span>
				</fc-date-picker-proto>
				<fc-tabbed-calendar-card on-close="_onClose" fc-course="{{{fcEvent}}" fc-courses="{{fcCourseSelectable}}">
				</fc-tabbed-calendar-card>
			</neon-animated-pages>
			<fc-base-event-inputs class="horizontal flex-2 layout" fc-course="{{fcCourseObject}}" fc-event="{{fcEvent}}">
			</fc-base-event-inputs>
			<div class="horizontal flex-1 layout" style="margin-left: 24px;">
			<fc-event-element fc-course="{{fcEvent}}" class="calendarItem">
 			</fc-event-element>
 			</div>
		<content select=".calendarItem"></content>
		</div>
	 </fc-ddr-card>
	
</template>
<script>
FcCalendarDialog= Polymer({
is:"fc-calendar-dialog",
behaviors:["FCBehaviors.FcCalendarBehaviorPrime",
		 // "Polymer.PaperDialogBehavior" ],
		],
	properties:{
		FcCourseObject:{
			type: FcCourse,
			notify: true
		},
		displayedMonth:{
			type:Array,
			notify: true
		},
		fcCourseSelectable:{


		},
		fcEvent:{
			type: Object,
			value: {
			
			},
			observer: "fcEventObserver",
			notify: true 
		}




	},

	fcEventObserver:function(newVal, oldVal)
	{
			console.log(newVal, oldVal);

	},

	_dateSelected: function(event) {
      var targetOne = event.target;
      console.log(event, event, event, "rubarb");
      while (targetOne.nodeName!=="FC-DATE-MINI"&& targetOne !== this && !targetOne._templateInstance && targetOne.nodeName!="PAPER-ICON-BUTTON" && targetOne.nodeName!="PAPER-MATERIAL" && targetOne.nodeName!="BODY") {
        targetOne = targetOne.parentNode;
       
      }
       if(targetOne.nodeName=="FC-DATE-MINI")
        {
        	this.set("event", targetOne.date);
        
      
      // configure the page animation
      this.sharedElements = {
        'hero': this
      };
      this.fire('on-date-click', {//this is where we pass data... we do not have a click yet... it will be on another level likely
        item: targetOne.data
      });
            this.$.pages.selected = 1;
           }
    },

        //console.log(e.detail.item);
    // this.$.viewProfile.setStudent(e.detail.item.fcid); 
     //console.log(e.detail.item.fcid);
    // console.log(this.studentSelectable, "here is selected");
  
  

    _forward: function(){
    	this.$.myCalendarCard._forwardOneMonth();
    },
    _backOne: function(){
    	this.$.myCalendarCard._backOneMonth();
    },

    _setPreviousCaller: function(e, detail)
    {
        //console.log(e.detail);
      //  this.set("studentSelectable", e.detail);
    },

    _onClose: function() {
      this.$.pages.selected = 0;
    },

     _computeCalendarHeading: function(displayedMonth)
  {
  		if(displayedMonth[15])
  		{

  		return this.displayedMonth[15].getFullMonth();

  		}
  },
  computeYear: function(displayedMonth)
{	
	if(displayedMonth[15])
	{
	return displayedMonth[15].getFullYear();
	}
},
});
  </script>
  </dom-module>