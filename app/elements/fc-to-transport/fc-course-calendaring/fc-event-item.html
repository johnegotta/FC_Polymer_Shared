<dom-module id="fc-event-item">
<template>
<style>

	.primary{

	color: #008;
	font-weight:600;
	font-size: 13.5px;
	width: 197px;
	
}
fc-input-prime{
			height: 24px !important;
			top-margin: -8px;
	}
		.two{
		font-family: merriweather; 
		display: inline-block;
		height: 30px !important;
		color: brown;
		font-weight: 600;
		min-width: 170px;
		max-width: 198px;
		overflow: hidden;
		white-space: nowrap;
			font-size: 12px;
	}
.secondary{
		color: grey;
	font-weight:500;
	font-size: 11px;
	margin-top: 11px;
	padding: 0 3px;
	width: 50px;


}	
iron-icon .small {
	height: 14px!important;
	width:14px!important;
}
.scheduling{padding: 0px 5px;}
.header-class{min-height: 35px !important; max-height: 55px !important;}
.selected{}	
</style>
<paper-listbox class="layout vertical slides" style="overflow-y: scroll;">
<div draggable="true">
	<paper-item draggable="true" style$="border: 1px #aeaeae solid; background:{{event.color}};" class="layout horizontal scheduling" draggable="true">
		<paper-item-body style$="background: {{event.color}};" class="layout horizontal" value$="{{value}}">
		<!-- <content></content> -->
			<div class="secondary layout horizontal flex-1 self-shrink" style$="background: {{event.color}};" >
				<fc-input-prime style="width: 60px; font-size: 10px; margin-left: -8px;" label="Start Time" name$="{{event.startTime}}" input-type="tiny" label-hidden="true" value$="{{event.startTime}}"></fc-input-prime>
			</div>
			<div class="primary layout horizontal flex-4 self-stretch" style$="background: {{event.color}};">
					<span class="two">
			<fc-input-prime style="width: 183px;" input-type="text" label$="[[activity]]" name$="{{event.name)}}" label-hidden="false" style="border: 0px white dashed;" value$="{{event.name}}"></fc-input-prime> &nbsp; &nbsp;</span></div>
			<div class="secondary layout horizontal flex-1 self-shrink" style$="background: {{event.color}};" >
				<fc-input-prime style="width: 60px; font-size: 10px; margin-left: -8px;" label="End Time" name$="{{event.endTime}}" input-type="tiny" label-hidden="true" value$="{{event.endTime}}"></fc-input-prime>
			</div>
			<div class="layout vertical" style="padding-left: 5px;">
				<section class="buttons" on-tap="openup" style="border-radius:180px;">
					<iron-icon class="small" style="height: 16px!important;width:16px!important; border-radius:180px; color: white; background: silver;" icon="icons:add-circle-outline">
					</iron-icon>
				</section>
				<section class="buttons" hidden$="[[computeHideDelete(event.isHoliday, event.activity)]]" on-tap="deleteEvent" style="border-radius:180px;">
					<iron-icon class="small" style="height: 16px!important;width:16px!important; border-radius:180px; color: red; background: silver;" icon="icons:add-circle-outline">
					</iron-icon>
			</section>
	   		</div> 
		</paper-item-body>   	
	</paper-item>

			</paper-listbox>
<paper-dialog entry-animation="scale-up-animation" no-cancel-on-outside-click id="myeventDialogue" class="dialog" style$="height: 400px; width: 480px;" exit-animation="fade-out-animation">
		<h2>Event Card: {{event.date}}</h2>
  		<paper-dialog-scrollable style$="height: 300px; overflow-y: scroll; width: 325px;">
    		<fc-input-prime value={{event.name}} label="Event Name"></fc-input-prime><br>
    		<fc-input-prime value={{event.coach}} label="Coach"></fc-input-prime><br>
    		<fc-input-prime value={{event.startTime}} label="Start Time"></fc-input-prime><br>
    		<fc-input-prime value={{event.activity}} label="Activity"></fc-input-prime><br>
    		<fc-input-prime value={{event.endTime}} label="End Time"></fc-input-prime><br>
    		<fc-input-prime value={{event.location}} label="Location"></fc-input-prime><br>
    		<fc-input-prime value={{event.duration}} label="Duration"></fc-input-prime><br>
    		<fc-input-prime value={{event.totalTime}} label="Hours in Package or Course"></fc-input-prime><br>
    		<fc-input-prime value={{event.coachFcid}} label="Coach's Id"></fc-input-prime><br>
    		<fc-input-prime value={{event.fcid}} label="Event Id"></fc-input-prime><br>
    		<fc-input-prime value={{event.studentNames}} label="Name of Related Student or Students"></fc-input-prime><br>
    		<fc-input-prime value={{event.studentFcids}} label="Related Student FCIDs"></fc-input-prime><br>
    		<fc-input-prime value={{event.color}} type="color" input-type="color" label="Event Color"></fc-input-prime><br>
    		<fc-input-prime value={{event.parentEventName}}  input-type="text" label="Parent Event Name"></fc-input-prime><br>
    		<fc-input-prime value={{event.parentEventNameFcid}}  input-type="text" label="Parent Event FCID"></fc-input-prime><br>
    		<fc-input-prime value={{event.isChangeNotificationNeeded}} label="Is Notification Of Event Change Required"></fc-input-prime><br>
    		<fc-input-prime value={{event.reasonForEventModification}} label="Reason For Event Modification"></fc-input-prime><br>
 			</paper-dialog-scrollable>
  		<div class="buttons" style="height: 75px;">
    			<paper-button style="float: left;" hidden$="[[computeHideDelete(event.isHoliday, event.activity)]]" on-tap="deleteEvent" dialog-dismiss>Delete Event</paper-button> 
    			<paper-button dialog-dismiss>Cancel</paper-button>
   				<paper-button dialog-confirm>Accept</paper-button>
 		 	</div>
	</paper-dialog>
		</div>
		

</template>
<script>
FcEventItem=Polymer({
	is:"fc-event-item", 
	behaviors: ["FCBehaviors.FcCalendarBehaviorPrime"],
	properties: 
	{		
		fcCourse:{
			type: FcCourse,
			value: function(){var retVal = new FcCourse(); return retVal;},
			notify: true
		},
		event:{
			type: FcEvent,
			value: function(){return new FcEvent({});},
			notify: true,
			observer: "lookattheEvent",
		},		 		
		duration: "",
		calendar: "", 
		calDay: {
			type: FcCalendarDay, 
			notify: true
		},
		dragData:{
			type: Object, 
			value: {},
			notify: true
		},
		colorTwo:{
			type: String,
			value: "silver",
			notify: true
		},
		eventList:{
			type:Array, 
			value:[],
			notify: true
		},
		date: {
			type: Date,
			notify: true
		},
		days:{
			type: Array,
			value: [],
			notify: true


		},


	},
	attached: function(){
		if(this.event){
			var ev=this.event;
			ev.evId=this.event.evId+1;
	 	this.set("dragData", ev);

	 	console.log(this.dragData);
	 }
	 	else console.log("the shit wont work"); 
	},

	


	openup: function(){
	this.$.myeventDialogue.opened=!this.$.myeventDialogue.opened;	
	},
	computeHideDelete: function(isHoliday, activity){
		return (activity=="SAT Test Date" || isHoliday==true);
	},
	deleteEvent: function(e){
		var targ = e.target;
		while(targ.nodeName!="FC-EVENT-ITEM" && targ.nodeName!="BODY")
		{
					targ=targ.parentNode;
		}
		if(targ.nodeName=="FC-EVENT-ITEM")
		{
			var counter=0;
			var eve=targ.event;
			console.log(eve, event);
			var cdi=e.target.dataHost.__data__.calDay.cdIndex;
			var evLen = e.target.dataHost.__data__.calDay.eventList.length;
			var eventList=e.target.dataHost.__data__.calDay.eventList;
			this.set(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], []);
			eventList.forEach(function(ev, index, arr)
			{
				if(ev.evId==eve.evId && ev.startTime==eve.startTime)
				{
					console.log(ev, eve);
				}
				else
				{ ev.evIndex=counter;
				 this.push(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], ev);
				 counter++;
				 }
			}, this);
		}
	},

	lookattheEvent:function(newval, oldVal){
			console.log(new Date().getTime());
	},


});
</script>
</dom-module>
