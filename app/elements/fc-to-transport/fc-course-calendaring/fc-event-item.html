<dom-module id="fc-event-item">
<template>
<style>

	.primary{

	color: #008;
	font-weight:600;
	font-size: 13.5px;
	width: 187px;
	
}
paper-item{padding: 2px;}
paper-item-body{padding: 2px;}
paper-icon-button{
	float: right;
	margin-right: -8px;
	padding: 0px;
	height: 16px!important;
	width: 16px!important;
}
fc-input-prime{
			height: 42px !important;
		


	}
	.buttons{height: 24px; width: 24px; border-radius: 180px;}
	.one{
	font-family: merriweather; 
	font-weight: 600;
	color: #080808;
	font-size: 14px;

	white-space: nowrap;
	display: inline-block;
}
		.two{
		font-family: merriweather; 
		display: inline-block;
		height: 38px !important;
		color: brown;
		font-weight: 600;
		min-width: 170px;
		max-width: 198px;
		overflow: hidden;
		white-space: nowrap;
			font-size: 15px;
	}
.secondary{
		color: grey;
	font-weight:500;
	font-size: 12px;
	padding: 0px;
	/*width: 50px;*/


}	
iron-icon .small {
	height: 14px!important;
	width:14px!important;
}
.scheduling{padding: 0px;}
.header-class{min-height: 22px !important; max-height: 48px !important;}
.selected{}	
</style>
<div draggable="true" 
style="width: {{computeItemWidth(backWidth)}}; border: silver 1.5px solid;">
	<paper-item 
		on-tap=""
		on-drag="" 
		class="layout-horizontal courseData"
	>
	<paper-item-body  
		class="vertical layout flex-4 one">
		<div 
			class="primary layout horizontal self-stretch two" 
			style$="background: white; color:{{event.color}};">
			<!-- <fc-input-prime 
					input-type="text" 
					label$="[[event.activity]]" 
					name$="{{event.name)}}" 
					label-hidden="true" 
					style$="border: 0px white dashed;margin-left: -6px; width: {{computeWidthText(backWidth)}};" 
					value$="{{event.name}}">
			</fc-input-prime> -->
			{{event.name}}: {{event.price}}
		</div>
		<div 
			class="secondary">
			{{event.startTime}} --	{{event.endTime}}
		</div>
	</paper-item-body>
	<section class="vertical layout flex-1">  	
	<content select=".dialogButton">
	</content>
	<section class="buttons" hidden$="[[computeHideDelete(event.isHoliday, event.activity)]]" on-tap="deleteEvent" style="border-radius:180px;">
					<iron-icon class="small" style="height: 16px!important;width:16px!important; border-radius:180px; color: red; background: silver;" icon="icons:add-circle-outline">
					</iron-icon>
			</section>
	</section>
</paper-item>

		</div>
		

</template>
<script>
FcEventItem=Polymer({
	is:"fc-event-item", 
	behaviors: ["FCBehaviors.FcCalendarBehaviorPrime"],
	properties: 
	{		
		fcCourse:{
			type: FcCourse,
			value: function(){var retVal = new FcCourse(); return retVal;},
			notify: true
		},
		event:{
			type: FcEvent,
			value: function(){return new FcEvent({});},
			notify: true,
			observer: "lookattheEvent",
		},
		backWidth: {
			type: String,
			notify: true
		}, 		 		
		duration: "",
		calendar: "", 
		calDay: {
			type: FcCalendarDay, 
			notify: true
		},
		dragData:{
			type: Object, 
			value: {},
			notify: true
		},
		colorTwo:{
			type: String,
			value: "silver",
			notify: true
		},
		eventList:{
			type:Array, 
			value:[],
			notify: true
		},
		date: {
			type: Date,
			notify: true
		},
		days:{
			type: Array,
			value: [],
			notify: true


		},


	},
	attached: function(){
	
	},
	computeItemWidth: function(backWidth){
			var w= Math.floor(parseInt(backWidth)*.98);
			w=w.toString()+"px";
			return w;
	},
	computeWidthTime: function(backWidth){
		var w= Math.floor(parseInt(backWidth)*.19);
		w=w.toString()+"px";
		return w;
	},
	computeWidthText: function(backWidth)
	{
		var w= Math.floor(parseInt(backWidth)*.67);
		w=w.toString()+"px";
		return w;
	},

	computeHideDelete: function(isHoliday, activity){
		return (activity=="SAT Test Date" || isHoliday==true);
	},
	deleteEvent: function(e){
		var targ = e.target;
		console.log(e);
		while(targ.nodeName!="FC-EVENT-ITEM" && targ.nodeName!="BODY")
		{
					targ=targ.parentNode;
		}
		if(targ.nodeName=="FC-EVENT-ITEM")
		{
			var counter=0;
			var eve=targ.event;
			console.log(eve, event);
			var cdi=e.target.dataHost.__data__.calDay.cdIndex;
			var evLen = e.target.dataHost.__data__.calDay.eventList.length;
			var eventList=e.target.dataHost.__data__.calDay.eventList;
			this.set(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], []);
			eventList.forEach(function(ev, index, arr)
			{
				if(ev.evId==eve.evId && ev.startTime==eve.startTime)
				{
					console.log(ev, eve);
				}
				else
				{ ev.evIndex=counter;
				 this.push(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], ev);
				 counter++;
				 }
			}, this);
		}
	},

	lookattheEvent:function(newval, oldVal){
			//console.log(new Date().getTime());
	},


});
</script>
</dom-module>
