<dom-module id="fc-event-item">
<template>
<style>

	.primary{

	color: #008;
	font-weight:600;
	font-size: 13.5px;
	/*width: 197px;*/
	
}
fc-input-prime{
			height: 24px !important;
			top-margin: -8px;
	}
		.two{
		font-family: merriweather; 
		display: inline-block;
		height: 30px !important;
		color: brown;
		font-weight: 600;
		/*min-width: 170px;*/
		max-width: 198px;
		overflow: hidden;
		white-space: nowrap;
			font-size: 12px;
	}
.secondary{
		color: grey;
	font-weight:500;
	font-size: 11px;
	margin-top: 11px;
	padding: 0 3px;
	/*width: 50px;*/


}	
iron-icon .small {
	height: 14px!important;
	width:14px!important;
}
.scheduling{padding: 0px 2px;}
.header-class{min-height: 35px !important; max-height: 55px !important;}
.selected{}	
</style>
<div draggable="true" style="width: {{computeItemWidth(backWidth)}};">
	<paper-item draggable="true" style$="border: 1px #aeaeae solid; background:{{event.color}}; width: {{computeItemWidth(backWidth)}};" class="layout horizontal scheduling" draggable="true">
		<paper-item-body style$="background: {{event.color}};" class="layout horizontal" value$="{{value}}">
		<!-- <content></content> -->
			<div class="secondary layout horizontal flex-1 self-shrink" style$="background: {{event.color}};" >
				<fc-input-prime style$="width: {{computeWidthTime(backWidth)}}; font-size: 10px; margin-left: -8px;" label="Start Time" name$="{{event.startTime}}" input-type="tiny" label-hidden="true" value$="{{event.startTime}}"></fc-input-prime>
			</div>
			<div class="primary layout horizontal flex-4 self-stretch" style$="background: {{event.color}};">
					<span class="two">
			<fc-input-prime style$="width: {{computeWidthText(backWidth)}};" input-type="text" label$="[[activity]]" name$="{{event.name)}}" label-hidden="false" style="border: 0px white dashed; margin-left: -12px;" value$="{{event.name}}"></fc-input-prime> &nbsp; &nbsp;</span></div>
			<div class="secondary layout horizontal flex-1 self-shrink" style$="background: {{event.color}};" >
				<fc-input-prime style$="width: [[computeWidthTime(backWidth)]]; font-size: 10px; margin-left: -8px;" label="End Time" name$="{{event.endTime}}" input-type="tiny" label-hidden="true" value$="{{event.endTime}}"></fc-input-prime>
			</div>
			<div class="layout vertical" style="padding-left: 2px;">
				<content select=".dialogButton"></content>
				<section class="buttons" hidden$="[[computeHideDelete(event.isHoliday, event.activity)]]" on-tap="deleteEvent" style="border-radius:180px;">
					<iron-icon class="small" style="height: 16px!important;width:16px!important; border-radius:180px; color: red; background: silver;" icon="icons:add-circle-outline">
					</iron-icon>
			</section>
	   		</div> 
		</paper-item-body>   	
	</paper-item>
		</div>
		

</template>
<script>
FcEventItem=Polymer({
	is:"fc-event-item", 
	behaviors: ["FCBehaviors.FcCalendarBehaviorPrime"],
	properties: 
	{		
		fcCourse:{
			type: FcCourse,
			value: function(){var retVal = new FcCourse(); return retVal;},
			notify: true
		},
		event:{
			type: FcEvent,
			value: function(){return new FcEvent({});},
			notify: true,
			observer: "lookattheEvent",
		},
		backWidth: {
			type: String,
			notify: true
		}, 		 		
		duration: "",
		calendar: "", 
		calDay: {
			type: FcCalendarDay, 
			notify: true
		},
		dragData:{
			type: Object, 
			value: {},
			notify: true
		},
		colorTwo:{
			type: String,
			value: "silver",
			notify: true
		},
		eventList:{
			type:Array, 
			value:[],
			notify: true
		},
		date: {
			type: Date,
			notify: true
		},
		days:{
			type: Array,
			value: [],
			notify: true


		},


	},
	attached: function(){
	
	},
	computeItemWidth: function(backWidth){
			var w= Math.floor(parseInt(backWidth)*.98);
			w=w.toString()+"px";
			return w;
	},
	computeWidthTime: function(backWidth){
		var w= Math.floor(parseInt(backWidth)*.19);
		w=w.toString()+"px";
		return w;
	},
	computeWidthText: function(backWidth)
	{
		var w= Math.floor(parseInt(backWidth)*.67);
		w=w.toString()+"px";
		return w;
	},
	openup: function(){
	this.$.myeventDialogue.opened=!this.$.myeventDialogue.opened;	
	},
	computeHideDelete: function(isHoliday, activity){
		return (activity=="SAT Test Date" || isHoliday==true);
	},
	deleteEvent: function(e){
		var targ = e.target;
		console.log(e);
		while(targ.nodeName!="FC-EVENT-ITEM" && targ.nodeName!="BODY")
		{
					targ=targ.parentNode;
		}
		if(targ.nodeName=="FC-EVENT-ITEM")
		{
			var counter=0;
			var eve=targ.event;
			console.log(eve, event);
			var cdi=e.target.dataHost.__data__.calDay.cdIndex;
			var evLen = e.target.dataHost.__data__.calDay.eventList.length;
			var eventList=e.target.dataHost.__data__.calDay.eventList;
			this.set(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], []);
			eventList.forEach(function(ev, index, arr)
			{
				if(ev.evId==eve.evId && ev.startTime==eve.startTime)
				{
					console.log(ev, eve);
				}
				else
				{ ev.evIndex=counter;
				 this.push(["fcCourse.courseCalendarDaysArray",cdi,"eventList"], ev);
				 counter++;
				 }
			}, this);
		}
	},

	lookattheEvent:function(newval, oldVal){
			//console.log(new Date().getTime());
	},


});
</script>
</dom-module>
