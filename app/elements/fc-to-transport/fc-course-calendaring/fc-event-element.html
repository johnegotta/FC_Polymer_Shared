<dom-module id="fc-event-element">
<template>
<style>
:host{
	font-family: merriweather;
	font-size: 14px;
	line-height: 1.0;
	margin-top: 12px;
	background: white;
	position:relative;
	height: 420px;
	width: 330px;
}
paper-item {background: white;
    --paper-item-focused: {
      background: var(--paper-amber-100);
      font-weight: bold;
    };
    
  }
#demo{
	display: block;
/* 	width: 1080px;
	height: 900px; */
	background: #aedefe;
/* 	margin-left: 290px; */
/* 	border: gold ridge 22px; */
/*	box-shadow: 4px 11px 21px 7px #9fafaf;
}*/
}
.holder{
	width: 320px;
	height: 360px;
	background: #aedefe;
	margin-left: 2px;
	border: gold ridge 1px;
	box-shadow: 4px 11px 21px 7px #9fafaf;
		display: block;
	oveflow: hidden;
	float: right;
}
.innerholder{
	overflow-y: scroll;
}
.header-class{
font-size: 18px;
color: white;
	background: #03A9F4;
font-weight: 600;
text-align: center;
	padding: 12px 12px 20px 12px;
height: 44px;
}
paper-item{
	border: 1px solid #adadad;
 --paper-item-focused: {
      background: var(--paper-amber-500);
      font-weight: bold;
    };
}
.selected{background: var(--paper-amber-500);
      font-weight: bold;}
.primary{
	color: #008;
	font-weight:600;
	font-size: 15.5px;
}
.secondary{
		color: grey;
	font-weight:500;
	font-size: 11px;
}	
.slides{overflow: hidden; overflow-y: scroll;}

.one{
	font-family: merriweather; 
	font-weight: 600;
	color: #080808;
	font-size: 14px;
	white-space: nowrap;
	display: inline-block;
}
.two{
	font-family: merriweather; 
	display: inline-block;
	width: 95px !important;
	overflow: hidden;
	overflow-x: scroll;
	white-space: nowrap;
	font-size: 14px;
}
</style>
<template is="dom-repeat" items="{{inputOptions}}" as="option">

	<div class="vertical layout" style="margin-top: 3px; float: right;">
		<section class="holder layout vertical" style="float: right;">
			<section class="header-class layout horizontal">
				<paper-icon-button on-tap="_backOneInput" icon="icons:arrow-back" style="color: white; left: 5px;padding-bottom: 8px; float: left;"></paper-icon-button>
					<span class="flex layout horizontal nowrap center center-justified" style="color: white; font-size:18px; margin-top: 4px; text-align: center; font-family: merriweather;">[[option]]</span>
					<paper-icon-button on-tap="_forwardOneInput" icon="icons:arrow-forward" style="color: white; float: right;" class="headerRight"></paper-icon-button> 
			</section>
			<paper-listbox class="layout vertical slides">

[[label]]

				<template is="dom-repeat" items="{{option.selectItems}}" as="item">


						<paper-item on-tap="soSelected" class="layout horizontal courseData" group="courseData" draggable=true>
							<paper-item-body  class="layout vertical one" value$="{{val}}" two-line>
								<div class="primary">{{item}}[[val]][[option]]</div>
								<div class="secondary">[[option.label2]][[val.label2]]</div>
							</paper-item-body>   	[[item.label]][[item.val]][[item.event]]
							<paper-icon-button icon="star" on-tap="soUnSelected" value$="{{val}}" alt="favourite this!">
							</paper-icon-button>
			  			</paper-item>
					</template>
				</paper-listbox>	
			</section>

	</div>
</template>
</template>
<script>
"use-strict";
Polymer({
	is:"fc-event-element",
	properties:{
		eventData:{
			type: Object,
			value: {},
			notify: true, 
			reflectToAttribute: true
		},
		inputIndex: {
			type: Number,
			value: 2,
			notify: true
		},	
		fcCourse: {
			type: FcCourse,
			value:function(){return new FcCourse();},
			notify: true,
		},
		testDates: {
			type: Array,
			notify: true
		},
		timeSlotsArr:{
			type: Array,
			value:[],
			notify: true
		},
		valueOptions: {
			type: Array, 
			notify: true
			},
		inputOptions: {
			type: Array, 
		 	computed:"selectInputs(inputs, inputIndex)",
			notify: true,
			reflectToAttribute: true
		},
		inputs: {
			type: Array,
			value: [],
			notify: true
		},
		saveChoiceLocal:{
			type: Boolean, 
			value: false,
			notify: true
		},

		event: {
			type: FcCourse,
			value:function(){return new FcCourse();},
			notify: true, 
			reflectToAttribute: true
		},

		calendarDayArray:{
			type: Array,
			value: [],
			notify: true,
			reflectToAttribute: true
		},
		summer:{
			type: Boolean,
			value: false,
			notify: true

		},
	
	},

	ready()
	{

		var lincoln =new FcCourse();
	
		this.set("valueOptions", lincoln);

		
	
		// this.set("inputOptions", lincoln);

	},

	attached()
	{		
		
		// var inputO=this.someComputedPropertiesFunction(this.valueOptions);
		// this.set("inputs", inputO);
		// this.push("inputOptions", inputO);
	},
	_backOneInput()
	{
		this.set("saveChoiceLocal", true);
		this.set("inputIndex", this.inputIndex-1);
	},
	_forwardOneInput()
	{	
		this.set("saveChoiceLocal", true);
		this.set("inputIndex", this.inputIndex+1);
	
	},


	selectInputs(inputs, inputIndex)
	{		
		var retVal = [];
		if(this.inputIndex===0)	
			{
					retVal.push(inputs[0]);
			}
			else if(this.saveChoiceLocal===true)
			{	
				retVal.push(inputs[this.inputIndex]);
				this.set("saveChoiceLocal", false);
			}
			return retVal;
	},

	soSelected(e){
		var propertyName = e.model.__data__.option.name;
		var val = e.model.__data__.val;
		var propertyString="event."+propertyName;
		this.set(propertyString, val);
		this.fcCourse = new FcCourse(this.event);
		this.set("fcCourse", this.event);
		this.set("saveChoiceLocal",true);
		if(propertyName=="presetCourseLength")
		{   
			var td = this.event.testDate;
			var d=new Date(td);
			//console.log(d, val);
			this.fcCourse.setTestDate(d, val);
		}
		if(propertyName == "practiceTestDay")
		{


		this.set("inputIndex", this.inputIndex+1);
	}
},

	computeValueOptions(testDates){
				
		},
	

	someComputedPropertiesFunction(valueOptions)
	{	
		
		var length=valueOptions.length;
		 var derray=[];
		for(i=0;i<length;i++)
	 {	
			var valarr = [];
			valarr=valueOptions[i];
			
		
			var eventInput={
				"name":"",
				"inputType": "",
				"header":"",
				"labelA":"",
				"labelB":"",
				"isRepeaterSelect":true,
				"selectItems":[],
				"style":"",
				"class": "",
				"asside":{	"noteOne:": "",
							"noteTwo:": ""}
			};
				if(valarr && valarr.label2){
				var name = valarr.label2;
				name =name.charAt(0).toLowerCase() + name.slice(1);
				console.log(name);
				name=name.replace(/\s/g,'');
				console.log(name);
			eventInput.name=name;
			eventInput.inputType="select";
			eventInput.header=valarr[0].label;
			eventInput.label=valarr[1].label2;
			eventInput.selectItems=valarr[2];
		}
			derray.push(eventInput);
			
		}
		
		 return derray;
	},	
	
	
	_displayIsClosed(isClosed){
		var retVal;
		if(isClosed=="CLOSED"){retVal="color: green; font-weight: 700; margin: 1px"; this.set("alert", "green");}
		else if(isClosed=="OPEN"){retVal="color: red; font-weight: 700; margin: 1px"; this.set("alert", "red");}
		return retVal;
	}
	
});
</script>
</dom-module>

<!--{"label2":"Course Type: "},
						{"courseType":"Focused_1600SAT_Course"},
						{"courseType": "Focused_Young_Scholars_Reading"},
						{"courseType": "Focused_Young_Scholars_Math"}, 
						{"courseType": "Focused_PSAT_NMSQ"}, 
						{"courseType": "Focused_PSAT_9_10"}, 
						{"courseType": "Focused_PSAT_8_9"}, 
						{"courseType": "Private_With_John"},
						{"courseType": "Private_With_Stacy"},
						{"courseType": "Private_With_George"},
						{"courseType": "Private_With_Scott"},
						{"courseType": "Private_With_Jason"},
						{"courseType": "Private_With_Mustaffa"},
						{"courseType": "Private_With_Radika"} 
					],
					 testDates,
					 [
					 {"label": "Span of Weeks Prior To Test Date"},
					 {"label2": "Span Of Weeks: "},
					 {"span_Of_Weeks": "1 Week, 7 Days"},
					 {"span_Of_Weeks": "2 Weeks, 14 Days"},
					 {"span_Of_Weeks": "3 Weeks, 21 Days"},
					 {"span_Of_Weeks": "4 Weeks, 28 Days"},
					 {"span_Of_Weeks": "5 Weeks, 35 Days"},
					 {"span_Of_Weeks": "6 Weeks, 42 Days"},
					 {"span_Of_Weeks": "7 Weeks, 49 Days"},
					 {"span_Of_Weeks": "8 Weeks, 56 Days"},
					 {"span_Of_Weeks": "9 Weeks, 63 Days"},
					 {"span_Of_Weeks": "10 Weeks, 70 Days"},
					 {"span_Of_Weeks": "11 Weeks, 77 Days"},
					 {"span_Of_Weeks": "12 Weeks, 84 Days"},
					 {"span_Of_Weeks": "13 Weeks, 91 Days"},
					 {"span_Of_Weeks": "14 Weeks, 98 Days"},
					 {"span_Of_Weeks": "15 Weeks, 105 Days"},
					 {"span_Of_Weeks": "16 Weeks, 112 Days"}
					 ],
					 [
					 {"label2": "Practice Test Day: "},
					 {"practice_Tests_Day": "Sunday Practice Tests"}, //translates to 7 or 6
					 {"practice_Tests_Day": "Saturday Practice Tests"}
					 ],
					 [
					 {"label": "Do any Preset Course Paterns match your event?"},
					 {"label2": "Course Preset Pattern: "},
					 {"preset_Course_Pattern": "NO PATTERN MATCHES MY NEEDS"},
					 {"preset_Course_Pattern": "M|W_6:00PM_9:00PM"},
					 {"preset_Course_Pattern": "T|Th_6:00PM_9:00PM"},
					 {"preset_Course_Pattern": "M|W|F_3:45PM_5:45PM"},
					 {"preset_Course_Pattern": "M|W_Summer_9:00AM_12:30PM"},
					 {"preset_Course_Pattern": "T|Th_Summer_9:00AM_12:30PM"},
					 {"preset_Course_Pattern": "M|W_Summer_1:00PM_4:30PM"},
					 {"preset_Course_Pattern": "T|Th_Summer_1:00PM_4:30PM"}
					 ],
					  [ {"label": "If no pattern matches your needs, do any days recur in your event?"},
					  {"label2": "Select True if Days Repeat"},
					  {"event_Is_Recurring": true},
					  {"event_Is_Recurring": false}
					  ], 
					  [
					{"label": "If so, does the event repeat on these same days of the week for the entire Course, or is there some variation?"},
					{"label2": "Select False if there is ANY ANY ANY Variation"},
					  {"day_Recurs_For_WholePeriod": true},
					  {"day_Recurs_ForWholePeriod": true}
					  ],
					 
					 [ {"label": "Which Days of the week Repeat through all or most of your event?"},
					 {label2: "Repeating Days"},
					 {"daysToRecurr": "Sunday"},//6 sun
					 {"daysToRecurr": "Monday"},//5 mon
					 {"daysToRecurr": "Tuesday"},//4 tues
					 {"daysToRecurr": "Wednesday"},//3 wed
					 {"daysToRecurr": "Thursday"},//2 thurs
					 {"daysToRecurr": "Friday"},//1 fri
					 {"daysToRecurr": "Saturday"}, 
					 {"daysToRecurr": "HERE WE WILL POP THE CALENDAR"} //7 sat
					],
					[{"label":"PRESET START TIME:" },
					{"label2": "PRESET START TIME:" },
					{"startTime": "6:00PM"},
					{"startTime": "3:45PM"},
					{"startTime": "9:00AM"},
					{"startTime":"1:00PM"},
					{"startTime":"Input Start Time Here"}
					],
					[{"label":"PRESET END TIME:" },
					{"label2":"PRESET END TIME:" },
					{"endTime": "9:00PM"},
					{"endTime": "5:45PM"},
					{"endTime": "12:30PM"},
					{"endTime":"4:30PM"},
					{"endTime":"Input Start Time Here"}
					],
					// [{"label": "On the following Days holidays or staff schedules conflicted with your new events schedule: "},
					// {"holidayConflicts": Date()},
					// {"holidayConflicts": Date()},
					// {/*have it build them '' on all above*/}
					// ],
				
					// ,
					[{"label":"Here you Input The Location of your Meetings!" },
					{"label2":"Event Location" },
					{"location": "text-field"},
					{"location": "704 Ginesi Dr. Morganville New Jersey, 07754"},
					{"location": "Virginia"},
					{"location" :"other, specify Client home etc"}//get from address field?
					],
				 	[		
				 	{"label": "Primary Course Coach"},
					{"label2": "Your Coach"},
					{"coach": "John Gotta"},
					{"coach":"Stacy Collerette"},
					{"coach":"George Rimakis"},
					{"coach":"Scott McKinley"},
					{"coach":"Jason Frazzano"},
					{"coach":"Mustaffa Raza"},
					{"coach":"Radika Patel"},
					],
					// [
					// {"coachFcid":"GottaJohn00001"},
					// {"coachFcid":"ColleretteStacy00001"},
					// {"coachFcid":"RimakisGeorge00001"},//derive this
					// {"coachFcid":"McKinleyScott00001"},
					// {"coachFcid":"FrazzanoJason00001"},
					// {"coachFcid":"RazaMustaffa00001"},
					// {"coachFcid":"PatelRadika00001"},	
					// ],
					[
					{"label": "Focused Courses often Have More than One Coach, here are a list of other coaches associated with this course:"},
					{"label2": "Associate Coach"},
					{"associates": "John Gotta"},
					{"associates":"Stacy Collerette"},
					{"associates":"George Rimakis"},
					{"associates":"Scott McKinley"},
					{"associates":"Jason Frazzano"},
					{"associates":"Mustaffa Raza"},
					{"associates":"Radika Patel"}
					 ],
					// [{"hoursTotal": ""}],//derived
					// [{"date":""}],
					// [{"dateArray":[]}],
					// [{"fcid":""}],
					// [{"fanOutDayStampId":""}],
	  		// 		[{"dataBaseKey":""}],
	  		// 		[{"occupancy":""}],
	  		 		[
	  		 		{"label": "Course Student Limit"},
					{"label2": "Course Size:"},
	  				{"occupancyLimit":"Mini-Group: 8"},
	  				{"occupancyLimit":"Mini-Group: 12"},
	  				{"occupancyLimit":"Mini-Group: 16"},
	  				{"occupancyLimit":"1600SAT Course: 18"},
	  				{"occupancyLimit":"1600SAT Course: 22"},
	  				{"occupancyLimit":"1600SAT Course: 25"}
setTest(testIndex){
		var mayDate = [2016, 5, 7];
			var juneDate = [2016, 6, 4];
			var augFDate = [2016, 8, 6];
			var octDate = [2016, 10, 1];
			var novDate = [2016, 11, 5];
			var decDate = [2016, 12, 3];
			var janDate = [2017, 1, 28];
			var marDate = [2017, 3, 11];
			var may2Date = [2017, 5, 6];
			var june2Date = [2017, 6, 3];
			var aug1Date = [2017, 8, 26];
			var oct2Date = [2017, 10, 7];
			var nov2Date = [2017, 11, 4];
			var dec2Date = [2017, 12, 2];
			var mar2Date = [2018, 3, 10];
			var may3Date = [2018, 5, 5];
			var june3Date = [2018, 6, 2];
			var aug2Date = [2018, 8, 25];
			var oct3Date = [2018, 10, 6];
			var nov3Date = [2018, 11, 3];
			var dec3Date = [2018, 12, 1];
			var mar3Date = [2019, 3, 9];
			var may4Date = [2019, 5, 4];
			var june4Date = [2019, 6, 1];
			var allTestDates = [];
			allTestDates = [mayDate, juneDate, augFDate, octDate, novDate, decDate, janDate, marDate, may2Date, june2Date, aug1Date, oct2Date, nov2Date, dec2Date, mar2Date, may3Date, june3Date, aug2Date, oct3Date, nov3Date, dec3Date, mar3Date, may4Date, june4Date];
			this.set("allTestDates", allTestDates);
			this.testDateArray=[];
			for(i=0;i<allTestDates.length; i++)
				{
				var testD = new Date(allTestDates[i]).toDateString();
				var testDobj = new Date(allTestDates[i]);
				this.push("testDateArray", {"testDate": testD, "testDateObject": testDobj});
				// testDates.push({testD: testSet.reverse()});
				}
			if(testIndex!=undefined && testIndex!=null && testIndex!=NaN)
			{
				var p = new Date(allTestDates[testIndex]);
				return p;

			}
		},
-->