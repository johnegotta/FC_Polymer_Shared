<dom-module id="fc-clockObj-prime">
<style is="custom-style">
.primary{
	color: #008;
	font-weight:600;
	font-size: 15.5px;
}
.secondary{
		color: grey;
	font-weight:500;
	font-size: 11px;
}	
.scroller{overflow-x: scroll;}
:host{position: absolute;background: #fefefe; top: 8px;left: 8px;width: 240px; z-index:93;};

paper-material{opacity: 1;position: relative;background: #ffffff;border: 3px ridge #aecdfe;padding: 6px 4px;margin: 20px;display: block;@apply(--horizontal-layout);@apply(--nowrap-layout);
}
paper-button{width: 58px!important; padding: 6px 2px; border: 1px ridge #aecdfe; margin:22px 0px 2px 0px; elevation: 3; }
.arrows{opacity: 1;font-size: 22px; margin: 5px 8px 2px 8px; width: 24px; height: 24px;
-webkit-transition: width 1s, height 1s, display 1s, background-color 1s, -webkit-transform 1s;
    transition: width 1s, height 1s, background-color 1s, transform 1s, display 1s;
}
.query-builder{opacity: 1;width: 12px;height: 12px;border-radius: 180px;padding: 2px;margin: 2px;border: #fff 1px solid;background: #aecdcd;color: white;  position: absolute;right: 3px;top: 3px;
	}
.clear{ width: 16px;height: 16px;border-radius: 180px;padding: 2px; margin: 2px;border: #fff 1px solid;background: red;color: white;  position: absolute;right: 0px;top: 0px; opacity: 2;}
/*.glass{background: white;opacity: .7; }*/
.ironOne{opacity: 2;width: 24px;height: 24px;border-radius: 180px;padding: 3px 5px 5px 5px;margin: 2px 7px;border: #008 3px solid;color: #008; background: #5DD7FC;color: white;box-shadow: 3px 14px 11px 4px #9fafaf;
 -webkit-transition: width 1s, display 1s, height 1s, background-color 1s, -webkit-transform 1s;
    transition: width 1s, height 1s, background-color 1s, transform 1s, display 1s;
}
.ironOne:active{ opacity: 1; color: gold; box-shadow: 0px;border: gold 5px solid; opacity: 2;}
.ironTwo{width: 16px; opacity: 1; height: 16px;border-radius: 180px;padding: 5px;margin: 2px 7px;background: #5DD7FC;color: gold; box-shadow: 0px;border: #007 3px solid;}
.timer{font-size: 17px; opacity: 1; font-weight: 600; font-family: merriweather; color: #007; padding: 6px 4px 2px 4px; border: .4px solid #efefef;}
.slight{font-size: 14px; font-family: merriweather; opacity: 1; color: #008; font-weight: 400;}
.slides{overflow: hidden; overflow-x: scroll;}
</style>

<template>
<div style="padding: 4px; border: 4px double #008; width:412px">


<div style="padding: 6px; border: 4px #efefef double; text-align: center; width:388px" class="layout vertical" on-track="_focusedDraggable" drags>
	
		<div style="border: 1px #008 solid; color:#008;">
			<iron-icon icon="icons:{{swapIcon}}" class$="{{swapIcon}}" on-tap="toggle">
			</iron-icon>
			<div style="padding: 4px; border: 1px #efefef solid; text-align: center;cursor:pointer; overflow-x: hidden; background: white;" class="layout vertical">
							
				<paper-material class="layout vertical" elevation="3">
					<span draggable drags class="slight">{{date}}</span>
					<section id="theClock" on-dblclick="opencollapser" class="timer">{{theTime}} </section>	
				</paper-material>

				<div>
				<u>ALARMS</u>
				<template is="dom-repeat" items="{{alarmArray}}">
					<div style="color:{{computeAlarmColor(item.isActive)}}">{{item.alarmName}} {{item.alarmTime}}</div>
				</template>
				</div>
  <!-- <iron-collapse id="collapser"  class="horizontal layout center-justified glass"> -->
	<iron-selector selected="{{selected}}" class="horizontal layout center-justified nowrap" items="{{clockArray}}">
	<!--
	<section style="margin-left: 25px;" on-tap="selectPrevious">
			<iron-icon icon="icons:chevron-left">
			</iron-icon>
	</section>
				 <paper-tabs 
			      		id="assistantMenu" 
			      		scrollable="true"
			      		style="padding: 2px 0px; max-height: 96px; min-height: 32px; min-width: 180px; font-size: 18px;" 
			      		bar="true"
			      		hide-scroll-buttons="true" 
			  			>  -->
				<section  class="horizontal layout around-justified nowrap" style="overflow-x: scroll; padding: 0px 0px;">
					<!-- <paper-list-box class="horizontal layout flex nowrap" tyle="overflow: hidden;">-->
					<select on-change="switchClock">
					<template is="dom-repeat" items="{{fcClockArray}}" as="clock" class="vertical layout flex nowrap" style="overflow:hidden; overflow-x: scroll; width: 2200px;">
							<option value={{index}}>{{clock.clockName}}</option>
							<!--
							<paper-item  class="layout horizontal courseData clockinterfaces">
									<paper-item-body  class="layout horizontal flex shrink">
											<div class="primary">
													<fc-clobjid-prime id="dsvs_{{clock.clockName}}{{clock.thours}}" orientation="horizontal" dataobject="{{clock.clockData}}">
													</fc-clobjid-prime>
											</div>
									</paper-item-body>
							</paper-item>
							-->
						</template>
						</select>
					<!-- </paper-list-box> -->
				</section>
			<!-- </paper-tabs> 
			<section style="padding:25px; margin-right: 20px;" on-tap="selectNext">
			<iron-icon icon="icons:chevron-right"></iron-icon></section> -->
			</iron-selector> 
		<!-- </iron-collapse> -->

	</div>
		<!-- <iron-collapse id="collapse"  class="horizontal layout center-justified glass"> -->	
			<div class="content" id="content" class="vertical layout center-justified" currentclock="[[currentClock]]" clockname="[[computeClockType(clockName)]]" style="overflow-y: scroll; overflow-x: hidden; width: 360px; padding: 8px 4px;">
		
					<section class="horizontal flex layout nowrap self-stretch" style="padding: 2px; margin: 2px 12px 2px 2px;">

						<fc-clobjid-prime id="dsv" style="text-align: center;border: 2px #008 solid; text-size: 16px;" orientation="horizontal" dataobject="{{currentClock.clockData}}">
						</fc-clobjid-prime>
						<iron-icon icon="{{onOffIcon}}" style="color:{{onOffColor}}; height:50px;width:50px;margin-top:5px" class$="{{onOffIcon}}" on-tap="toggleRunning"></iron-icon>
						<!-- <paper-button on-tap="toggleRunning">ON/OFF</paper-button> -->
					</section>
				<section data-currentclock$="[[currentClock]]" data-clockname$="[[computeClockType(clockName)]]"  class="horizontal layout flex center center-justified" on-tap="startStopTapHandler">
					<section data-currentclock$="[[currentClock]]" data-clockname$="[[computeClockType(clockName)]]" class="horizontal layout flex center center-justified" style="height: 24px; width: 100%; font-weight: 600; font-size: 18px; font-family: merriweather; color: #008; background: #fefefe; border: #afafaf 3px double;padding:2px;"> 
					[[computeClockType(clockName)]]
					</section>
				</section>
					<section style="width: 100%; padding: 4px;">
					
					</section>

					<section class="horizontal flex layout nowrap center-justified" style="padding: 4px; margin-left: 2px;">
						<span class="arrows" style="padding: 6px; color:white; border-radius: 180px; background: red; border: white 3px solid;width: 24px; height: 24px;box-shadow: 3px 14px 11px 4px #9fafaf;-webkit-transition: width 1s, display 1s, height 1s, background-color 1s, -webkit-transform 1s;transition: width 1s, height 1s, background-color 3s, transform 1s, display 3s;" on-tap="functionLeft">{{uparrow}}<iron-icon icon="icons:arrow-back" style="padding-bottom: 4px;" hidden$="{{nowUparrow}}"></iron-icon></span>
							

					<iron-icon class="ironOne" name="[[computeClockType(clockName)]]" on-tap="pressed" icon="device:add-alarm"></iron-icon>

						<span class="arrows" style="padding: 6px; color:white; border-radius: 180px; background: green; border: white 3px solid;width: 24px; height: 24px;box-shadow: 3px 14px 11px 4px #9fafaf;-webkit-transition: width 1s, display 1s, height 1s, background-color 1s, -webkit-transform 1s;transition: width 1s, height 1s, background-color 1s, transform 1s, display 1s;" on-tap="functionRight">{{uparrow}} <iron-icon icon="icons:arrow-forward" hidden$="{{nowUparrow}}"></iron-icon></span>
					</section>
					<section class="horizontal flex layout nowrap center
					 center-justified" style="width: 100%; font-size: 13px; font-weight:600; font-family: merriweather; color: #007; margin-left: 0px;">
					<paper-button style="text-align: center;" class="horizontal layout flex center-justified">VIEW</paper-button>
						<paper-button class="horizontal layout flex center-justified" style="text-align: center;">CLEAR</paper-button>

					<paper-button style="text-align: center;" class="horizontal layout flex center-justified" style="text-align: center;">SAVE</paper-button>
					</section>
				</div> 
		<!--  </iron-collapse> -->
	</div>
</div>
</template>
<script>

'use strict';



//firstDigit and last digit refer to: 0 = tensHours, 1 = hours, 2 = tensMinutes, 3 = minutes, 4 = tensSeconds, 5 = seconds, 6 = tenths, 7 = hundredths
function FcClockData(argTenths, argFirstDigit, argLastDigit)
{	
	var firstDigit = argFirstDigit || 0;
	var lastDigit = argLastDigit || 7;
	var digitArray = [
		{name: "thours", value: 0, inputType: "digit", label:" "+" H", colon:""},
		{name: "hours", value: 0, inputType: "digit", label:"H", colon:":"},
		{name: "tmin", value: 0, inputType: "digit", label:"M",colon:""},
		{name: "min",value: 0, inputType: "digit", label:"M", colon:":"},
		{name: "tsec",value:0, inputType: "digit", label:"S", colon:""},
		{name: "sec",value: 0, inputType: "digit", label:"S", colon:":"},
		{name: "tenth", value: 0, inputType: "digit", label:"s", colon:""},
		{name: "hundredth", value: 0, inputType: "digit", label:"s", colon:""}
	];
	for(var i = 0; i < 8; i++)
	{
		var obj = digitArray[i];
		this[obj.name] = obj;
		if(i < firstDigit || i > lastDigit)
		{
			this[obj.name].hidden = true;
		}
	}
	//console.log(this, "aloha");
	// this.thours = {name: "thours", value: Math.floor(argHours / 10), inputType: "digit", label:" "+" H", colon:""};
	// this.hours = {name: "hours",clockname:argType, value: 0, inputType: "digit", label:"H", colon:":"};
	// this.tmin = {name: "tmin",clockname:argType, value: 0, inputType: "digit", label:"M",colon:"", hidden: false};
	// this.min = {name: "min", clockname:argType,value: 0, inputType: "digit", label:"M", colon:":", hidden:false };
	// this.tsec = {name: "tsec", clockname:argType,value:0, inputType: "digit", label:"S", colon:"", hidden:false};
	// this.sec = {name: "sec", clockname:argType,value: 0, inputType: "digit", label:"S", colon:":", hidden:false };
	// this.tenth = {name: "tenth",clockname:argType, value: 0, inputType: "digit", label:"s", colon:"","hidden":!argFast};
	// this.hundredth={name: "hundredth",clockname:argType, value: 0, inputType: "digit", label:"s", colon:"","hidden":!argFast};
	
	this.convertFromTenths(argTenths);
	
}

FcClockData.prototype.convertToTenths = function()
{
	var result = 0;
	result += this.hundredth.value;
	result += this.tenth.value * 1;
	result += this.sec.value * 10;
	result += this.tsec.value * 100;
	result += this.min.value * 600;
	result += this.tmin.value * 6000;
	result += this.hours.value * 36000;
	result += this.thours.value * 360000;
	return result;
};


FcClockData.prototype.convertFromTenths = function(argTenths)
{	
	
	this.tenth.value = argTenths % 10;
	var fullsec = Math.floor(argTenths / 10) % 60;
	this.sec.value = fullsec % 10;
	this.tsec.value = Math.floor(fullsec / 10);
	var fullmin;
	if(argTenths>35999 && argTenths<60000)
	{
		fullmin = Math.floor(argTenths / 600) % 100;
	}
	else
	{
		fullmin = Math.floor(argTenths / 600) % 60;
	}
	this.min.value = fullmin % 10;
	var fullhour = Math.floor(argTenths / 36000);
	this.hours.value = fullhour % 10;
	this.tmin.value = Math.floor(fullmin / 10);
	if(argTenths>35999 && argTenths<60000)
	{
		this.hours.value = 0;
	}
	else
	{
		//this.tmin.value = fullmin % 60;
	}
	
	// if(argTenths>35999 && argTenths< 60000)
	// {
	// 	if(fullhour===1)
	// 	{
	// 		//this.tmin.value =  4;
	// 	}
	// }
	// else
	// {
	// 	fullhour = Math.floor(argTenths / 36000);
	// 	this.hours.value = fullhour%10;
	// }
};

// FcClockData.prototype.setAlarm = function(argTime)
// {
// 	if(argTime>this.now)
// 		{
//  			var alarm = argTime.getTime();
//  			var now = this.now.getTime();
//  			var interval =alarm-now;
//  			setInterval(this.soundAlarm, interval, this);
// 		}
// };

FcClockData.prototype.soundAlarm = function(argAlertTarget, argTime)
{
	
	var numDate=argTime.getTime() +30000;
	var self=this;
	while(this.now<numDate)
	{
	var handle =setTimeOut(function(argAlertTarget) {
	self.$$(argAlertTarget).style.background=(self.$$(argAlertTarget).style.background=="red")?"black":"red";
	self.$$(argAlertTarget).style.color=(self.$$(argAlertTarget).style.color=="black")?"red":"black";
	}, 2000);
	handle=(handle!==null)?null:setTimeOut(function(argAlertTarget) {
	self.$$(argAlertTarget).style.background=(self.$$(argAlertTarget).style.background=="red")?"black":"red";
	self.$$(argAlertTarget).style.color=(self.$$(argAlertTarget).style.color=="black")?"red":"black";},
		2000);
	handle=null;
	}
	argAlertTarget.style.background="white";
	argAlertTarget.style.background="#008";
}; 

class FcClock
{
	constructor(argName, argType, argTenths, argFirstDigit, argLastDigit)
	{
		this.clockName = argName;
		this.clockType = argType;
		this.startTenths = argTenths;
		this.isRunning = false;
		this.firstDigit = argFirstDigit;
		this.lastDigit = argLastDigit;
		this.clockData = new FcClockData(argTenths, argFirstDigit, argLastDigit);
	}
	convertFromTenths(argTenths)
	{
		this.clockData.convertFromTenths(argTenths);
	}
	convertToTenths()
	{
		return this.clockData.convertToTenths();
	}
	toggleRunning()
	{
		var d = (new Date()).getTime();
		if(this.isRunning)
		{
			this.lastTurnedOff = d;
			this.lastTurnedOffTenths = this.clockData.convertToTenths();
		}
		else
		{
			this.lastTurnedOn = d;
			this.lastTurnedOnTenths = this.clockData.convertToTenths();
		}
		this.isRunning = !this.isRunning;
	}
}

Polymer({
	is: "fc-clockObj-prime",
	properties: {
		currentClock: {
			type: FcClock,
			value: {},
			notify: true,
		},
		element:{
			type: Object,
			value: function(){return this.$.theClock;},
			notify:true
		},
		clockType: {
			type: String, 
			computed:"computeClockType(clockName)",
			notify: true,
		},
		alarmArray: {
			type: Array,
			value: [],
			notify: true
		},
		fcClockArray: {
			type: Array,
			value: [],
			notify: true
		},
		nowUparrow:{
			type: Boolean,
			value: false,
			notify: true
		},
		 swapIcon: {
		 	type: String,
		 	value: function(){return "query-builder";},
		 	notify: true
		 },
		 onOffIcon: {
		 	type: String,
		 	value: function(){return "icons:forward";},
		 	notify: true
		 },
		 onOffColor: {
		 	type: String,
		 	value: "green",
		 	notify: true
		 },
		 countDownFunc:{
		 	type: Function,
		 	value:null,
		 	notify: true
		 },
		 swatch:{
		 	type: Function,
		 	value:null,
		 	notify: true
		 },
		drags:{
			type: Boolean,
			value: true,
			notify: true
		},
		dragCounter:{
			type: Number,
			value: 0,
			notify: true
		},
		// argObjectSlow:{
		// 	type: Object,
		// 	value: {},
		// 	notify: true
		// },
		// argObjectFast: {
		// 	type: Object,
		// 	value: {},
		// 	notify: true
		// },
		theTime:{
			type: String,
			value:function(){
				var newtime = new Date();
				var update = newtime.toLocaleTimeString();
				return update;
			},
			notify: true
		}, 
		uparrow:{
			type: String,
			value:"",
			notify: true
		},
		downarrow:{
			type: String,
			value: "",
			notify: true
		}, 
		clockName:{
			type: String,
			value: "",
			observer:"clockwatcher",
			notify: true
		},
		pressedClock:{
			type: Boolean,
			value: function(){return false;},
			notify: true
		},
		pressedSW:{
			type: Boolean,
			value: false,
			notify: true
		},
		pressedCD:{
			type: Boolean,
			value: false,
			notify: true
		},
		tapped:{
			type: Boolean,
			value: false,
			notify: true
		},
		clockIndex: {
			type: Number, 
			value: 0,
			notify: true
		},
		isPressed:{
			type: Boolean,
			computed: "_computeIsPressed(pressedCD, pressedSW, pressedClock)",
			notify: true
		},
		date:{
			type: Date,
			value:function(){
				var d=new Date();
				return d.toDateString();
			},
			notify: true
		},
		theCountdown:{
			type: Number,
			value: 0,
			notify: true
			}, 
		swholder:{
			type:Number,
			value: 0,
			notify: true
		},
		counter:{
			type:Number,
			notify: true
		},
		slideStyle: {
       		type: String,
       		value: 'horizontal'
      	},
	    widthRatio: {
       		type: Number,
       		value: 3
      	},
	    transition: {
        	type: String,
        	value: '300ms cubic-bezier(0.4, 0.0, 0.2, 1)'
      	}, 
      	now:{
      		type: Date, 
      		notify: true
      	},
	},
	behaviors:[],

	clockwatcher: function(newVal, oldVal)
	{
		console.log(newVal, oldVal);
	},

	ready: function()
	{
		var nowish = (new Date()).getTime()+50000;
		var laterish = (new Date()).getTime()+ 90000;
		this.fcClockArray = [];
		this.alarmArray = [];
		this.addAlarm(nowish, "nowish");
		this.addAlarm(laterish, "laterish");
	  	this.push("fcClockArray", new FcClock("Reading", "Countdown", 39000, 2, 6));
	 	this.push("fcClockArray", new FcClock("Grammar", "Countdown", 21000, 2, 6));
	 	this.push("fcClockArray", new FcClock("Math1", "Countdown", 15000, 2, 6));
	 	this.push("fcClockArray", new FcClock("Math2", "Countdown", 33000, 2, 6));
	 	this.push("fcClockArray", new FcClock("Essay", "Countdown", 30000, 2, 6));
        this.push("fcClockArray", new FcClock("My Stopwatch", "Stopwatch", 0, 0, 7));
        this.push("fcClockArray", new FcClock("My Stopwatch 2", "Stopwatch", 0, 2, 5));
	  	//	this.clockArray.push(new FcClock("AlarmClock",ts, "", []));
	  	//this.clockArray.push(new FcClockData("'Fast' Stopwatch", 0,0,argObjectFast, true));
	  	//	this.clockArray.push(new FcClockData("'SAT' Countdowns", [39000,25000,35000,25000,20000], "",{}, true));
	  	this.set("currentClock", this.fcClockArray[0]);
	  	console.log(this.currentClock.hours, "rubby"); 
	  	console.log(this.fcClockArray);
	},

	attached: function()
	{	
		//var clockname=this.currentClock.hours; 
		//this.set("clockName", clockname);
		var self = this;
		console.log("attached", this.fcClockArray);
		//setInterval(this.updateClock, 2000, this);
		setInterval(function(){
			var currentTime = new Date();
			var time = currentTime.toLocaleTimeString();
			self.set("theTime", time);
			//self.set("now",update);
			var numClocks = self.fcClockArray.length;
			var numAlarms = self.alarmArray.length;
			for(var i = 0; i < numClocks; i++)
			{
				var clock = self.fcClockArray[i];
				if(clock.isRunning)
				{
					var stamp = currentTime.getTime();
					var tenths = clock.convertToTenths();
					var deltaTenths = Math.floor((stamp  - clock.lastTurnedOn)/100);
					var newTenths;
					if(clock.clockType == "Countdown")
					{
						newTenths = clock.lastTurnedOnTenths - deltaTenths;
						if(newTenths <= 0)
						{
							newTenths = 0;
							console.log("clock named " + clock.clockName + " ran out at " + currentTime);
							clock.isRunning = false;
						}
					}
					else if(clock.clockType == "Stopwatch")
					{
						newTenths = clock.lastTurnedOnTenths + deltaTenths;
						//tenths+=1;
					}

					clock.convertFromTenths(newTenths);
					//var cd = new FcClockData(tenths);
					var path = "currentClock.clockData.tenth.value";
					var pathlight = "fcClockArray." + i + ".clockData";
					//self.set(pathlight, cd);
					self.notifyPath(path, self.currentClock.clockData.tenth.value);

				}
			}
			for(i = 0; i < numAlarms; i++)
			{
				var alarm = self.alarmArray[i];
				//console.log(alarm, alarm.alarmTime, currentTime);
				var alarmTime = alarm.alarmTime;
				if(alarm.isActive && (currentTime.getTime() > alarmTime.getTime()) )
				{
					//alert("Alarm " + alarm.alarmName + " went off at " + currentTime);
					console.log("Alarm went off at " + currentTime);
					alarm.isActive = false;
					self.notifyPath("alarmArray." + i + ".isActive", false);
				}
			}
		}, 100);
	},

	toggleRunning: function(event)
	{
		this.currentClock.toggleRunning();
		var setVal = this.onOffIcon=="icons:forward"?"icons:close":"icons:forward";
		this.set("onOffIcon", setVal);
		this.set("onOffColor", this.onOffColor=="green"?"red":"green");
	},

	addAlarm: function(argTime, argName)
	{
		var alarmTime = new Date(argTime);
		var now = new Date();
		var active = (now < alarmTime);
		this.push("alarmArray", {alarmName: argName, alarmTime: alarmTime, isActive:active});
	},

	computeAlarmColor: function(argActive)
	{
		return argActive?"green":"red";
	},

startStopTapHandler: function(event){
	console.log(event.target, event, event.target.attributes);


},
opencollapser: function()
{
this.$.collapser.opened=!this.$.collapser.opened;

},

// functionLeft: function(e){
// 	if(this.nowUparrow===true)
// 	{
// 		this.otherWayNow();
// 	}
// 	else
// 	{
// 		if(this.clockIndex>0)
// 		{
// 			var len = this.clockIndex-1;
// 			this.set("currentClock", this.clockArray[len]);
// 		}
// 		else
// 		{
// 			var len=this.clockArray.length-1;
// 			this.set("currentClock", this.clockArray[len]);
// 		}
// 		this.set("clockName", this.currentClock.hours);
// 		this.set("clockIndex", len);
// 		//this.set("clockType", this.clockName);
// 	}
// },

// functionRight: function(e){
// if(this.nowUparrow===true){
// 	this.goNow();
// 	 }
// else{
// 	var len=this.clockArray.length -1;
// 	if(this.clockIndex===len){
// 		this.set("clockIndex", 0);
// 	}
// 	else{
// 		this.set("clockIndex", this.clockIndex +1);
// 	}
// 	this.set("currentClock", this.clockArray[this.clockIndex]);
// 	this.set("clockName", this.currentClock.hours.clockname);
// 	//this.set("clockType", this.clockName);
	
//  }
// console.log(e, this.currentClock);
// console.log(e);

// },
  
    dragYes: function()
    {
    	this.drags=true;
    	//this._focusedDraggable();
    },
  
	// goNow:function(){
	// 	console.log("goNow");
	// 	if(this.pressedSW==true && this.swatch==null)
	// 	{
	// 	 this.swatch=setInterval(this.startStopwatch.bind(this), 100, this);
	// 	}
	// 	if(this.pressedCD==true && this.countDownFunc==null)
	// 	{
	// 		console.log("about to start Count Down");
	// 		this.countDownFunc=setInterval(this.countDown.bind(this),100,this);
	// 	}
	// },

	// otherWayNow:function(){

	// 	clearInterval(this.swatch);
	// 	clearInterval(this.countDownFunc);
	// 	this.pressedCD==false;
	// 	this.pressedSW==false;
	// 	this.pressedClock==false;
	// 	this.set("swatch", null);
	// 	this.set("countDownFunc", null);
	// },

	toggle: function(e)
	{	
		this.$.collapse.opened=!this.$.collapse.opened;
		//this.$.collapse2.opened=!this.$.collapse2.opened;
		var setVal = this.swapIcons=="query-builder"?"clear":"query-builder";
		this.set("swapicons", setVal);
	},

	// countDown: function(argThis)
	// {
	// 	var tenths = this.currentClock.convertToTenths();
	// 	if(tenths != 0)
	// 	{
	// 		tenths--;
	// 		this.currentClock.convertFromTenths(tenths);
	// 		this.notifyPath("currentClock.tenth.value", this.currentClock.tenth.value);
	// 	}
	// 	else
	// 	{
	// 		alert("done");
	// 		clearInterval(this.countDownFunc);
	// 		this.set("countDownFunc", null);
	// 	}
	// },

	computeClockType: function(clockName)
	{
		console.log(clockName);
		return clockName;
	},

	switchClock: function(e)
	{
		var num = parseInt(e.target.value);
		//console.log(num, e.target.value, "fusili");
		this.set("currentClock", this.fcClockArray[num]);
		this.set("onOffIcon", this.currentClock.isRunning?"icons:close":"icons:forward");
		this.set("onOffColor", this.currentClock.isRunning?"red":"green");
	},

	// startStopwatch:function(argThis)
	// {
	// 	var tenths = this.currentClock.convertToTenths();
	// 	tenths++;
	// 	this.currentClock.convertFromTenths(tenths);
	// 	this.notifyPath("currentClock.tenth.value", this.currentClock.tenth.value);
	// },

	_computeIsPressed: function(pressedCD, pressedSW, pressedClock)
	{
		var torf =(pressedCD==true || pressedSW==true || pressedClock == true);
		return torf;
	},

	showClock: function(pressedClock)
	{
		var retVal =(this.pressedClock==true)?false: true;
		return retVal;
	},

	showStopwatch: function(pressedSW)
	{
		var retVal =(this.pressedSW==true)?false: true;
		return retVal;
	},

	showCountdown: function(pressedCD)
	{
		var retVal =(this.pressedCD==true)?false: true;
		return retVal;
	},

	pressed:function(e)
	{
		var button = e.target;
		console.log(e, e.target); 
		var name=e.target.name;
		if(this.isPressed==true){Polymer.dom(button).classList.remove("ironTwo");}
		else{Polymer.dom(button).classList.add("ironTwo");}
		if(name=="AlarmClock"){
			this.pressedClock=!this.pressedClock;
			this.showClock();
		}
		if(name=="Stopwatch" || name=="'Fast' Stopwatch"){
			this.pressedSW=!this.pressedSW;
			this.showStopwatch();
		}
		if(name=="Countdown" || name=="'SAT' Countdowns"){
			this.pressedCD=!this.pressedCD;
			this.showCountdown();
		}
		var buttons = this.querySelectorAll(".ironOne");
		var counter=buttons.length;
		for(var i=0; i<counter; i++){
			if(buttons[i]!=button && buttons[i].hidden==false){buttons[i].hidden=true;}
			else{buttons[i].hidden=false;}
			} 
		this.nowUparrow=!this.nowUparrow;
		var retVal = this.uparrow ==""? '▲': "";
		this.set("uparrow", retVal);
		var detVal = this.downarrow ==""? '▼': ""; 
		this.set("downarrow", detVal);
		//var nameplus = (this.clockName=="")?"Set " + name:"";
		//this.set("clockName", nameplus);
	},

/*
	updateClock: function(argThis)
	{
		var self=argThis;
		var update = new Date();
		var time = update.toLocaleTimeString();
		self.set("theTime", time);
		//console.log(update);
		//self.set("now",update);
		var numClocks = self.clockArray.length;
		console.log(numClocks, "hotdog", argThis, argThis.clockArray);
		for(var i = 0; i < numClocks; i++)
		{
			var clock = self.clockArray[i];
			if(clock.isRunning)
			{
				var tenths = clock.convertToTenths();
				if(clock.clockType == "Countdown")
				{
					if(tenths != 0)
					{
						tenths--;
						//this.notifyPath("currentClock.tenth.value", this.currentClock.tenth.value);
					}
					else
					{
						alert("done");
						clock.isRunning = false;
						//clearInterval(this.countDownFunc);
						//this.set("countDownFunc", null);
					}
				}
				else if(clock.clockType == "Stopwatch")
				{
					tenths++;
				}
				clock.convertFromTenths(tenths);
			}
		}
		
	},
	*/

	_focusedDraggable:function(e)
	{
	  	// console.log("we tried to drag");
	  	if(this.drags==true){
	        var self=this;
	        e.preventDefault();
			switch(e.detail.state)
			{
	          case 'start':
	            // console.log('START NoWayAreWe Draggin');
	            self._leftprime = parseInt(window.getComputedStyle(self, null).getPropertyValue("left"))-e.detail.x;
	            self._topprime = parseInt(window.getComputedStyle(self, null).getPropertyValue("top"))-e.detail.y;
	            console.log('top distance differenced?' + self._topprime);
	            // }
	            self.changeX=0;
	            self.changeY=0;
	            Polymer.dom.flush();
	            break;
	          case 'track':
	            self.changeX=e.detail.ddx + self.changeX;
	            self.changeY=e.detail.ddy + self.changeY;
	            self.translate3d(self.changeX.toString() + 'px', self.changeY.toString() + 'px', 0);
	            break;
	          case 'end':
	            console.log(self._topprime);
	            self._right = parseInt(window.getComputedStyle(self, null).getPropertyValue("right"))
	            self._bottom = self.getBoundingClientRect().top;
	            self._x= ((self._leftprime + e.detail.x)>=0)?(self._leftprime + e.detail.x): 0;
	            self._y=((self._topprime + e.detail.y)>=0)?Math.ceil(self._topprime + e.detail.y):0;
	            self.translate3d(0, 0, 0);

	            console.log("ENDING", self._x);
	            self.style.left=self._x.toString()+'px';
	            self.style.top=self._y.toString()+'px';
	            console.log('y: ' + e.detail.y);
	            self.dragging=false;
	            Polymer.dom.flush();
	            break;
	        }
	    }
	}

});
</script>
</dom-module>