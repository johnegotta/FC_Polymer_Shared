<dom-module id="fc-top-view-dashboard">
	<!-- CodeMirror -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.css" />

<!-- Firepad -->
<link rel="stylesheet" href="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.css" />
<script src="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.min.js"></script>

<template>
<style is="custom-style">
div.line-number {
	width: 24px;
	line-height: 1.25;
	font-size: 1.1em;
	font-family: merriweather;
	font-weight: 500;
	font-style: italic;
	padding: 6px;
	margin: 6px;
	max-height: 620px;
}
.highlighted {
	background: yellow;
}
#pringles {
	-moz-column-count: 2;
    -moz-column-gap: 40px;
    -webkit-column-count: 2;
    -webkit-column-gap: 40px;
    column-count: 2;
    column-gap: 40px;
}
.text {
	max-width: 620px;
	line-height: 1.25;
	font-size: 1.1em;
	font-family: merriweather;
	font-weight: 500;
	padding: 6px;
	margin: 6px 9px 6px 8px;
	text-indent: 18px;
	max-height: 520px;
}
span.plus {
	font-weight: 700;
	font-style: italic;
	line-height: 1;
	font-size: 1em;
}
br {text-indent: 18px;}
</style>
	<!--<div id="firepad" style="height:400px"></div>-->

	<paper-material elevation="1">
	<!--<fc-splitter-jc orientation="vertical" class="horizontal flex layout container">
	<div class="horizontal layout left-justified flex wrap left" style="border: 12px ridge silver; padding: 15px; margin: 8px; width: calc(99.6vw-64px); height: 60%; overflow: scroll;">
	<div class="horizontal layout left-justified container flex wrap left" style="max-height: 620px; min-height: 420px;">
	<div class="layout vertical line-number dynamic-class">
	<span>lines</span>
	<br>
	<br>
	<br>
	<br>
	<span>5</span>
	<br>
	<br>
	<br>
	<br>
	<span>10</span>
	<br>
	<br>
	<br>
	<br>
	<span>15</span>
	<br>
	<br>
	<br>
	<br>
	<span>20</span>
	<br>
	<br>
	<br>
	<br>
	<span>25</span>
	<br>
	<br>
	<br>
	<br>
	<span>30</span><br>
	<br>
	<br>
	<br>
	<span>35</span>
	<br>
	<br>
	<br>
	<br>
	<span>40</span>
	<br>
	<br>
	<br>
	<br>
	<span>45</span>
	<br>
	<br>
	<br>
	<br>
	<span>50</span>
	<br>
	<br>
	<br>
	<br>
	<span>55</span>
	<br>
	<br>
	<br>
	<br>
	<span>60</span>
	<br>
	<br>
	<br>
	<br>
	<span>65</span>
	<br>
	<br>
	<br>
	<br>
	<span>70</span>
	<br>
	<br>
	<br>
	<br>
	<span>75</span>
	<br>
	<br>
	<br>
	<br>
	<span>80</span>
	<br>
	<br>
	<br>
	<br>
	<span>85</span>
	<br>
	<br>
	<br>
	<br>
	<span>90</span>
	<br>
	<br>
	<br>
	<br>
	<span>95</span>
	<br>
	<br>
	<br>
	<br>
	<span>100</span>
	<br>
	<br>
	<br>
	<br>
	<span>105</span>
	<br>
	<br>
	<br>
	<br>
	<span>110</span>
	<br>
	<br>
	<br>
	<br>
	<span>115</span>
	<br>
	<br>
	<br>
	<br>
	<span>120</span><br>
	<br>
	<br>
	<br>
	<span>125</span>
	<br>
	<br>
	<br>
	<br>
	<span>130</span>
	<br>
	<br>
	<br>
	<br>
	<span>135</span>
	<br>
	<br>
	<br>
	<br>
	<span>140</span>
	
	
	</div>
	<div class="layout vertical flex wrap text left-justified">
	<br> &nbsp&nbsp&nbsp&nbspAkira came directly, breaking all tradition. Was that it? Had he followed form—hade asked his mother to speak to his father to approach a go-between—would Chie have been more receptive? <br> &nbsp&nbsp&nbsp&nbsp He came on a winter’s eve. He pounded on the door while a cold rain beat on the shuttered veranda, so at first Chie thought him only the wind. The maid knew better. Chie heard her soft scuttling footsteps, the creak of the door. Then the maid brought a calling card to the drawing room, for Chie. <br> &nbsp&nbsp&nbsp&nbsp Chie was reluctant to go to her guest; perhaps she was feeling too cozy. She and Naomi were reading at a low table set atop a charcoal brazier. A thick quilt spread over the sides of the table so their legs were tucked inside with the heat. <br> &nbsp&nbsp&nbsp&nbsp “Who is it at this hour, in this weather?” Chie questioned as she picked the name card off the maid’s lacquer tray. <br> &nbsp&nbsp&nbsp&nbsp “Shinoda, Akira. Kobe Dental College,” she read. <br> &nbsp&nbsp&nbsp&nbsp Naomi recognized the name. Chie heard a soft intake of air. <br> &nbsp&nbsp&nbsp&nbsp “I think you should go,” said Naomi. <br> &nbsp&nbsp&nbsp&nbsp Akira was waiting in the entry. He was in his early twenties, slim and serious, wearing the black military-style uniform of a student. As he bowed-his hands hanging straight down, a black cap in one, a yellow oil-paper umbrella in the other—Chie glanced beyond him. In the glistening surface of the courtyard’s rain-drenched paving stones, she saw his reflection like a dark double. <br> &nbsp&nbsp&nbsp&nbsp “Madame,” said Akira, “forgive my disruption, but I come with a matter of urgency.” <br> &nbsp&nbsp&nbsp&nbsp His voice was soft, refined. He straightened and stole a deferential peek at her face. <br> &nbsp&nbsp&nbsp&nbsp In the dim light his eyes shone with sincerity. Chie felt herself starting to like him. 
	<br> &nbsp&nbsp&nbsp&nbsp “Come inside, get out of this nasty night. Surely your business can wait for a moment or two.” <br> &nbsp&nbsp&nbsp&nbsp “I don’t want to trouble you. Normally I would approach you more properly but I’ve received word of a position. I’ve an opportunity to go to America, as dentist for Seattle’s Japanese community.” <br> &nbsp&nbsp&nbsp&nbsp “Congratulations,” Chie said with amusement. “That is an opportunity, I’m sure. But how am I involved?” <br> &nbsp&nbsp&nbsp&nbsp Even noting Naomi’s breathless reaction to the name card, Chie had no idea. Akira’s message, delivered like a formal speech, filled her with maternal amusement. You know how children speak so earnestly, so hurriedly, so endearingly about things that have no importance in an adult’s mind? That’s how she viewed him, as a child. <br> &nbsp&nbsp&nbsp&nbsp It was how she viewed Naomi. Even though Naomi was eighteen and training endlessly in the artsneeded to make a good marriage, Chie had made no effort to find her a husband. Akira blushed. <br> &nbsp&nbsp&nbsp&nbsp “Depending on your response, I may stay in Japan. I’ve come to ask for Naomi’s hand.” <br> &nbsp&nbsp&nbsp&nbsp Suddenly Chie felt the dampness of the night. <br> &nbsp&nbsp&nbsp&nbsp “Does Naomi know anything of your...ambitions?” <br> &nbsp&nbsp&nbsp&nbsp “We have an understanding. Please don’t judge my candidacy by the unseemliness of this proposal. I ask directly because the use of a go-between takes much time. Either method comes down to the same thing: a matter of parental approval. If you give your consent, I become Naomi’s yoshi. We’ll live in the House of Fuji. Without your consent, I must go to America, to secure a new home for my bride.” <br> &nbsp&nbsp&nbsp&nbsp Eager to make his point, he’d been looking her full in the face. Abruptly, his voice turned gentle. <br> &nbsp&nbsp&nbsp&nbsp “I see I’ve startled you. My humble apologies. I’ll take no more of your evening. My address is on my card. If you don’t wish to contact me, I’ll reapproach you in two weeks’ time. Until then, good night.” He bowed and left. Taking her ease, with effortlessgrace, like a cat making off with a fish. <br> &nbsp&nbsp&nbsp&nbsp “Mother?” Chie heard Naomi’s low voice and turned from the door. “He has asked you?” <br> &nbsp&nbsp&nbsp&nbsp The sight of Naomi’s clear eyes, her dark brows gave Chie strength. Maybe his hopes were preposterous. <br> &nbsp&nbsp&nbsp&nbsp “Where did you meet such a fellow?” Chai began. “Imagine! He thinks he can marry the Fuji heir and take her to America all in the snap of his fingers!” <br> &nbsp&nbsp&nbsp&nbsp Chie waited for Naomi’s ripe laughter. Naomi was silent. She stood a full half minute looking straight into Chie’s eyes. Finally, she spoke: <br> &nbsp&nbsp&nbsp&nbsp “Mother.” <br> &nbsp&nbsp&nbsp&nbsp “Yes?” <br> &nbsp&nbsp&nbsp&nbsp “I mean to have him."
	</div>
	</div>
	</div>
	-->
	<div id="dashpad" style="display:none"></div>
	<fc-splitter-jc orientation="horizontal" style="height: 100%;">
		<div class="left vertical layout container" style="padding: 8px; margin: 8px; height: 500px; max-width: 760px; border: 6px ridge silver; overflow-y: scroll;">
			<span id="preface" class="vertical layout plus" style="font-style: italic; padding:0px 16px; margin: 0px 16px;"></span>
			<div  class="horizontal layout left-justified container flex wrap left" style="padding: 0px 8px 8px 8px; margin: 0px 6px 6px 6px;">
			<div id="linenumbers" class="layout vertical line-number dynamic-class">
				<span>line</span>
				<template is="dom-repeat" items="{{lineNums}}">
					<span>{{item}}</span>
				</template>	
			</div>
			<div id="pringles" class="layout horizontal flex wrap text left-justified">
				<article>
				<template is="dom-repeat" items="{{wordArray}}" class="">
					<template is="dom-if" if="{{item.isNewPara}}"><br>&nbsp&nbsp&nbsp&nbsp</template>
					<a contentEditable id="{{index}}" on-tap="highlightWord">{{item.word}}</a>
				</template>
				</article>
		
			</div>
			</div>

	<content class="left horizontal layout container" select="fc-student-intake-form, fc-grid-card-portrait">
	
	
	<!--<fc-grid-card-portrait
	class="layout container wrapper left right" pathone="" style="display: flex; position: relative; left: 10px;"></fc-grid-card-portrait>-->
	
	</content>	
	
	
	</div>
	<div class="right" style="height: 100%; width: 100%;">	
	<content class="right" select="fc-list-two">
	<fc-list-two class="right" inquiry='{{call}}'>
	</fc-list-two>
	</content>

	</div>
	<!--</fc-splitter-jc>-->
	</fc-splitter-jc>
	</paper-material>
</template>
<script>
/*FcTopViewDashboard=*/
Polymer({
	is: "fc-top-view-dashboard", 
	properties: {
	iPath: 'http://www.focusedstaging.com/Fresh_Attempt%20/index-jason.html',
	topClassHidden: {
	type: Boolean, 
	value: true, 
	/*	observe: however you do this Scott,*/
	reflectToAttributes: true,
	notify: true
	},
	bottomLeftClassHidden: {
	type: Boolean, 
	value: true, 
	/*	observe: however you do this Scott,*/
	reflectToAttributes: true,
	notify: true
	}, 
	bottomRightClassHidden: {
	type: Boolean, 
	value: true, 
	/*	observe: however you do this Scott,*/
	reflectToAttributes: true,
	notify: true
	},
	lowerRight: String,
	lowerLeft: String, 
	dimensions: Array,
	firepad: Object,
	wordArray: {
		type: Array,
		value: ["shit", "honky"],
		reflectToAttributes: true,
		notify: true
	},
	reflectToAttributes: true,
	notify: true
	},

	isNewPara: function(elem)
	{
		console.log(elem);
		return true;
	},
	created: function(){
		var preface = "This passage is from Lydia Minatoya, The Strangeness of Beauty. ©1999 by Lydia Minatoya. The setting is Japan in 1920. Chie and her daughter Naomi are members of the House of Fuji, a noble family.";
		var oldText = "<br>&nbsp&nbsp&nbsp&nbspAkira came directly, breaking all tradition. Was that it? Had he followed form—hade asked his mother to speak to his father to approach a go-between—would Chie have been more receptive? <br> &nbsp&nbsp&nbsp&nbsp He came on a winter’s eve. He pounded on the door while a cold rain beat on the shuttered veranda, so at first Chie thought him only the wind. The maid knew better. Chie heard her soft scuttling footsteps, the creak of the door. Then the maid brought a calling card to the drawing room, for Chie. <br> &nbsp&nbsp&nbsp&nbsp Chie was reluctant to go to her guest; perhaps she was feeling too cozy. She and Naomi were reading at a low table set atop a charcoal brazier. A thick quilt spread over the sides of the table so their legs were tucked inside with the heat. <br> &nbsp&nbsp&nbsp&nbsp “Who is it at this hour, in this weather?” Chie questioned as she picked the name card off the maid’s lacquer tray. <br> &nbsp&nbsp&nbsp&nbsp “Shinoda, Akira. Kobe Dental College,” she read. <br> &nbsp&nbsp&nbsp&nbsp Naomi recognized the name. Chie heard a soft intake of air. <br> &nbsp&nbsp&nbsp&nbsp “I think you should go,” said Naomi. <br> &nbsp&nbsp&nbsp&nbsp Akira was waiting in the entry. He was in his early twenties, slim and serious, wearing the black military-style uniform of a student. As he bowed-his hands hanging straight down, a black cap in one, a yellow oil-paper umbrella in the other—Chie glanced beyond him. In the glistening surface of the courtyard’s rain-drenched paving stones, she saw his reflection like a dark double. <br> &nbsp&nbsp&nbsp&nbsp “Madame,” said Akira, “forgive my disruption, but I come with a matter of urgency.” <br> &nbsp&nbsp&nbsp&nbsp His voice was soft, refined. He straightened and stole a deferential peek at her face. <br> &nbsp&nbsp&nbsp&nbsp In the dim light his eyes shone with sincerity. Chie felt herself starting to like him. <br> &nbsp&nbsp&nbsp&nbsp “Come inside, get out of this nasty night. Surely your business can wait for a moment or two.” <br> &nbsp&nbsp&nbsp&nbsp “I don’t want to trouble you. Normally I would approach you more properly but I’ve received word of a position. I’ve an opportunity to go to America, as dentist for Seattle’s Japanese community.” <br> &nbsp&nbsp&nbsp&nbsp “Congratulations,” Chie said with amusement. “That is an opportunity, I’m sure. But how am I involved?” <br> &nbsp&nbsp&nbsp&nbsp Even noting Naomi’s breathless reaction to the name card, Chie had no idea. Akira’s message, delivered like a formal speech, filled her with maternal amusement. You know how children speak so earnestly, so hurriedly, so endearingly about things that have no importance in an adult’s mind? That’s how she viewed him, as a child. <br> &nbsp&nbsp&nbsp&nbsp It was how she viewed Naomi. Even though Naomi was eighteen and training endlessly in the artsneeded to make a good marriage, Chie had made no effort to find her a husband. Akira blushed. <br> &nbsp&nbsp&nbsp&nbsp “Depending on your response, I may stay in Japan. I’ve come to ask for Naomi’s hand.” <br> &nbsp&nbsp&nbsp&nbsp Suddenly Chie felt the dampness of the night. <br> &nbsp&nbsp&nbsp&nbsp “Does Naomi know anything of your...ambitions?” <br> &nbsp&nbsp&nbsp&nbsp “We have an understanding. Please don’t judge my candidacy by the unseemliness of this proposal. I ask directly because the use of a go-between takes much time. Either method comes down to the same thing: a matter of parental approval. If you give your consent, I become Naomi’s yoshi. We’ll live in the House of Fuji. Without your consent, I must go to America, to secure a new home for my bride.” <br> &nbsp&nbsp&nbsp&nbsp Eager to make his point, he’d been looking her full in the face. Abruptly, his voice turned gentle. <br> &nbsp&nbsp&nbsp&nbsp “I see I’ve startled you. My humble apologies. I’ll take no more of your evening. My address is on my card. If you don’t wish to contact me, I’ll reapproach you in two weeks’ time. Until then, good night.” He bowed and left. Taking her ease, with effortlessgrace, like a cat making off with a fish. <br> &nbsp&nbsp&nbsp&nbsp “Mother?” Chie heard Naomi’s low voice and turned from the door. “He has asked you?” <br> &nbsp&nbsp&nbsp&nbsp The sight of Naomi’s clear eyes, her dark brows gave Chie strength. Maybe his hopes were preposterous. <br> &nbsp&nbsp&nbsp&nbsp “Where did you meet such a fellow?” Chai began. “Imagine! He thinks he can marry the Fuji heir and take her to America all in the snap of his fingers!” <br> &nbsp&nbsp&nbsp&nbsp Chie waited for Naomi’s ripe laughter. Naomi was silent. She stood a full half minute looking straight into Chie’s eyes. Finally, she spoke: <br> &nbsp&nbsp&nbsp&nbsp “Mother.” <br> &nbsp&nbsp&nbsp&nbsp “Yes?” <br> &nbsp&nbsp&nbsp&nbsp “I mean to have him.";
	},
	ready: function(){
/*var firepadRef = new Firebase('https://focusedstudents.firebaseio.com/firepad');
 var codeMirror = CodeMirror(this.$.firepad, { lineWrapping: true });
 var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror,
 { richTextShortcuts: true, richTextToolbar: true, defaultText: 'Hello, World!' });*/
	},

	highlightWord: function(e)
	{
		//console.log(e.model.item);
		var highlighted = (e.target.className.indexOf("highlighted") > -1);
		var classString = e.target.className;
		if(!highlighted)
		{
			classString += " highlighted";
			e.target.setAttribute("class", classString);
		}
		else
		{
			classString = classString.replace(" highlighted", "");
			e.target.className = classString;
		}
	},
	attached: function(){
		var firepadRef = new Firebase('https://focusedstudents.firebaseio.com/firepad');
  		var codeMirror = CodeMirror(this.$.dashpad, { lineWrapping: true });
  		this.firepad = Firepad.fromCodeMirror(firepadRef, codeMirror,
      		{ richTextShortcuts: true, richTextToolbar: true, defaultText: 'Hello, World!' });
		//go to firepad to get text
		//var da = document.querySelector("#dataAdmin");
		//this.push("wordArray", "monkey");
		var self = this;
		this.firepad.on("ready", function() {
			var text = self.firepad.getText();
        		console.log(text);
        		this.paragraphArray = text.split(/\\n/);
        		var wordArray = text.split(/\s/);
        		var numWords = wordArray.length;

        		this.wordArray = text.split(/\s/);
        		var numParagraphs = paragraphArray.length;
        		var i =0;
        		var htmlText = "<article>";
        		var wordIndex = 0;
        		for(i=1; i<numParagraphs; i++)
        		{
        			//htmlText += "<p>";
        			var wArray = paragraphArray[i].split(/\s/);
        			numWords = wArray.length;
        			var j = 0;
        			
	        			htmlText += "<span>&nbsp&nbsp&nbsp&nbsp</span>";
     			
        			for(j=0; j < numWords; j++)
        			{
        				var newP = (j==0);
        				self.push("wordArray", {"word": wArray[j], "isNewPara": newP} );
        				htmlText += ("<span id=w" + wordIndex + ">")
        				htmlText += wArray[j];
        				htmlText += " </span>";
        				wordIndex++;
        			}
        			//self.push("wordArray", "\r\n");
        			htmlText += "<br>";
        			//htmlText += "</p>";
        		}
        		htmlText += "</article>";
        		//self.wordArray = text.split(/\s/);
        		console.log(self.wordArray);
        		var textLen = text.length;
        		var preface = text.split("\\n")[0];
        		var prefLen = preface.length;
        		text = text.slice(prefLen, textLen-1);
        		self.$.preface.innerHTML = preface;
        		//console.log(preface);
        		text = text.replace(/\\n/g, "<br>&nbsp&nbsp&nbsp&nbsp");

        		//self.$.pringles.innerHTML = htmlText;
        		//self.$.pringles.innerHTML = "<pre id='springles'>" + text + "</pre>";
        		//console.log(document.querySelector("#springles"));
        		var height = self.$.pringles.scrollHeight;
        		console.log(height);
        		/*
        		var lineHeight = parseInt(document.querySelector("#w37").getBoundingClientRect().height);
        		console.log(lineHeight);
        		var numLines = height / lineHeight;
        		console.log("numLines = " + numLines);
        		var lineNumbersHtml = "<span>lines</span>";
			for(i=1; i <= numLines; i++)
        		{
        			lineNumbersHtml += "<span>";
        			if(i % 5 == 0)
        			{
        				lineNumbersHtml += i;
        			}
        			else
        			{
        				lineNumbersHtml += "&nbsp";
        			}
        			lineNumbersHtml += "</span>";
        		}
        		*/
        		//self.$.linenumbers.innerHTML = lineNumbersHtml;

		});
        	
	},
	attributeChanged: function(){
	},
	destroyed: function(){
	
	},
	timer: function(){
	}
});
</script>
</dom-module>