<dom-module id="fc-model-test-result-populator">
	<template>
		<style></style>
		<firebase-document id="wholeFB" location="focusedstaging1.firebaseio.com" data="{{pickle}}" on-firebase-child-added="showTime"></firebase-document>
		<firebase-collection id="test_results_loc" data="{{test_results}}" location="focusedstaging1.firebaseio.com/test_results">
		</firebase-collection>
		<firebase-collection id="test_results_loc" data="{{stacy_results}}" location="focusedstaging1.firebaseio.com/students/agjasga1234/test_results">
		</firebase-collection>
		<paper-button id="startmakingButton" on-tap="makeUpResults">Make Up Results</paper-button>
		<div id="stacyResults" style="height:1200px;width:700px;border:1px solid black;overflow:scroll">
		<ul id="stacyResultsUL"></ul>
			<!--<template is="dom-repeat" items="{{keysToGet}}">
				<fc-model-single-sub-thing crap="{{pickle.test_results.item}}"></fc-model-single-sub-thing>
			</template>-->
		</div>
	</template>
	<script>
		Polymer({
			is: "fc-model-test-result-populator",
			properties: {
				keysToGet: {
					type: Array,
					value: []
				}
			},
			makeUpResults: function(){
				var student_fb_key = "";
				var SAT_2400_test = "";
				var total_score = 0;
				var math_score = 0;
				var reading_score = 0;
				var writing_score = 0;
				var fives_counter = 1;
				for(var i = 0; i < 300; i++){
					math_score = this.randomSectionScore();
					reading_score = this.randomSectionScore();
					writing_score = this.randomSectionScore();
					total_score = math_score + reading_score + writing_score;
					SAT_2400_test = "test_" + fives_counter.toString();
					switch(i%5){
						case 0: {
							if(i!=0){fives_counter++;}
							student_fb_key = "agjasga1234";
							break;
						}
						case 1:{
							student_fb_key = "akjsghdjk347625";
							break;
						}
						case 2:{
							student_fb_key = "jhasgjd51426";
							break;
						}
						case 3:{
							student_fb_key = "jkdshi283794";
							break;
						}
						case 4:{
							student_fb_key = "jkhsdwhuh345";
							break;
						}
					}
					var obj_to_add = {
						"math_score": math_score,
						"reading_score": reading_score,
						"writing_score": writing_score,
						"total_score": total_score,
						"student": student_fb_key,
						"SAT_2400_test": SAT_2400_test
					};
					var new_result = this.$.test_results_loc.add(obj_to_add);
					var new_result_key = new_result.key();
					//console.log(this.pickle['students'][student_fb_key]);
					/*this.$.wholeFB.location = 'focusedstaging1.firebaseio.com/students/' + student_fb_key + '/test_results';
					var obj_to_add = {};
					obj_to_add[new_result_key] = true;
					this.pickle = obj_to_add;*/
				}
				this.$.wholeFB.location = 'focusedstaging1.firebaseio.com';
			},
			randomSectionScore: function(){
				return Math.floor(Math.random() * ((800-200)+1) + 200);
			},
			sayHi: function(e){
				this.keysToGet = Object.keys(e.detail.val());
				this.ahhh = e.detail.ref();

			},
			showTime: function(e){
				var ullabel = document.createElement('h2');
				var ulToAdd = document.createElement('ul');
				var everything = e.detail.childSnapshot.val();

				var ulid = e.detail.childSnapshot.key();
				ullabel.innerHTML = ulid;
				var everything_keys = Object.keys(everything);
				ulToAdd.id = ulid;

				var everything_key_count = everything_keys.length;
				for( var i = 0; i < everything_key_count; i++){
					var liToAdd = document.createElement('li');
					var keyValue = JSON.stringify(everything[everything_keys[i]]);
					var keyToKeyValue = everything_keys[i];

					liToAdd.innerHTML = keyToKeyValue + " " + keyValue;
					ulToAdd.appendChild(liToAdd);
				}
				//Polymer.dom(this.$.stacyResultsUL).appendChild(liToAdd);
				Polymer.dom(this.$.stacyResultsUL).appendChild(ullabel);
				Polymer.dom(this.$.stacyResultsUL).appendChild(ulToAdd);
			}
		});
	</script>
</dom-module>