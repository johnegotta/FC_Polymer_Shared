<dom-module id="fc-sample-highlighting-paragraph">
  <template>
    <p>
    <span id="pickle" on-mouseup="myScript">This</span>
    <span id="nickel" on-mouseup="myScript"> is</span>
    <span id="tickle" on-mouseup="myScript"> a</span>
    <span id="dickle" on-mouseup="myScript"> paragraph</span>
    <span id="hickle" on-mouseup="myScript"> in</span>
    <span id="gickle" on-mouseup="myScript"> which</span>
    <span id="fickle" on-mouseup="myScript"> you</span>
    <span id="sickle" on-mouseup="myScript"> can</span>
    <span id="wickle" on-mouseup="myScript"> highlight</span>
    <span id="jickle" on-mouseup="myScript"> text</span>
    <span id="kickle" on-mouseup="myScript">.</span>

  </p>
  </template>
  <script>
    Polymer({
      is: "fc-sample-highlighting-paragraph",

//NEED TO DO SOMETHING WITH CLASSES OR OPACITY OF HIGHLIGHTS COMPOUNDS ON MULTI HIGHLIGHTED WORDS

      myScript: function(e){
        if (window.getSelection()) { // non-IE
          userSelection = this.shadowRoot.getSelection();
          //console.log(userSelection);
          rangeObject = userSelection.getRangeAt(0);
          //console.log(rangeObject);
          if (rangeObject.startContainer == rangeObject.endContainer && rangeObject.startOffset < rangeObject.endOffset) {
            rangeObject.startContainer.parentNode.style.background = "yellow";
          } else if(rangeObject.startContainer != rangeObject.endContainer){
            this.getAllBetween(
                    rangeObject.startContainer.parentNode,
                    rangeObject.endContainer.parentNode);
          }
        }
      },

      getAllBetween: function(firstEl,lastEl) {
        for (var sibling = firstEl; sibling && sibling.previousSibling !== lastEl; sibling = sibling.nextSibling ) {
          if ( sibling.nodeType === 1) {
            sibling.style.background = "yellow";
          }
        }
      }


    });
  </script>
</dom-module>
