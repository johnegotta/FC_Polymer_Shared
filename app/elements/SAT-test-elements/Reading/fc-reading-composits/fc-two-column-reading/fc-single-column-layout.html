<dom-module id="fc-single-column-layout">
<template>
<style>
div.line-number {
			width: 28px;
			line-height: 1.2;
			font-size: 14pt;
			font-size: 1.25em;
			font-family: merriweather;
			font-weight: 500;
			font-style: italic;
			padding: 6px 0px 6px 0px;
			margin: 6px 0px 6px 0px;
			
		}
		div.columnContainer{
			overflow-y: scroll;
		}
		
		.highlighted {
			background: yellow;
		}
		
		div.text {
			line-height: 1.2;
			font-size: 14pt;
			font-size: 1.25em;
			font-family: merriweather;
			font-weight: 500;
			padding: 6px;
			margin: 6px 0px 6px 0px;
			min-height: 720px !important;
			display: flex;
			min-width: 260px !important;
			max-width: 680px !important;	
		}
</style>
<div class="layout horizontal container">

					 		<div id="linenumbersA1" class="layout vertical line-number">
					 		<div class="line-numbers" id="linesA">Lines</div>
					 			<template is="dom-repeat" items="{{lineNumberArray}}" filter="{{_numberRowsFilter(numLines,shown)}}">
     								<span hidden="{{!item.show}}" id="oneOneNumbers_{{item.order}}">{{item.order}}</span><span hidden="{{item.show}}">&nbsp</span>
     							
    							</template>
					 		</div>
			<!--passage-1-column-1 container-->
					 		<div id="colUno" class="layout horizontal flex wrap text">
					 		<article id="textColumnOne">
					 	    	<template is="dom-repeat" items="{{theContent}}">
 									<template is="dom-if" if="{{item.newPara}}">
 										<br><span>&nbsp&nbsp&nbsp&nbsp</span>
 									</template>
 									<a id="oneOneWords_{{item.order}}" hidden="{{!columnOneShow}}">{{item.word}}</a>
								</template>
									<br class="line-numbers">
									<hr>
								<div class="right-justified line-numbers" style="float:right; text-align: right;" id="singleColumnBounder"> Focused Coaching (c) 2016</div>
							</article>
					 		</div>
					 	</div>					
</template>
<script>
Polymer({
	is: 'fc-single-column-layout',
		observers: ['arrayWatcher(theContent.splices)'],
		properties: {

		theContent:{
			type: Array, 
			value: [],
			notify: true, 
			reflectToAttibutes: true 
		},
		lastWordIndex:{
			type: Number,
			notify: true,
		},
		numLines: {
			type: Number,
			value: 0,
			notify: true
		},
		
		lineNumberArray:{
			type: Array,
			value: function(){for(var i=1; i <= 180; i++)
			{	this.lineNumberArray = new Array(180);
				j=	i % 5 ? false: true;
				this.push("lineNumberArray", {'number': i, 'show': j});
				}
			},
			notify: true

		},
		
		lastRow:{
			type: Number,
			value: function(){
			return 111;
			},
			notify: true
		},
		
		shown:{
			type: Boolean,
			value: true,
			notify: true,
			reflectToAttributes: true
		}

	},


ready: function(){
	console.log("READY SINGLE COLUMN");
		this.lastRow=Math.floor(this.lastWordIndex/11);
		this.notifyResize();
	},

attached: function(){
	

},

arrayWatcher: function(miki){
	console.log(this.theContent);
},

notifyResize:function(){
	this.numberOneColumn(this.lastRow);

},

numberOneColumn: function(RowsEstimate){
		 var bottom_of_first_word = this.$.linesA.getBoundingClientRect().bottom;
		 var last_word = this.$.singleColumnBounder;
		 var last_word_rect =  last_word.getBoundingClientRect();
		 var line_height = this.$.linesA.clientHeight;
		 var delta = last_word_rect.bottom - bottom_of_first_word;
		 this.numLines = Math.floor(delta/line_height) - 2;
		},
_numberRowsFilter: function(numLines,shown){
 		
 			return (item) =>{
 				return (item.order <= numLines);
 			};

}	
});

</script>
</dom-module>


		


