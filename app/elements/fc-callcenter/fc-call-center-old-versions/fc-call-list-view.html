<dom-module id="fc-list-view">
  <template>
    <style>
      :host {
        @apply(--layout-vertical);
        max-height: 1500px;
        height: 100%;
        width: 100%;
        visibility: visible;
      }
      .main {
        @apply(--layout-flex);
        @apply(--layout-scroll);
        @apply(--layout-self-stretch)
        @apply(--shadow-elevation-8dp);
      }
      iron-icon {
        color: var(--google-blue-500);

      }
      .elevated{
              z-index: 45;
              margin-right: 124px;
              box-shadow: 12px 23px 9px 8px #afafaf;
              margin-top: 4px;
              margin-bottom: 22px;}
     
     
      
      paper-input{ margin: 0px 3px;}

    </style>
    <!-- <fc-input-prime class="elevated " value="{{searchVal}}" label="CALL SEARCH"></fc-input-prime> -->

<firebase-collection data="{{calls}}" id="FBCallReads" limit-to="19" location="https://focusedstaging1.firebaseio.com/calls"></firebase-collection>

 <div class="main">
    <template is="dom-repeat" filter="{{_callFilter(searchVal)}}" items="{{calls}}">
   
     <fc-call-item data="{{item}}">
 
<span> <iron-icon icon="icons:clockTimer"></iron-icon></span>

     </fc-call-item>
      
        </template>
        </div>


  </template>



<script>
  Polymer({
    is: 'fc-list-view',
    behaviors: [
      Polymer.NeonAnimatableBehavior
    ],

    listeners: {"search-val-change":"_searchCalls()",
      'click': '_onClick'
    },
   
    properties: {
      dataItems: {
        type: Array,
        notify: true, 
        reflectToAttribute: true
      },
      data: {
        type: Array,
        notify: true
        }, 

      animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this.$.button
            }],
            'exit': [{
              name: 'fade-out-animation',
              node: this.$.button
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this
            }]
          };
        }
      },

    searchValues: {
          type: Object,
          value: {
              studentFirstName: "",
              studentLastName:"",
              parent1LastName:"",
              parent1FirstName:"",
              parent2FirstName:"",
              parent2LastName:"",
              parent1Email:"", 
              parent2Email:"",
              studentEmail:"",
              studentTelephone:"",
              parent1Telephone: "",
              parent2Telephone: "",
              coach:"",
              fcid:""
          },
          notify: true, 
          reflectToAttributes: true
        }
      },  
      _scott: function(e){
  console.log(e.model.pastinquirer);
  this.pastinquirer = e.model.transfsferpastinquirer;
  // configure the page animation
  this.sharedElements = {
    'hero': e.target,
  };
  this.fire('item-click', {caller: this.searchValues});
    },

_onClick: function(event) {
  var target = event.target;
  
  if (target == this.$.fcpapertoolbar || target==this.$.fcpapertoolbar.child)
  {
    target = null;
  } 
  else {
    target=target.parentNode;
    this.pastinquirer=target.details
   
    
    // configure the page animation
    this.sharedElements = {
      'hero': target,
    };
    this.fire('item-click', {
      item: target,
    });
  }
  },
   _callFilter: function(searchValues){
  console.log(inquiry);
    return function(item){
      if( (item.parentFirstName? (item.parentFirstName.indexOf(data.parentFirstName)> -1):false) && (item.phone? (item.phone.indexOf(inquiry.phone)>-1): true) && (item.lastname? (item.lastname.indexOf(inquiry.lastname)>-1):false) && (item.relatedstudent? (item.relatedstudent.indexOf(inquiry.studentlastname) > -1): false) && (item.relatedstudent? (item.relatedstudent.indexOf(inquiry.studentfirstname) > -1): false) ) return true;
      } 
    }, 


      _callFilterTwo: function(searcValues){
        
        return function(item){
          if(!searchfields) {
            return true;
          }
          //start out with true result & falsify if any non blank match fails
          var result = true;
          console.log(searchfields);
          console.log(item);
          if(searchfields.firstname && searchfields.firstname != "")
          {
            //user entered a value in first name search
            if(item.studentFirstName)            
            {
              result &= (item.studentFirstName.indexOf(searchfields.studentFirstName) > -1);
            }
            else return false; // first name searched but none in record
          }           

          if(searchfields.lastname && searchfields.lastname != "")
          {
            //user entered a value in last name search
            if(item.lastname)           
            {
              result &= (item.lastname.indexOf(searchfields.lastname) > -1);
            }
            else return false; // last name searched but none in record
          }
          if(searchfields.email && searchfields.email != "")
          {
            //user entered a value in email search
            if(item.email)            
            {
              result &= (item.email.indexOf(searchfields.email) > -1);
            }
            else return false; //user entered email search but none in record
          }
          if(searchfields.message && searchfields.message != "")
          {
            //user entered a value in first name search
            if(item.message)            
            {
              result &= (item.message.indexOf(searchfields.message) > -1);
            }
            else return false; // first name searched but none in record
          }           
          if(searchfields.phone && searchfields.phone != "")
          {
            //user entered value in phone search
            if(item.phone)            
            {
              result &= (item.phone.indexOf(searchfields.phone) > -1);
            }
            else return false; //user entered phone search but none in record
          }
          console.log("callFilter returning " + result);
          return result;
        }
      },

    _onClick: function(event) {
      console.log(event);
      var target = event.target;
      while (target !== this && !target._templateInstance) {
        target = target.parentNode;
      }
      console.log(target);
      // configure the page animation
      this.sharedElements = {
        'hero': target,
      };
      this.fire('call-click', {
        item: target.data
      });
    },
  }); 
</script>
</dom-module>
<!-- <fc-list-item style="width:100%; height: 64px;">

<content></content>
questions in an input bound to database processed through a reader

</fc-list-item> -->