<dom-module id="fc-calendar-animee">
<style>
  .card{
  	border-top: 1px solid silver;
  	text-align: center; 
  	width:calc(100%/7.4); 
  	margin: auto;
  	margin-bottom: 6px; 
  	margin-top: 4px; 
  	height: 97%;
  } 
</style>
<template>

	<div class="flex layout vertical" style="padding:0x; margin: 14px; margin-bottom: 24px;">
		<paper-material class="vertical flex layout center" style="max-height: 110px; min-height: 85px;min-width: 601px; max-width: 98vw; background: #aecdfd;">
			<div class="horizontal layout flex center-justified" style="width: 100%; [[_computePlacementTwo(isSecond)]]">
				<section class="horizontal layout flex-3 around-justified" style$="text-align: center; font-size: 36px; font-family: merriweather;">
						<section  style=" width:24px; height: 24px; padding: 6px; border: 6px solid white; border-radius: 180px; background: #008; color: white;" on-tap="_backOneMonth">
						<iron-icon icon="icons:arrow-back" style$="margin-bottom: 24px;"></iron-icon>
						</section>
						[[_computeCalendarHeading(calendarType, eventType, month, year)]]
						<section  style=" width:24px; height: 24px; padding: 6px; border: 6px solid white; border-radius: 180px; background: #008; color: white; cursor: pointer;"on-tap="_forwardOneMonth"><iron-icon icon="icons:arrow-forward"  style="margin-bottom: 24px;">
						</iron-icon>
						</section>
				</section>
			</div>
			<div class="horizontal flex layout wrap self-stretch" style="background: snow; width: 100%; min-width: 740px; margin-left: 2px;">
				<template is="dom-repeat" class="horizontal layout nowrap" items="{{days}}">
					<paper-material style="border: 2px solid white;text-align: center; padding:1px; width:calc(100%/7.8)!important; min-width:98px; font-size: 18px; font-weight: 600; margin: auto; margin-bottom: 6px; background: white;">
					{{item}}
					</paper-material>
				</template>
			</div>
		</paper-material>
		<div class="vertical layout" style="min-width: 580px!important; max-width: 98vw; background: white; border: 1px double red; height: 94%; width: 100%; overflow-y: scroll; min-height: 600px; padding-bottom: 20px;">
			<section class="horizontal flex layout wrap self-stretch" style="width: 100%; max-height: 40vh; overflow-y:scroll; margin-bottom: 80px;">
				<template is="dom-repeat" class="horizontal layout wrap"  items="{{displayedMonth}}">
					 
	      			<fc-date-card hidden$=[[isNarrow]] ptestarr="{{ptestArray}}" class$="[[computeHeaderColor(item)]] card" day="[[item]]" draggable="true" on-dragstart="trackstart" is-mini="true" data="{{item}}">
	      			 <fc-event-list event-array="{{eventArray}}" day-stamp="[[computeDayStamp(item)]]">


	      			</fc-event-list>
	      			</fc-date-card>
				</template>
			</section>
		</div>
	</div>
</template>
<script>

FcCalendarAnimee=Polymer({
	is: "fc-calendar-animee",
	behaviors:[
				Polymer.PaperInputBehavior,
			 	Polymer.IronFormElementBehavior,
				FCBehaviors.FcCalendarBehaviorPrime,
				Polymer.NeonSharedElementAnimatableBehavior
				],
	properties: {
		ptestArray:{
			type: Array,
			value: [],
			notify: true,
			reflectToAttribute: true
		},
		calendarType:{
			type: Object,
			notify: true,
			reflectToAttribute: true
		},

		inputValue:{
				type: String,
				notify: true
		},
		isSecond:{
			type: Boolean,
			value: function(){return false;},
			notify: true
		},
		myear: {
			value: "2016",
			notify: true
		},
		holidayList:{
			type: Object,
			value: {},
			notify: true,
		},
		isNarrow:{
			type: Boolean,
			value: function(){return false;},
			notify: true
		},
		value: {
			type: String,
			notify: true
		},
		dayArray:{
			type: Array,
			computed:"_computeDayArray(displayedMonth, eventDetails)",
			notify: true
		},
		eventDetails: {
			type: Object,
			notify: true 
		},
		occurance: {
				type: String,
				notify: true
		},
		days:{
			type: Array,
			value: function()
			{
					return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
			},
			notify: true
		},
		day:{
			type: Date,
			notify: true
		},
		dataFcid:{
				type: Object, //this should be an object with methods backwards and forwards
				notify: true
			}
	  
	},

  trackstart: function(e){
  	var day = e.model.item;
  	console.log(day);
  	day = JSON.stringify(day);
  	e.dataTransfer.setData("fcdata", day);
  	//e.dataTransfer.setData("fcgooddate", this.computePrettyDay(day));
  	//console.log("I am a track star", e, e.detail, e.model.item);

  },
  handleResponse: function(argHolidays){
  	console.log(argHolidays);

  },
  _computePlacementTwo: function(isSecond){
  	var returnVal = (isSecond==true)? "position: fixed; top:24px;left: 96px; color: white;": "";
  	return returnVal;


  },

  computePracticeTestDay: function(ptestArray, item){
  	var counter = ptestArray.length;
        var holder=[];
        var i=0;
        for(i=0;i<counter;i++)
        {
        	console.log(ptestArray[i]);
          if(item.toLocaleString() == ptestArray[i].toLocaleString())
            { 
             return "Practice Test: " + ptestArray[i].toDateString();
            }
        }
      },


  _computeCalendarHeading: function(calendarType,month, year)
  {





  },
  computeDayStamp: function(date)
  {
        if(!date){return 0;}
        // var todayDate = new Date(date);
        var retVal=date.dayStamp();
        return retVal;



  },
    

     
	attached: function(){
		var one = new Date(2016, 3, 4);
		var two = new Date(2016, 7, 11);
		 this.calendarCreator(one, two , "days");
		},
	
computePrettyDay: function(day)
 	{
  		var result = day.toDateString();
  		
  		return result;
 	},

computeHeaderColor: function(day)
 	{
  		var numDays = this.displayedMonth.length;
  		var lastDay = this.displayedMonth[numDays -1];
  		var result = (day.getMonth() == lastDay.getMonth()) ? "blue": "pink";
  		//console.log()
  		return result;
 	},
});
</script>
</dom-module>