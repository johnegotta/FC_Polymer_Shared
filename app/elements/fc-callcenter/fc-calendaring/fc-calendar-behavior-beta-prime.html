<script>
"use strict";

function calendarMaker(start, end, units)
{



}
Date.prototype.dayStamp= function()
{
 	var year= this.getFullYear(); 
	var month= this.getMonth();
	var day = this.getDate();
    var dayStamp= Date.UTC(year, month, day);
    return dayStamp;
}	
function courseFcidGenerator(testDate, coachFcid, location, meetingDays, practiceTestDay, startTime, endTime, eventDateArray){
	var len =eventDateArray.length;
	var weekdays="";
	var mdays= meetingDays.replace(/\s/g,'');
	var arr=mdays.split(',');
	var len = arr.length;
	for(var i=0;i<len; i++){
	weekdays += arr[i][2];
	}
	startTime=startTime.replace(":", "");
	endTime=endTime.replace(":","");
	//console.log(endTime);
	var fcid= dayStamp(testDate)+"_"+coachFcid+location+startTime+weekdays+endTime+"_"+len.toString()+practiceTestDay;
	//console.log(fcid);
	return fcid;
}
function durationTime(timeOne, timeTwo){
	var startHrs = stringTime(timeOne);
	var endHrs = stringTime(timeTwo);
	var tot=endHrs-startHrs;
	tot=Math.round(tot);
	return tot;	
}

function costGenerator(numberOfHours)
{
	var cost = (numberOfHours<50)?numberOfHours*60:(numberOfHours<75&&numberOfHours>50)?numberOfHours*55:numberOfHours*50;
	return cost;
	
}
function stringTime(time)
{
	var start = parseInt(time);

	if(time){
	var len = time.length;
	time=time.toString();
	var ampm = (start!==12 && (time.charAt(len-2)=="P"||time.charAt(len-2)=="p"))?12: 0;
	ampm=parseInt(ampm);
	var hoursStart = ampm+start;

	var minStart =(parseInt(time.charAt(len-4))*10)+parseInt(time.charAt(len-3));
	var minHundreds =minStart/60;
	var tot=hoursStart +minHundreds;

	return tot;
	}
}

function stringTimeToDateTime(time, date)
{
	
	//console.log(start);
	var len = time.length;
	time=time.toString();
	var start = parseInt(time);
	var ampm = (start!==12 && (time.charAt(len-2)=="P" ||time.charAt(len-2)=="p" ))?12: 0;
	ampm=parseInt(ampm);
	var hoursStart = ampm+start;
	//console.log(hoursStart, ampm, start);
	var minStart =(parseInt(time.charAt(len-4))*10)+parseInt(time.charAt(len-3));
	var d=new Date(date)
	d.setHours(hoursStart, minStart);
	return d.getTime();
}

/* Modifications to Date prototype*/
Date.prototype.getFullMonth = function()
{
	var dat = new Date(this.valueOf());
	var monArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	return monArray[dat.getMonth()];
}

Date.prototype.addDays = function(days) {
       var dat = new Date(this.valueOf())
       dat.setDate(dat.getDate() + days);
       return dat;
}

/* truncates hours, minutes, seconds and reports timestamp of beginning of day*/
Date.prototype.dayStamp= function()
{
 	var year= this.getFullYear(); 
	var month= this.getMonth();
	var day = this.getDate();
    var dayStamp= Date.UTC(year, month, day);
    return dayStamp;
}	

function getDates(startDate, stopDate)
{
      var dateArray = new Array();
      var currentDate = startDate;
      while (currentDate <= stopDate)
      {
        dateArray.push(currentDate)
        currentDate = currentDate.addDays(1);
      }
      return dateArray;
}

function shortDayLabel(argDay, numChars)
{	
	var fullDaysArray=["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"]; 
	var shortDaysArray = ["Su","M","Tu","W","Th","F","Sa"];
	var singlesArray = ["M", "W", "F"];
	var dayBlocks=["M|W|F","Tu|Th", "M|W"];
 	var md = argDay
	if(numChars>2)
	{
	md=md.slice(0,numChars);
	return md;
	}
	else
	{
		var letters = md.slice(0,2);
		var lilLetters=md.slice(0,1);
		if(shortDaysArray.indexOf(letters)!==-1)
			{
				var letterIndex = singlesArray.indexOf(lilLetters);
				return singlesArray[letterIndex];
			}
		else {var retVal= shortDaysArray.indexOf(letters);
			//console.log(shortDaysArray[retVal]);
				return shortDaysArray[retVal];
			}
	}
}
function shortDaysLabel(argDays, numChars, labelArray)
{	var retArray=[];
	var label;
	var counter =argDays.length;
	for(var i=0;i<counter; i++)
	{
		if(labelArray){
			var shortdaylabeltopush = shortDayLabel(argDays[i], numChars);
			retArray.push(shortdaylabeltopush);

		}
		else{
			var shortdaylabeltopush = shortDayLabel(argDays[i], numChars);
			label=(i==counter-1)?shortdaylabeltopush:shortdaylabeltopush + "|";
			label+=label;
			console.log(label); 

		}
	}
	var retVal=(labelArray)?retArray:label;
	return retVal;

}

function getFutureTestDates(number)
	{	var retArray =[];
		var counterTwo=0;
		var d=new Date();
		d.setDate(d.getDate(d +7));
		var allTestDates=[];
		allTestDates=[[2016, 5, 7],[2016, 6, 4],[2016, 8, 6],[2016,10,1],[2016,11,5],[2016,12,3],[2017,1,28],[2017,3,11],[2017, 5, 6], [2017, 6, 3],[2017, 8, 26],[2017, 10, 7],[2017,11,4],[2017, 12, 2],[2018,3, 10],[2018, 5, 5], [2018, 6, 2], [2018, 8, 25], [2018, 10, 6],[2018,11,3],[2018,12,1],[2019,3, 9],[2019,5,4],[2019, 6, 1]];
		var counter = allTestDates.length;
		var i = 0;
		for (i = 0; i < counter; i++)
		{
			var testDay = new Date(allTestDates[i]);
			//console.log(d.toLocaleString, testDate.toLocaleString);
			if(number>1)
			{ 	if(i<number && d<testDay)
				{
					retArray.push(testDay);
				}
				else if(retArray.length>0)
				{
					return retArray;
				}
				else 
				{	alert("your test getter is busted");
					return "NO AVAILABLE TEST DATES";
				}
			}
			else if(testDay){
				
				return testDay;
				}
			else
				{	alert("your test getter is busted");
					return "NO AVAILABLE TEST DATES";
				}
		}
	
	}

function getColor(){
	var rndmcolor= ["lightskyblue","orange", "wheat", "oldlace", "palegoldenrod", "papayawhip","peachpuff","mistyrose","red", "aliceblue", "lemonchiffon", "khaki", "lightgoldenrod", "honeydew", "thistle","lavenderblush","lavender","slategrey", "ghostwhite", "mint"];	
						  var index= Math.ceil((Math.random())*20);
						  return rndmcolor[index];
			}


function randomSixty(){
	var p  = Math.random();
	var r = Math.floor(p*59);
	r =(r<10)?"0"+r.toString(): r.toString();
	return r;
}

function dayAbbreviationsToDays(argAbbrev)
{
	argAbbrev = argAbbrev.toLowerCase();
	if(argAbbrev.charAt(0)==="m"){return "Monday";}
	else if(argAbbrev.charAt(0)==="w"){return "Wednesday";}
	else if(argAbbrev.charAt(0)==="f"){return "Friday";}
	else if(argAbbrev.charAt(0)==="s" && argAbbrev.charAt(1)==="u"){return "Sunday";}
	else if(argAbbrev.charAt(0)==="s" && argAbbrev.charAt(1)==="a"){return "Saturday";}
	else if(argAbbrev.charAt(0)==="t" && argAbbrev.charAt(1)==="u"){return "Tuesday";}
	else if(argAbbrev.charAt(0)==="t" && argAbbrev.charAt(1)==="h"){return "Thursday";}
}
function stacTime(startTime, endTime, date){
	var beginning= stringTimeToDateTime(startTime, date);
	var ending=stringTimeToDateTime(endTime, date);
}
class FcPerson
{
	constructor(argPerson, self)
	{

		this.build(rgPerson.firstName, argPerson.lastName, argPerson.telephoneNumber,argPerson.email,argPerson.addressLine1,argPerson.addressLine2,argPerson.bio,argPerson.location,argPerson.photograph, argPerson.fullName, self)
	}
	build(firstName, lastName, telephoneNumber,email,addressLine1,addressLine2,bio,location,photograph, fullName, self)
	{
		if(fullName){
			let arr=this.fullName.split(" ");
			console.log(arr[0], arr[1], arr[2]);
		this.firstName= arr[0];
		this.lastName=arr[1];
		}
		else{
			this.firstName=firstName || "ERROR";//write fucking try catch error messaging
			this.lastName=lastname || "ERROR";
			this.fullName=firstName + " " + lastName;
		}
		//var fcidCounter=set fcidCounter(fullName);
		this.fcidCounter ="00001";
		this.telephoneNumber= telephoneNumber || "ERROR";
		this.email = email || "ERROR";
		this.addressLine1= addressLine1 || "";
		this.addressLine2= addressLine2 || "";
		this.fcid=this.lastName+this.firstName+"_"+this.fcidCounter;
		this.bio=bio || "";
		this.location= location || "704 Ginesi Dr. Morganville, New Jersey 07754";
		this.photograph= photograph || "no photo";
		this.timestamp=new Date();
	}
};
class FcCoach
{
	constructor(argCoach, self)
	{
		this.build(argCoach.fullName, self)
	}
	static getFirebaseLocation(argFcid)
	{
		if(argFcid){
		return "https://focusedOne.firebaseio.com/coaches";
			}
	}
		build(fullName,meetingDays, startTime, ptDay, self)
		{
		var coachColor=getColor();
		var color=(fullName=="Stacy Collerette")? "rgb(231,123,231)":(fullName=="Scott McKinley")?"rgb(0,128,0)": (fullName=="George Rimakis")?"rgb(128,255,255)":(fullName=="Jason Frazzano")?"rgb(0,128,255)": (fullName=="John Gotta")?"rgb(39,242, 34)": (fullName=="Joseph Zirkel")?"rgb(255, 165, 0)": (fullName=="Radika Patel")? "rgb(179,113,223)": (fullName=="Mustaffa Raza")?"rgb(141,143,57)": coachColor;

		this.counter="00001";
		this.fullName=fullName;	
		if(fullName){
			var arr=this.fullName.split(" ");
			console.log(arr[0], arr[1], arr[2]);
		this.firstName=arr[0];
		this.lastName=arr[1];
		this.meetingName= "";
		this.telephoneNumber= "732-671-1834";
		this.email = "focus@focusedCoaching.com";
		this.addressLine1= "Suite 143, 331 Newman Springs Rd., Red Bank, New Jersey 07701";
		this.addressLine2= "Red Bank, New Jersey 07701";
		this.fcid=this.lastName+this.firstName+"_"+this.counter;
		this.specialty="anerobic intellectualization";
		this.bio="no bio";
		this.location= "704 Ginesi Dr. Morganville, New Jersey 07754";
		this.experience = "2 years training with Focused";
		this.photograph= "no photo";

		this.range= "30 miles";
		this.rate= "$200.00";
		this.courseCost=costGenerator(45);// number of hourse
		this.color=color || coachColor || '';
			}
		}
	save()
	{
		if(this.fcid!="")
		{
			var ref = getFirebaseLocation(this.fcid)
    		var self= this;
  			ref.child(this.fcid).transaction(function(argCounter){return argCounter+1;}, 
      				function(error, isSuccessful, finalVal)
        				{ console.log(error, isSuccessful, finalVal.val());
          						if(isSuccessful)
            						{
              							self.fcid=finalVal.val();
              							var ref2=ref.child(self.fcid);
              							ref2.update(self);
            						}
        				});
		}
	}
}
class FcCurrentCoaches extends FcCoach
{    
	constructor(argCurrentCoaches)
	{   
		super(argCurrentCoaches);
		this.buildCurrentCoaches(argCurrentCoaches.coachesFirebaseLocations);
	}
	static getFirebaseLocation(location){
	return '';
	}
	build(currentCoaches){

	}
}

class FcEvent
{
	constructor(argEvent)
	{
		this.build(argEvent.name, argEvent.startTime, argEvent.endTime, argEvent.duration,argEvent.location, argEvent.coach, argEvent.coachFcid, argEvent.activity, argEvent.fcid, argEvent.calendarTotalTime, argEvent.relatedFcids, argEvent.parentEventName, argEvent.parentEventFcid, argEvent.studentFcids, argEvent.studentNames, argEvent.color, argEvent.isChangeNotificationNeeded, argEvent.reasonForEventModification, argEvent.reasonEventNotInACalendar, argEvent.completed, argEvent.date, argEvent.showDate, argEvent.timestamp, argEvent.isHoliday, argEvent.time, argEvent.eventType, argEvent.eventId, argEvent.cdIndex, argEvent.index, argEvent.displayIndex)
	}
  	build(name, startTime, endTime, duration, location, coach, coachFcid, activity, fcid, calendarTotalTime, relatedFcids, parentEventName, parentEventFcid, studentFcids, studentNames, color, isChangeNotificationNeeded, reasonForEventModification, reasonEventNotInACalendar, completed, date, showDate, timestamp, isHoliday, time, eventType, eventId, cdIndex, index, displayIndex)
  	
  	{ 	var myColor=getColor();
		
		var rnd= randomSixty();

	    this.name = name || activity || "New Event"; 
	    this.startTime = startTime || "7:" +  rnd + "AM";// console.log(this.startTime);
	    this.endTime =  endTime || "8:" + rnd + "AM";
	    var duration = durationTime(this.startTime, this.endTime);
	    this.duration= duration.toString() +"Hrs." || "";
	    this.location = location || "704 Ginesi Dr. Morganville, New Jersey 07754";
	    this.coach = coach || "";
	    this.coachFcid=coachFcid || "";
	    this.activity = activity || "New Event";
	    if(fcid)
	    {
	    	this.fcid=fcid
	    }
	    else
	    { 
	    	this.fcid="";
	    }
	    this.completed = completed || false;
	    this.relatedFcids = relatedFcids || [];  
	    this.parentEventName = parentEventName || ""; 
	    this.parentEventFcid = parentEventFcid || "";
	    this.calendarTotalTime=calendarTotalTime || "";
	    this.studentFcids=studentFcids || []; 
	    this.studentNames=studentNames || [];
	    this.color = color || myColor || "lightslateblue";
	    this.isChangeNotificationNeeded = isChangeNotificationNeeded || true;
	    this.reasonForEventModification = reasonForEventModification || "conflict or holiday";
	    this.reasonEventNotInACalendar = reasonEventNotInACalendar || "All events should be calendared.";
	    this.completed = completed || false;
	    this.date=date || "";
	    this.timestamp=new Date(this.date).getTime() || "";
	    this.isHoliday= isHoliday || false;
	    this.time=startTime || endTime || "";
	    this.eventType=eventType || "";
	    this.time = time || startTime || endTime || "";
	    if(startTime){
	    var timeId=stringTimeToDateTime(startTime, date);
			}
		if(startTime && endTime){
			var compressedTime=stacTime(startTime, endTime, date);

		}
	    this.eventId=eventId || timeId || '';
	    this.cdIndex=cdIndex || "";
	    this.index = index || "";
	    this.displayIndex= displayIndex || "";
 		}


	save()
	{
		if(this.fcid=="")
		{
			var ref = new Firebase(FcEvent.getFirebaseLocation());
    		var self= this;
  			ref.child('counter').transaction(function(argCounter){return argCounter+1;}, 
      				function(error, isSuccessful, finalVal)
        				{ console.log(error, isSuccessful, finalVal.val());
          						if(isSuccessful)
            						{
              							self.fcid=finalVal.val();
              							var ref2=ref.child(self.fcid);
              							ref2.update(self);
            						}
        				});
		}
	}

	assignNewFcid()
		{ 	var ref = new Firebase(FcEvent.getFirebaseLocation());
    		var self= this;
  			ref.child('counter').transaction(function(argCounter){return argCounter+1;}, 
      				function(error, isSuccessful, finalVal)
        				{ console.log(error, isSuccessful, finalVal.val());
          						if(isSuccessful)
            						{
              							self.fcid=finalVal.val();
            						}
        				});
		}
}

class FcCourseEvent extends FcEvent
{    
	constructor(argCourseEvent)
	{   
		super(argCourseEvent);
		this.buildCourseEvent(argCourseEvent.courseId, argCourseEvent.coach, argCourseEvent.testDate);
	}

	buildCourseEvent(courseId, coach, testDate)
	{
		this.courseId = courseId || "";
		this.testDate = testDate || "";
	}
}//End of Class



class FcCourse
{
	constructor()
{	
		this.starterDay=0;
		this.isPrivateSchedule=false;
		this.privateCoachingHours="";
		this.scheduleType="",
		this.customCourseType="",
		this.courseType = "";
		this.testDate = "";
		this.startTime="";
		this.endTime= "";
		this.programLength="";
		// //this.primaryCalendar="";
		// this.calendarDayArray=  []; 
		this.startAndEndTimes= this.startTime + " to " + this.endTime || "";
		this.courseMeetingDays="";
		this.summerMeetingDays="";
		this.practiceTestDay= "";
		this.numberOfMeetings="";
		this.numberOfPracticeTests="";
		this.courseLocation=""; 
		this.coach="";
		if(this.coach){
				var cucumber = self.coach.split(" ");
				var coachId=cucumber[1]+cucumber[0]+"00001";
				this.coachFcid =coachId;
		}
		this.associatedCoaches="";
		this.courseSize="";
		this.eventArray = [];
		this.practiceTestArray = [];
		this.courseMeetingArray = [];
		this.courseMeetingEvent={};
		this.coursePracticeTestEvent={};
		this.fcid = "";
		this.currentEnrollment="";
		this.price="";
		this.summer=false;
		this.courseLength="";
		this.courseMeetingLength="";
		this.hoursTotal=""; //FcCourse.getNewFcid();
		this.courseCalendarDaysArray=[];
		if(this.coach){
		this.coachObject= new FcCoach(this.coach) || {};
		}
		this.testDateDate=(this.testDate)?(new Date(this.testDate)):"";
		this.counter=0;
		
	}

	static getFirebaseLocation(){
	
		return "https://focused0ne.firebaseio.com/courseCalendars";

	}


	static getCourseTypes()
	{
		return [{"label": "Would you like to make a custom, small group, or standard course schedule?"},
				{"label2":"Schedule Type"},
				["Focused 1600SAT Course","Focused Study Group", "Custom Small Group Schedule", "Private Coaching"]
			];
	}

	static getTestDates()
	{	var tResult =[];
		var result = [];
		var allTestDates=[[2016, 5, 7],[2016, 6, 4],[2016, 8, 6],[2016,10,1],[2016,11,5],[2016,12,3],[2017,1,28],[2017,3,11],[2017, 5, 6], [2017, 6, 3],[2017, 8, 26],[2017, 10, 7],[2017,11,4],[2017, 12, 2],[2018,3, 10],[2018, 5, 5], [2018, 6, 2], [2018, 8, 25], [2018, 10, 6],[2018,11,3],[2018,12,1],[2019,3, 9],[2019,5,4],[2019, 6, 1]];
		var numDates = allTestDates.length;
		var now = new Date();
		for(var i = 0; i < numDates; i++)
		{
			var testdate = new Date(allTestDates[i]);
			if(testdate.addDays(-28) >= now) //must be 28 days before test min
			{
				result.push(testdate.toDateString());
			}
		}
		var obj1 = {"label":"2016-2019 SAT Test Dates"};
		var obj2={"label2": "Test Date"};
		tResult.push(obj1);
		tResult.push(obj2);
		tResult.push(result);
		return tResult;	
	}
	static getCoaches()
	{
		return [{"label": "Primary Course Coach"},
					{"label2": "Coach"},
					["John Gotta",
					"Stacy Collerette",
					"George Rimakis",
					"Scott McKinley",
					"Jason Frazzano",
					"Mustaffa Raza",
					"Radika Patel"],
					];//this should be a profile and be pulled from its own constructors.
	}

	static getPresetCourseLength()
	{
		return 	[{"label": "Select a Program Length between 3 & 13 weeks"},
				{"label2": "Program Length"},
				["3 Weeks, 21 Days", "4 Weeks, 28 Days", "5 Weeks, 35 Days", "6 Weeks, 42 Days", "7 Weeks, 49 Days", "8 Weeks, 56 Days", "9 Weeks, 63 Days", "10 Weeks, 70 Days", "11 Weeks, 77 Days", "12 Weeks, 84 Days", "13 Weeks, 91 Days"]
			    ];	   
	}
static getPracticeTestDays()
	{
	 	return	[	{"label": "Which Practice Test Day Suits Your Course?"},
		 			{"label2": "Practice Test Day"},
					["Saturday Practice Tests","Sunday Practice Tests"]
				];
	}

static getCourseTimeSets()
	{	return  [{"label": "Course Times During School"},
			  {"label2":"Course Meeting Sets"},
			  ["M|W, 6:00PM_9:00PM", "Tu|Th, 6:00PM_9:00PM", "M|W|F, 3:45PM_5:45PM"]
			  ];
	}


static getSummerCourseSchedules()
{		return[{"label": "Summer Course Schedules!"},
	{"label2": "Summer Meeting Days"},
 	["M|W, 9:00AM_12:30PM", "Tu|Th, 9:00AM_12:30PM", "M|W, 1:00PM_4:30PM", "Tu|Th, 1:00PM_4:30PM", "M|W, 5:30PM_8:30PM", "Tu|Th, 5:30PM_8:30PM", "M|W|F, 9:45AM_12:45PM"]
 	];

}

static getCourseMeetingDays()
	{
		return [{"label": "Check Conflicts, Add Repeating Days, or Single Events?"},
				{"label2": "Course Meeting Days"},
				["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Select Days on your Calendar"], 
				{"multiSelect": true}
				];
	}
static getCourseEnrollment()
	{
		  		 return [	{"label": "Course Enrollment Limit"},
							{"label2": "Course Size"},
	  						["1600SAT Course: 18","1600SAT Course: 22","1600SAT Course: 24"]
	  					];
	}
static getPrice()
{
	return[{"label": "Course Pricing"},
	{"label2": "Price"},
 	["$2800.00", "$2400.00", "$2250.00", "Other"]
 	];
}

static getConfirmAndSetCourse()
{
return[{"label": "Confirm Course Data"},
	{"label2": "Confirmation"},
 	["Confirm", "Reject", "Edit Fields"]
 	];
}
static getCongradulations()
{
	return[{"label": "Congratulations! Course Complete"},
	{"label2": "Course Creation Complete"},
 	["Exit and Add Students", "Return to Edit Course"]
 	];
}

//end Array one Array zero holds all as default for fing up
static getCustomEventType()
{
return[{"label": "What Custom Event Type Are You Creating"},
	{"label2": "Custom Event Type"},
 	["see our dynamic calendar"]

 	];
}

static getCourseTimes()
	{
		return [
				{"label":"Course Times"},
				{"label2":"Start And End Times"},
				["3:45PM-5:45PM", "6:00PM-9:00PM", "9:00AM-12:30PM", "1:00PM-4:30PM", "5:00PM-8:30PM", "4:00PM-7:30PM", "View Coach Availability", "Let Us Find a Time With a Coach", "Choose Your Own Schedule", "View Pricing and Read About Us"]
				];
	}

static getPrivateCoach()
{
		return [{"label": "Private Course Coach"},
					{"label2": "Private Coach"},
					["John Gotta, Price AVG",
					"Stacy Collerette, Price AVG",
					"George Rimakis, Price AVG",
					"Scott McKinley, Price AVG",
					"Jason Frazzano, Price AVG",
					"Mustaffa Raza, Price AVG",
					"Radika Patel, Price AVG"],
					];//this should be a profile and be pulled from its own constructors.
}
static getPrivateCoachingPackageHours()
{
		return [{"label": "Private Coaching Hours Packages"},
					{"label2": "Private Coaching Hours"},
					["12 Hours, 4-6 Sessions, Price Total",
					"18 Hours, 6-9 Sessions, Price Total",
					"24 Hours, 8-12 Sessions, Price Total",
					"36 Hours, 12-18 Sessions, Price Total",
					"50 Hours, up to 25 Sessions, Price Total",
					"100 Hours, up to 50 Sessions, Price Total", 
					"Other, by approval only"
					]
					];//this should be a profile and be pulled from its own constructors.
}

static getStudentsForPrivatePackage()
{
		return [{"label": "Add The Student Interested In the Hours"},
					{"label2": "Student Profile Link"},
					["ADD STUDENT",
					"REMOVE STUDENT"
					]
					];//this should be a profile and be pulled from its own constructors.
}
static getStudentsForPrivatePackage()
{
		return [{"label": "Add The Student Interested In the Hours"},
					{"label2": "Student Profile Link"},
					["ADD STUDENT",
					"REMOVE STUDENT"
					]
					];//this should be a profile and be pulled from its own constructors.
}
static getDateForPrivateSession()
{
return [{"label": "Select a Date For A Session"},
					{"label2": "Private Session Date"},
					["ADD Date",
					"ADD Date 2"
					]
					];


}
static getStartTimeForPrivateSession()
{
	return [{"label": "Set Start Time For Date One"},
					{"label2": "Start Time Date One"},
					["ADD START TIME 1",
					""
					]
					];


}
static getEndTimeForPrivateSession()
{
	return [{"label": "Set End Time For Date One"},
					{"label2": "End Time Date One"},
					["ADD End TIME 1",
					""
					]
					];


}

static getInputs()
{		return[	FcCourse.getCourseTypes(), FcCourse.getTestDates(), 	FcCourse.getCoaches(), FcCourse.getPresetCourseLength(), FcCourse.getPracticeTestDays(), FcCourse.getCourseTimeSets(),FcCourse.getSummerCourseSchedules(),FcCourse.getCourseMeetingDays(), FcCourse.getCourseEnrollment(),FcCourse.getPrice(),FcCourse.getConfirmAndSetCourse(),FcCourse.getCustomEventType(),FcCourse.getPrivateCoach(), FcCourse.getPrivateCoachingPackageHours(), FcCourse.getStudentsForPrivatePackage(), FcCourse.getEndTimeForPrivateSession(), FcCourse.getCongradulations()];
}


setCourseLength(argWeeks, self)
	{  
		this.courseCalendarDaysArray=[];
		this.courseLength = parseInt(argWeeks);
		var retVal = this.setCourseCalendar(this.courseLength, self);
		this.programLength=parseInt(argWeeks) + " weeks";
		this.courseLength=this.programLength;
		return retVal;
	}

	setTestDate(argDate)
	{
		this.testDate = argDate;
		this.testDateDate = new Date(this.testDate);
		this.eventArray = [];
		this.practiceTestArray = [];
		this.courseMeetingArray = [];
		this.courseCalendarDaysArray=[];
	}

	setCourseCalendar(weeks, self)
	{	var a=new Date().getTime();
		var daysOfProgram=(weeks*7);
		var endDate= new Date(this.testDate).addDays(-1);
			this.endDate= endDate;
		var startDate = endDate.addDays(-(daysOfProgram)+1);
		this.startDate = new Date(startDate);
		var counter=0;
		var color=this.coachObject.color;
		var datesArray=getDates(startDate, endDate);
		var daysIwant=self.fcCourse.calendarDayArray.filter(function(day, index, arr){
					let date=new Date(day.date);
				return (date>=this.startDate && date<=this.endDate && day.inMonth===true);
		}, this).map(function(curr,index, array){
					let date =new Date(curr.date);
					curr.date=date;
					curr.cdIndex=index;
					curr.isSelected = true; 
					counter ++;
				return curr;

		}, this);
		self.set("fcCourse.courseCalendarDaysArray",daysIwant);
		var b=new Date().getTime();
		var t=b-a;
		console.log(t);
		return daysIwant;

	}

	setCourseMeetingEvent(self)
	{	var duration = durationTime(this.startTime, this.endTime) || "";
		var event = new FcEvent({
			name: (this.coach).replace(" ","") + "Course Meeting" || "", 
			startTime: this.startTime || "",
			endTime: this.endTime || "",
			duration: duration + "Hours" || "", 
			location: "704 Ginesi Drive, Morganville, NJ 07754: Room 1",
			coach: this.coach || "", 
			coachFcid: this.coachObject.fcid || "", 
			activity: (this.coach).replace(" ","") + "Course" || "",
			fcid: (this.coach).replace(" ","") + "CME_"+"00001", 
			calendarTotalTime: "", 
			relatedFcids: [],
			parentEventName: this.fcid || "", 
			parentEventFcid:this.fcid || "", 
			studentFcids:[], 
			studentNames: [], 
			color: this.coachObject.color,
			background: "white" || this.coachObject.color2 || "", 
			completed: false,
			date: {},
			eventId: "",//daytimeId+_location+_coachid+_
			isHoliday: "",//getter
			isTestDate: "",//getter
			eventType:"courseMeeting",
							});
		self.set("fcCourse.courseMeetingEvent", event);
		return event;
	}
	setPracticeTestEvent(argPte, self){



	}
	setPrivateSessionEvent(argPse, self){





	}

	
	setPracticeTestDay(argDay, self)
	{	var day = argDay.charAt(1);
			var testVal;
			if(day=="u"){testVal=0;}
			else if(day=="a"){testVal=6;}
			var weekendDay= argDay.split(" ");
			var theDay=weekendDay[0];
			var val=this.courseCalendarDaysArray.length-1;
			this.courseCalendarDaysArray[val].cdIndex=val;
		var markedCalendarDayArray= this.courseCalendarDaysArray.map(function(currentValue, index, array){
			var ted=new Date(currentValue.date).getDay();
			if(ted===testVal && currentValue.dateId !=new Date(this.testDate).getTime()){
				currentValue.background="red";
				currentValue.isPracticeTestDay=true;
				currentValue.inPracticeTestArray=true;
				var norman= new FcEvent({
						activity: "Practice Test: 00001",
						name: "Practice Test: 00001",
						coach:  this.coach,
						date: new Date(currentValue.date),
						endTime: "12:45PM",
						fcid: "JoesPracticeTest00001",
						coachId: this.coachId,
						location:"704 Ginesi Drive, Morganville, NJ 07754",
						room:"Room 1 of 3",
						startTime: "9:00AM",
						time: "9:00AM",
						color: "orange", 
						eventType: "practice test",
					});
				self.push(["fcCourse.courseCalendarDaysArray",currentValue.cdIndex, "eventList"],norman);

				}
			 return currentValue;
		}, this);
		self.set("fcCourse.practiceTestDay", argDay);
		
		
		var pTestArray=markedCalendarDayArray.filter(function(currentValue){
				return (currentValue.inPracticeTestArray===true);
		});
		this.coursePracticeTestEvent=pTestArray[0];
		this.numberOfPracticeTests=pTestArray.length;
	 	self.set("fcCourse.practiceTestArray", pTestArray);
	 	self.set("fcCourse.numberOfPracticeTests",this.numberOfPracticeTests);
	}


	setCourseMeetingDaysAndTimes(argDaysAndTimes, self)
	{	console.log(new Date().getTime());
		var theDaySet ="";
		var parts = argDaysAndTimes.split(",");
		var days= parts[0].split("|");
		var numDays=days.length;
		for(var i=0; i<numDays; i++)
		{
			var theDay =days[i];
			theDaySet +=dayAbbreviationsToDays(theDay) + " ";
		}
		var times = parts[1];
		times = times.split("_");
		this.startTime=times[0].replace(" ", "");
		this.endTime=times[1];
		this.startAndEndTimes = this.startTime + " to " + this.endTime;
		var cme = this.setCourseMeetingEvent(self);
		this.setCourseMeetingEvents(theDaySet, this.startTime, this.endTime, this.coach, cme, self);
	 	console.log(new Date().getTime());
	}

	setCourseMeetingEvents(argDays, argStartTime, argEndTime, argCoach, argCme, self){	
		var j=0;
		this.courseMeetingDays = argDays;
		var arrayDays = argDays.split(" ");
		var k=new Date().getTime();
		var numMeetingDays=arrayDays.length;
		
		this.courseMeetingEvent=argCme;
		var mDays=arrayDays.filter(function(item)
			{
				return(item && item!="" && item!=" "&& item!="  ");
			},this).map(function(item, index, array)
			{	
				console.log(item);
				var element=(item=="Sunday")?0:(item=="Monday")?1:(item=="Tuesday")?2:(item=="Wednesday")?3:(item=="Thursday")?4:(item=="Friday")?5:(item=="Saturday")?6: "";
				return element;
			});
		let b=new Date().getTime();
		var eventMap=new Map();
		var nArray=[];
		var nArray= this.courseCalendarDaysArray.filter(function(d, i, array)
		{	 
			var tester = new Date(d.date).getDay();
			var event=argCme;
				let a=new Date().getTime();
				 return(mDays.indexOf(tester)>-1);
				},this).map(function(day, id, arr){

				day.color=this.coachObject.color;
				day.isCourseMeeting=true;
				day.isMeetingDay=true;
				day.coach=this.coach;
				this.courseMeetingEvent.date=day.date;
				this.courseMeetingEvent.dateId=stringTimeToDateTime(this.startTime, day.date);
				var keyString = this.courseMeetingEvent.dateId,
    			keyObj = day,
    			dayKeyString=day.date.getTime(),
    			keyFunc = FcEvent;
    			var endVal=stringTimeToDateTime(this.endTime, day.date);
				var params="params_"+keyString;
				var event = new FcEvent(this.courseMeetingEvent);
				event.cdIndex=day.cdIndex;
				event.isCourseMeeting=true;
				 let d=new Date().getTime();
				 eventMap.set(keyString,{"event":event, "day": keyObj, "endTime": endVal});
				 eventMap.set(keyFunc, keyFunc);
				var four = eventMap.size; // 3

		// getting the values
		var one=eventMap.get(keyString);    // "value associated with 'a string'"
		   var mevp=eventMap.get(keyString);
		   var mev=mevp.event;
		var three = eventMap.get(keyFunc);      // "value associated with keyFunc"
			console.log(eventMap, one, three, four, mev);

			self.unshift(["fcCourse.courseCalendarDaysArray",day.cdIndex,"eventList"], event);
				return event;
		}, this);
				console.log(nArray, "this is the course meeting array");
				self.set("fcCourse.courseMeetingArray",nArray);
		var arb=this.eventArray.concat(nArray);
		self.set("fcCourse.eventArray", arb);
		//console.log(self.fcCourse.eventArray, this.eventArray);

		var numMeetings=this.courseMeetingArray.length;
		console.log(numMeetings, this.courseMeetingArray);
		self.set("fcCourse.numberOfMeetings",numMeetings);
		this.numberOfMeetings=numMeetings;
		var h=new Date().getTime();
		console.log(k,  this.numberOfMeetings);
		console.log("grand total", h-k);
		}

	setCoach(argCoach, self){
	// {	argCoach.days= this.courseMeetingDays;
	// 	argCoach.times= this.startTime;
	// 	argCoach.ptest=this.practiceTestDay;
		this.coachObject =new FcCoach(argCoach, self);
		console.log(this.coachObject);
		self.set("fcCourse.coach", argCoach.fullName);
		self.set("fcCourse.coachObject", this.coachObject);
	}

	setCourseFcid(testDate, coachFcid, location, meetingDays, practiceTestDay, startTime, endTime, eventDateArray) {
	var len = eventDateArray.length;
	var weekdays = "";
	var mdays = meetingDays.replace(/\s/g, '');
	var arr = mdays.split(',');
	var len = arr.length;
	for (var i = 0; i < len; i++) {
		weekdays += arr[i][2];
	}
	startTime = startTime.replace(":", "");
	endTime = endTime.replace(":", "");
	console.log(endTime);
	var fcid = dayStamp(testDate) + "_" + coachFcid + location + startTime + weekdays + endTime + "_" + len.toString() + practiceTestDay;
	console.log(fcid);
	return fcid;

		// this.calendarCode=this.lastName.slice(0,2)+this.firstName.slice(0,2)+self.fcCourse.testDate+"_Focused1600_CourseMeetingOn_"+days.toString()+pTest.toString()+time.toString()+this.location.replace(" ","").slice(0,6);
		// console.log(this.calendarCode, this.calendarCode);
		// var array=[];
		// array.push(this.calendarCode);
		// this.calendars=array;
}

	save()
	{
		var numEvents = this.eventArray.length;
		var i = 0;
		if(this.fcid=="")
		{
			var ref = new Firebase(FcCourse.getFirebaseLocation());
    		var self= this;
  			ref.child('counter').transaction(function(argCounter){return argCounter+1;}, 
      				function(error, isSuccessful, finalVal)
        				{ console.log(error, isSuccessful, finalVal.val());
          						if(isSuccessful)
            						{
              							self.fcid=finalVal.val();
              							var ref2=ref.child(self.fcid);
              							ref2.update(self);
            						}
        				});
		}
		else{}
	}

};

function generateHolidayEventsIndependant(startDate, endDate)
{
	var holidayArray = [{"name": "Daylight Saving Time", "holiday":[2016,3,13], "noBook": false}, 
        {"name": "St. Patrick's Day", "holiday":[2016,3,17], "noBook": false},
        {"name": "Palm Sunday", "holiday":[2016,3,20], "noBook": false}, 
        {"name": "Passover Begins", "holiday": [2016,3,23], "noBook": false},
        {"name": "Purim", "holiday": [2016,3,24], "noBook": false}, 
        {"name": "Good Friday", "holiday": [2016,3,25], "noBook": false},
        {"name": "Easter", "holiday": [2016,3,27], "noBook": true},
        {"name": "Orthodox Good Friday", "holiday": [2016,4,29], "noBook": false},
        {"name": "Last Day of Passover", "holiday": [2016,4,30], "noBook": false}, 
        {"name": "Yom HaShoah", "holiday": [2016,5,4], "noBook": false}, 
        {"name": "Isra and Mi'raj, Cinco Di Mayo", "holiday": [2016,5,5], "noBook": false}, 
        {"name": "MOTHERS DAY!!!", "holiday": [2016,5,8], "noBook": true},
        {"name": "Memorial Day", "holiday": [2016,5,30], "noBook": false},
        {"name": "Ramadan Begins", "holiday": [2016,6,7], "noBook": false},
        {"name": "Father's Day", "holiday": [2016,6,19], "noBook": true},
        {"name": "Independence Day July 4", "holiday": [2016,7,4], "noBook": true},
        {"name": "Labor Day", "holiday": [2016,9,5], "noBook": false},
        {"name": "Rosh Hashana, Muharram", "holiday": [2016,10,3], "noBook": false},
        {"name": "Columbus Day", "holiday": [2016,10,10], "noBook": false},
        {"name": "Yom Kippur", "holiday": [2016,10,12], "noBook": false},
        {"name": "Diwali", "holiday": [2016,10,29], "noBook": false},
        {"name": "Halloween", "holiday": [2016,10,31], "noBook": false},
        {"name": "Veterans Day", "holiday": [2016,11,11], "noBook": false},
        {"name": "Thanksgiving Thursday", "holiday": [2016,11,24], "noBook": true},
        {"name": "Thanksgiving Friday", "holiday": [2016,11,25], "noBook": true}, 
        {"name": "Christmas Eve", "holiday": [2016,12,24], "noBook": true},
        {"name": "Christmas", "holiday": [2016,12,25], "noBook": true},
        {"name": "New Year's Eve", "holiday": [2016,12,31], "noBook": true}];

    var numHolidays = holidayArray.length;
    var eventPushObject = {};
    var ev = {};
    var retVal=[];
  	for(var i=0;i<numHolidays;i++)
  	{
      	var relHolidays=[];
      	var noBookHolidays=[];
        var holidayDate = new Date(holidayArray[i].holiday);
        var holiday=holidayArray[i];

       if(startDate<=holidayDate && holidayDate<=endDate && holiday.noBook===true)
       {
        		var holidayObj={	
        							activity: holiday.name,
        							name: holiday.name,
        							time: "NoBooK", 
        							startTime: "NoBook",
        							endTime: "NoBook",
        							completed: false,
        							date: holidayDate,
        							showDate: holidayDate.toDateString(),
        							timestamp: new Date(holidayDate).getTime(),
        							color: "vanilla",
        							isHoliday: true,
        							relatedFcids: holidayArray[i].noBook? "*": ""
        						};
        	retVal.push(holidayObj);     
        }
    }
    return retVal;   
}

function getTimes(holiday, date)
	{	var d = new Date(date);
		var slotsArr = [];
		var timeArr = [];
	
              if(holiday.length!==0)
              {
          			timeArr.push(new FcEvent(holiday[0]));	
              }
              else
              	{
              		var argEvent={};
     
              		timeArr.push(new FcEvent(argEvent));
         
          	}
          return(timeArr);
	}
function IsTestDate(date)
{
var boolean;
var obj={};
obj={"val": ""};
var allTestDates=[[2016,1,23], [2016, 3, 5],[2016, 5, 7],[2016, 6, 4],[2016, 8, 6],[2016,10,1],[2016,11,5],[2016,12,3],[2017,1,28],[2017,3,11],[2017, 5, 6], [2017, 6, 3],[2017, 8, 26],[2017, 10, 7],[2017,11,4],[2017, 12, 2],[2018,3, 10],[2018, 5, 5], [2018, 6, 2], [2018, 8, 25], [2018, 10, 6],[2018,11,3],[2018,12,1],[2019,3, 9],[2019,5,4],[2019, 6, 1]];
var truefalse=allTestDates.map(function(val)
		{ var retVal=new Date(val).getTime();
			return retVal;
		});
	var td=new Date(date).getTime();
	boolean=(truefalse.indexOf(td)>-1);
	obj.val=boolean;
	return obj;	
}
function nextReasonableTestDate()
{

var allTestDates=[[2016,1,23], [2016, 3, 5],[2016, 5, 7],[2016, 6, 4],[2016, 8, 6],[2016,10,1],[2016,11,5],[2016,12,3],[2017,1,28],[2017,3,11],[2017, 5, 6], [2017, 6, 3],[2017, 8, 26],[2017, 10, 7],[2017,11,4],[2017, 12, 2],[2018,3, 10],[2018, 5, 5], [2018, 6, 2], [2018, 8, 25], [2018, 10, 6],[2018,11,3],[2018,12,1],[2019,3, 9],[2019,5,4],[2019, 6, 1]];

var now = new Date();
var testDate=allTestDates.map(function(val)
		{ var retVal=new Date(val);
				return retVal;}).find(function(date){
					if(date>now.addDays(+42))
						{return date};
				});
console.log(testDate);
		return testDate;	
}
		
function FcCalendarDay(date, wantSlots)
{	var holiday = [];

	var t=new Date(date);
	var d= new Date();
 	var p= d.setTime(t.getTime());
 	var testEvent=[];
 	var te={name: "SAT Test Date", activity: "SAT Test Date", startTime:"7:30AM", endTime:"3:45PM", courseID:"allFCIDs00001", fcid:"", date: t, showDate: t.toDateString(), coach: "Joseph Zirkel", location: "see your registration ticket", color: "gold", background: "gold", isHoliday: false, isTestDate: true, time: "7:30AM", completed: false, timestamp: new Date(t).getTime("7:30AM")};
 	testEvent.push(te);
 	var testCourseEvent = new FcCourseEvent(testEvent);
 	var date2=new Date(date);
 	var month = new Date(date).getFullMonth();
	var calendarDay={};	

	holiday= generateHolidayEventsIndependant(date, date2);
	var testD= new IsTestDate(date);
	var holi=(holiday.length>0);
	var background=(testD.val===true)?"gold":"#008";
	var color =(testD.val===true)?"red": "white";
	var dateText =(testD.val===true)?"SAT":"";
calendarDay={
				date:t,
				inMonth:true,
				dateId:d.getTime(),
				isSelected: false,
				cdIndex:"",
				isHoliday: holi,
				isTestDate: testD.val,
				eventList: (holi)?getTimes(holiday, date2):(testD.val)?getTimes(testEvent, date2): [],
	};
	
	return calendarDay;
  }

  function FcCalendarDays(startDate, stopDate)
{
	var calendarDays = new Array();
      var currentDate = startDate;
      var calDay={};
      var i=0;
      while (currentDate <= stopDate)
      { 
      	calDay=new FcCalendarDay(currentDate);
      	calDay.cdIndex=i;
        calendarDays.push(calDay);
        currentDate = currentDate.addDays(1);
        i++;
      }
      return calendarDays;
}


// FcCourse.fcidCounter = 0;

window.FCBehaviors = window.FCBehaviors || {};
FCBehaviors.FcCalendarBehaviorPrime = {
	properties: {
		 startDate:{
		 	type: Date,
		 	notify: true
		 },
		 endDate:{
		 	type: Date,
		 	notify: true
		 },
		dateArr:{
			type: Array,
			value:[],
			notify: true
		},
		displayedMonthIndex:{
			type: Number,
			notify: true
		},
		lastMonthIndex:{
			type: Number,
			notify: true

		},
		theDate:{
			type: Date,
			notify: true
		},
		
		monthsArray:{
			type: Array,
			value: [],
			notify: true
		},
		calendarDay:
		{		type: FcCalendarDay,
				notify: true
		},
		dayOfWeek: {
			type: String,
			notify: true
		},
		dateArr: {
			type: Array,
			value: function(){ return [];},
			notify: true
		},
		year: {
			type: String,
			notify: true
		},
		day:{
			type: Date,
			notify: true
		},
		holidays: {
			type: Array, 
			value:[],
			notify: true
		},
		dayArray:{
			type: Array,
			value: [],
			notify: true
		},
		days:{
			type: Array,
			value: function()
			{
					return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
			},
			notify: true
		}, 
		
		month: {
			type: String,
			value:"",
			notify: true
		}, 
		units:{
			type: String,
			value:"months",
			notify: true
		}, 
	
		calendarDayArray: {
			type: Array,
			value: [],
			notify: true
		}

	},

	attached: function(){
		//console.log(this.holidays);
	},

	dayObject: function(date, FcEvent){},

	
	calendarCreator: function(start, end, units, cda)
	{	var currDate;
		if (units!=undefined && units!=null){this.set("units", units);} 
		else{this.set("units", months);}
		if(!cda)
		{
		var startDate=(start!=null)?start:new Date().addDays(0);
		var endDate = (end!=null)?end:new Date().addDays(365);
		var arrArg=[];
		if(endDate<=startDate)
			{	var startDateHolder= new Date(startDate);
				startDate={};
				startDate=new Date(endDate);
				endDate={};
				endDate= new Date(startDateHolder);
			}//date crossing condition
		var self=this;
		this.set('dateArr', getDates(startDate, endDate));
		var calArray=this.dateArr.map(function(currentValue, index)
			{	var calendarDay = new FcCalendarDay(currentValue, true);
				calendarDay.index=index;
				return calendarDay;	
			});
			this.set("calendarDayArray", calArray);
		}
		else{var calendarM=cda.filter(function(day,index,array){
			return(day.inMonth);
		}, this);
			this.set("calendarDayArray",calendarM);}
		//	console.log(this.calendarDayArray);
		if(this.units=="months" || this.units=="Months")
		{
			this.setMonths(this.calendarDayArray);
			this.setDisplayedMonth();
		}
	},
	setMonths: function(calDaysArray){ 
		this.monthsArray=null;
		this.monthsArray=[];
		var numDays=calDaysArray.length;
		var finishedFirstMonth=false;
		var currentMonth = 0;
		var startArray=[];
		var endArray=[];
		var month =new Array();
		month= [];
		var startDate= new Date(this.calendarDayArray[0].date);
	for (i = 0; i < numDays; i++) 
	{	
		if(i==0)
			{	
				var newMonth=true;
				startDate=new Date(this.calendarDayArray[0].date);
				this.monthsArray[currentMonth]=[];
				
			}
		while(newMonth===true && new Date(startDate).getDay()!==0)//filling beginning of month
			{	
				startDate = new Date(startDate).addDays(-1);
				var cday= this.calendarDayConstructor(startDate);
				month.unshift(cday);
			
			}
		if(newMonth===true)
		{
			this.monthsArray[currentMonth]= month.concat(this.monthsArray[currentMonth]);
		}
			newMonth=false;
			month=null;
			month=[];
			var calendarDay=this.calendarDayArray[i];
			var yesterday = (i>0)?new Date(this.calendarDayArray[i-1].date):"";	
			if(i>0 && new Date(calendarDay.date).getFullMonth() != yesterday.getFullMonth()||i==(numDays-1))
			{
				this.monthsArray[currentMonth]
				var lastDay=new Date(yesterday);
				while(this.monthsArray[currentMonth].length!==42)
				{
					//console.log(this.monthsArray[currentMonth].length);
					lastDay=lastDay.addDays(+1);
					var endDay= this.calendarDayConstructor(lastDay);
					this.monthsArray[currentMonth].push(endDay);
					//console.log(this.monthsArray[currentMonth].length);

				}
				if(i!=(numDays-1)){
				currentMonth++;
				this.monthsArray[currentMonth]=[];
				this.monthsArray[currentMonth].push(calendarDay)
				startDate=this.calendarDayArray[i].date;
				newMonth=true;
			}
			}
		else {
				this.monthsArray[currentMonth].push(calendarDay);
				newMonth=false;
		}
	}
	var counter =0;
	this.calendarDayArray=new Array();
	this.monthsArray.forEach(function(month,index){
			month.forEach(function(day, i,a){
				counter++;
						day.displayIndex=counter;
					this.push("calendarDayArray",day);
			},this);

	}, this);
},

	setDisplayedMonth:function(){
		var today = new Date();
		var todMonth = today.getMonth();
						this.set("displayedMonth", this.monthsArray[todMonth]);
						this.set("displayedMonthIndex",todMonth);
		var lastMonthIndex=this.monthsArray.length;
		this.set("lastMonthIndex", lastMonthIndex);
	},
 
 calendarDayConstructor: function(currDate)
 	{	var calendarDay={};
 		
 		calendarDay={
 			"color":"white",
 			"date":currDate, 
			"eventList":[],
			"dateId":currDate.dayStamp()+"_false",
			"inMonth": false,
			"isSelected":false,
			"isHoliday": false,
			"isTestDate": false,
			
		};
		return calendarDay;
	},


	_computeTheMonths: function(year, month, monthsArray, displayedMonthIndex, displayedMonth)
	{
		var mon=(displayedMonth==undefined || displayedMonth==[])? month:displayedMonth[displayedMonthIndex].toString().substring(4,7);
		var returnVal =(mon=="Feb")?"February": (mon=="Mar")?"March":(mon=="Apr")?"April": (mon=="May")?"May":(mon=="Jun")?"June":(mon=="Jul")?"July":(mon=="Aug")?"August":(mon=="Sep")?"September":(mon=="Oct")?"October": (mon=="Nov")?"November":(mon=="Dec")?"December":"January";  
		
		return returnVal;
	},

 getTimes: function(isHoliday, calendarDay)
	{	
		var slotsArr = [];
		var timeArr = [];
		for(var i=9; i<=22;i++)
        {
              var hour=(i<13)?i:(i-12);
              if(hour<10){hour=hour.toString();}
              var minutes="00";
              if(i==12){minutes="30";}
              if(i===15){minutes="45"}
              var ampm=(i<12)?"AM":"PM";
              var tobj = {"hour": hour,
                          "minutes": minutes,
                          "ampm": ampm, 
                        };
              var string=hour.toString() + ":" + minutes+ ampm;
              if(isHoliday==true)
              {
              	timeArr.push(new FcEvent({"name": holiday.name, "startTime": "NO BOOK", "activity": holiday.activity, "name": calendarDay.holiday,"coach":"HOLIDAY", "location": "HOLIDAY", "time":"nobook", "endTime": "nobook", "fcid": "", "date":calendarDay.showDate, "color": "gold"}));
              }
              else
              	{
              		timeArr.push(new FcEvent({"startTime": string, "name": "holderEvent", "coach":"", "location": "","activity":"", "time":"", "endTime": "", "fcid": "", "date":calendarDay.date.toDateString()}));
          		}
              if(i!==16){i=i+2;}
              else if(i===16){i=17;}
          	}
          return(timeArr);
	},

    
generateHolidayEvents: function(startDate, endDate)
{
	var holidayArray = [{"name": "Daylight Saving Time", "holiday":[2016,3,13], "noBook": false}, 
        {"name": "St. Patrick's Day", "holiday":[2016,3,17], "noBook": false},
        {"name": "Palm Sunday", "holiday":[2016,3,20], "noBook": false}, 
        {"name": "Passover Begins", "holiday": [2016,3,23], "noBook": false},
        {"name": "Purim", "holiday": [2016,3,24], "noBook": false}, 
        {"name": "Good Friday", "holiday": [2016,3,25], "noBook": false},
        {"name": "Easter", "holiday": [2016,3,27], "noBook": true},
        {"name": "Orthodox Good Friday", "holiday": [2016,4,29], "noBook": false},
        {"name": "Last Day of Passover", "holiday": [2016,4,30], "noBook": false}, 
        {"name": "Yom HaShoah", "holiday": [2016,5,4], "noBook": false}, 
        {"name": "Isra and Mi'raj, Cinco Di Mayo", "holiday": [2016,5,5], "noBook": false}, 
        {"name": "MOTHERS DAY!!!", "holiday": [2016,5,8], "noBook": true},
        {"name": "Memorial Day", "holiday": [2016,5,30], "noBook": false},
        {"name": "Ramadan Begins", "holiday": [2016,6,7], "noBook": false},
        {"name": "Father's Day", "holiday": [2016,6,19], "noBook": true},
        {"name": "Independence Day July 4", "holiday": [2016,7,4], "noBook": true},
        {"name": "Labor Day", "holiday": [2016,9,5], "noBook": false},
        {"name": "Rosh Hashana, Muharram", "holiday": [2016,10,3], "noBook": false},
        {"name": "Columbus Day", "holiday": [2016,10,10], "noBook": false},
        {"name": "Yom Kippur", "holiday": [2016,10,12], "noBook": false},
        {"name": "Diwali", "holiday": [2016,10,29], "noBook": false},
        {"name": "Halloween", "holiday": [2016,10,31], "noBook": false},
        {"name": "Veterans Day", "holiday": [2016,11,11], "noBook": false},
        {"name": "Thanksgiving Thursday", "holiday": [2016,11,24], "noBook": true},
        {"name": "Thanksgiving Friday", "holiday": [2016,11,25], "noBook": true}, 
        {"name": "Christmas Eve", "holiday": [2016,12,24], "noBook": true},
        {"name": "Christmas", "holiday": [2016,12,25], "noBook": true},
        {"name": "New Year's Eve", "holiday": [2016,12,31], "noBook": true}];

    var numHolidays = holidayArray.length;
    var eventPushArr = [];
    var ev = {};
  	for(i=0;i<numHolidays;i++)
  	{
      	var relHolidays=[];
      	var noBookHolidays=[];
        var startTime = new Date(holidayArray[i].holiday);
        //console.log(startTime.toDateString());
        var endTime = new Date(holidayArray[i].holiday);
        endTime.setHours(23);
        endTime.setMinutes(59);
        var holidayTimestamp = startTime.dayStamp();
        holidayArray[i].dayStamp=holidayTimestamp;
        var d=new Date(holidayTimestamp);
        if(holidayTimestamp >= startDate && holidayTimestamp <= endDate && holidayArray[i].noBook)
        {	
		ev ={	name: holidayArray[i].name, 
				startTime: startTime,
				endTime: endTime,
				completed: false,
				relatedFcids: holidayArray[i].noBook? "*": "",
				dayStamp: holidayTimestamp,
				showDate: startTime.toDateString()
			};
        	eventPushArr.push(ev);  
           
        }
    }
    //console.log(eventPushArr);
   return eventPushArr;
	}
}
</script>
	
