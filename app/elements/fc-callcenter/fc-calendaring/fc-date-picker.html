<dom-module id="fc-date-picker">
<style>
:host{
	position: fixed;

}
  .card{
  	border-top: 1px solid silver;
  	text-align: center; 
  	width:calc(100%/7.4); 
  	margin: auto;
  	margin-bottom: 6px; 
  	margin-top: 4px; 
  	height: 97%;
  } 
</style>
<template>

	<fc-ddr-card drags="true" head-class="darkBlue" is-picker="true" header-title="[[_computeCalendarHeading(displayedMonth)]] [[computeYear(displayedMonth)]]" class="flex layout vertical" style="padding:0x; margin: 14px; width: 360px!important;">
	
	<paper-icon-button on-tap="_backOneMonth" icon="icons:arrow-back" style="margin-bottom: 11px; position: absolute; left: 15px;" class="headerLeft"></paper-icon-button>
	
		<paper-icon-button on-tap="_forwardOneMonth" icon="icons:arrow-forward" style="color: white; margin-bottom: 11px; position:absolute; right: 15px; top: 2px;" class="headerRight"></paper-icon-button>
			<div class="horizontal flex layout wrap" style="background: white; width: 355px!important;">
				<template is="dom-repeat" class="horizontal layout nowrap" items="{{days}}">
					<paper-material style="border-right: 1px solid white;text-align: center; padding-right:1px; width:calc(100%/7.5)!important; font-size: 9.1px; font-weight: 600; margin: auto; margin-top: 3px; border-top: 2px solid #afafaf; margin-bottom: 3px; background: white;">
					{{item}}
					</paper-material>
				</template>
			</div>
		<div class="vertical layout" style="width: 355px!important; background: white; overflow:scroll; height: 295px; min-height: 242px;">
			<section class="horizontal flex layout wrap">
				<template is="dom-repeat" class="horizontal layout wrap" items="{{displayedMonth}}">
				<fc-date-mini class="card" id$="[[computeId(item)]]" in-month="[[computeNotInMonths(item)]]" toggle-days="{{toggleDays}}" style="margin: 0px auto; [[computeNotInMonths(item)]]">
					<a class="prettyDay">[[computePrettyDay(item)]]</a>
					<a class="date" on-tap="_onAnchorDateSelection">[[computeDate(item)]]</a>
				</fc-date-mini>
			
				</template>
			</section>
		</div>
		</div>
		<div>
		
	</fc-ddr-card>
</template>
<script>

FcDatePicker=Polymer({
	is: "fc-date-picker",
	behaviors:[
				Polymer.PaperInputBehavior,
			 	Polymer.IronFormElementBehavior,
				FCBehaviors.FcCalendarBehaviorPrime,
				Polymer.NeonSharedElementAnimatableBehavior
				],
	properties: {
		
		inputValue:{
				type: String,
				notify: true
		},
		isSecond:{
			type: Boolean,
			value: function(){return false;},
			notify: true
		},
		year: {
			value: "2016",
			notify: true
		},

		
		value: {
			type: String,
			notify: true
		},
		dayArray:{
			type: Array,
			computed:"_computeDayArray(displayedMonth, eventDetails)",
			notify: true
		},
		toggleDay:{
			type: Boolean,
			value: false,
			notify: true
		},
		
		days:{
			type: Array,
			value: function()
			{
					return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
			},
			notify: true
		},
		mMonth: {
			type: Date, 
			notify: true
		},
		mYear:{
			type: Date, 
			notify: true
		},
		daySelected:{
			type: Object,
			observer: "setDaysSelected",
			notify: true,
			reflectToAttribute: true
		},  

		day:{
			type: Date,
			notify: true
		},
		 animationConfig: {
        type: Object,
        value: function() {
          return {
            'entry': [{
              name: 'fade-in-animation',
              node: this.$.button
            }],
            'exit': [{
              name: 'fade-out-animation',
              node: this.$.button
            }, {
              name: 'hero-animation',
              id: 'hero',
              fromPage: this
            }]
          };
        }
   
      }
    
    },  
		

attached: function(){
		var date=new Date(2016, 0, 1);
		var dateEnd =new Date(2019, 11, 31)
		 this.calendarCreator(date, dateEnd, "months");
		},

_onAnchorDateSelection: function(event) {
      var targetOne = event.target;
      console.log(event.model.data);
      while (targetOne !== this && !targetOne._templateInstance) {
        targetOne = targetOne.parentNode;
      }
      this.set("call", targetOne.data);
      // configure the page animation
      this.sharedElements = {
        'hero': this
      };
      this.fire('on-call-click', {//this is where we pass data... we do not have a click yet... it will be on another level likely
        item: targetOne.data
      });
    },

computeDate: function(dayn){
	var date = dayn.getDate();
	return date;

},
computeId: function(date){
	var theId=date.dayStamp().toString() +"_dateMini";
	//console.log(theId);
	return theId;
},

setDaysSelected: function(newVal, oldVal)
{
	//console.log(newVal, oldVal, newVal, oldVal);


},
computeNotInMonths: function(date){
	var retVal=(this.displayedMonth[15].getFullMonth()==date.getFullMonth());
	return retVal;
},
computeYear: function(displayedMonth)
{	
	if(displayedMonth[15])
	{
	return displayedMonth[15].getFullYear();
	}
},
  trackstart: function(e){
  	var day = e.model.item;
  	console.log(day);
  	day = JSON.stringify(day);
  	e.dataTransfer.setData("fcdata", day);
  	//e.dataTransfer.setData("fcgooddate", this.computePrettyDay(day));
  	//console.log("I am a track star", e, e.detail, e.model.item);

  },
  
  _computePlacementTwo: function(isSecond){
  	var returnVal = (isSecond==true)? "position: fixed; top:24px;left: 96px; color: white;": "";
  	return returnVal;


  },

  _computeCalendarHeading: function(displayedMonth)
  {
  		if(displayedMonth[15])
  		{

  		return displayedMonth[15].getFullMonth();

  		}
  },
  computeDayStamp: function(date)
  {
        if(!date){return 0;}
        var retVal=date.dayStamp();
        return retVal;

  },
  
computePrettyDay: function(day)
 	{
  		var result = day.toDateString();
  		result = result.slice(0,10);
  		
  		return result;
 	}


});
</script>
</dom-module>
<!--
		<section class="layout vertical" on-tap="toggleDays" style="width:calc(100%/7.2)!important; background: [[computePickedDaysDark(toggleDay)]]; border-bottom: 5px solid #afafaf; margin: 1px 1px 1px 0px;height: 100%;">
						<span class="horizontal layout flex" style="font-size:8px;font-weight: 600; background: white; border-bottom: blue 2px solid; border-right: 2px solid #afafaf; text-align: center;" class="card center-justified" on-tap="toggleSelection">[[computePrettyDay(item)]]</span>
						<span class="horizontal layout flex center-justified"style="margin: auto; height: 25px; width: 25px; border-radius: 180px; font-size: 18px; border: 3px solid [[computePickedDaysWhite(toggleDay)]]; background: [[computePickedDaysDark(toggleDay)]]; text-align: center; color: [[computePickedDaysWhite(toggleDay)]];"> [[computeDate(item)]]</span>
	      			</section>
	      			computePickedDaysDark: function(toggleDay){
  	var retVal =(toggleDay==true)?"#008":"white";
  	return retVal;
  },
  toggleDays: function()
  {
  	this.toggleDay=!this.toggleDay;

  },

  computePickedDaysWhite: function(toggleDay){
  	var retVal=(toggleDay==true)?"white": "#008";
  	return retVal;

  },
-->