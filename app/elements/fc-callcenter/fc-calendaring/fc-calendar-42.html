<dom-module id="fc-calendar">
<style>
     paper-header-panel {
        float: left;
        max-width: 100%;
        min-width: calc(100%/7.7);
        max-height: 640px;
        min-height: 130px;
        margin: 3px;
        border: 2px solid #efefef;
        @apply(--shadow-elevation-2dp);
      }
      .paper-header {
        height: 28px;
        font-size: 16px;
        line-height: 24px;
        padding: 0 0px;
        color: white;
        line-height: 1;
        transition: height 0.2s;
      }
      .paper-header.tall {
        height: 120px;
      }
      .paper-header.medium-tall {
        height: 100px;
        line-height: 50px;
      }
      .content {
        height: 2000px;
      }
      .cover {
        margin: 2px;
      }
      .blue .paper-header {
        background-color: var(--paper-light-blue-500);
      }
      .red .paper-header {
        background-color: var(--paper-red-500);
      }
      .orange .paper-header {
        background-color: var(--paper-amber-500);
      }
      .green .paper-header {
        background-color: var(--paper-green-500);
      }
      .cyan .paper-header {
        background-color: var(--paper-cyan-500);
      }
      .lime .paper-header {
        background-color: var(--paper-lime-500);
      }
      .pink .paper-header {
        background-color: var(--paper-pink-a200);
      }
.toDoItem paper-icon-button[icon=delete]{
			-webkit-transition: opacity 0.5s;
			transition: opacity 0.5s;
			opacity: 0;
		}
		.toDoItem:hover paper-icon-button[icon=delete]{
			opacity: 100;
		}

		paper-button {
		  flex-shrink: 1;
		}
		paper-input {
		  flex-grow: 1;
		}

		paper-checkbox {
		  display: inline-block;
		  margin: 5px 0;
		  transition: opacity 0.3s;
		}

		paper-checkbox[checked] + .label {
		  opacity: 0.5;
		  text-decoration: line-through;
		}
	
      .blue .content {
        background: linear-gradient(white, #b3e5fc);
      }
      .red .content {
        background: linear-gradient(white, #ffcdd2);
      }
      .orange .content {
        background: linear-gradient(white, #ffecb3);
      }
      .green .content {
        background: linear-gradient(white, #c8e6c9);
      }
      .cyan .content {
        background: linear-gradient(white, #b2ebf2);
      }
      .lime .content {
        background: linear-gradient(white, #f0f4c3);
      }
      .pink .content {
        background: linear-gradient(white, #f8bbd0);
      }
</style>
<template>
	<div class="flex layout vertical fit" style="padding-bottom: 20px; margin-bottom: 24px;">
		<paper-material class="vertical flex layout center" style="max-height: 80px; background: snow;">
			<div class="horizontal layout flex" style="width: 100%">
				<section class="horizontal layout flex"  style="float: left; font-size: 16px; font-weight: 500; font-family: merriweather; text-align: left;">
				<paper-icon-button icon="icons:arrow-back" style="float:left;" on-tap="_backOneMonth">
						</paper-icon-button>
						<span>CONTROLS GO HERE</span>
				</section>
			 	<section class="horizontal layout flex-3 center-justified" style="text-align: center;">
						
						<span >[[month]] [[year]]</span>
						
				</section>
				<section class="horizontal layout flex"  style="float: right; font-size: 16px; font-weight: 500; font-family: merriweather; text-align: right;">
				
						<span>CONTROLS GO HERE</span>
						<paper-icon-button icon="icons:arrow-forward" style="float:right;" on-tap="_forwardOneMonth">
						</paper-icon-button>
				</section>
			</div>
			<div class="horizontal flex layout wrap self-stretch" style=" background: snow; width: 100%; margin-left: 2px; min-width:43vw;">
				<template is="dom-repeat" class="horizontal layout wrap" items="{{days}}">
					<paper-material
					style="border: 2px solid white;text-align: center; padding:2px; width:calc(41.2vw/6.8)!important; font-size: 20px; font-weight: 600; margin: auto; margin-bottom: 6px; background: white;">
					{{item}}
					</paper-material>
				</template>
			</div>
		</paper-material>
		<div class="vertical layout " style="min-width: 720px!important; background: white; border: 1px double red; width: 100%; max-height: 42vh;overflow-y: scroll; padding-bottom: 20px;">
			<section class="horizontal flex layout wrap self-stretch" style="width: 100%; min-width:43vw; overflow-y: scroll;">
				<template is="dom-repeat" class="horizontal layout wrap"  items="{{displayedMonth}}" as="day">
					<paper-header-panel class$="[[computeHeaderColor(day)]]" style="border-top: 1px solid silver;text-align: center; width:calc(41.2vw/7.5); margin: auto;margin-bottom: 6px; margin-top: 4px; height: 130px;">
	        			<div class="paper-header" on-tap="openDialog" style="padding-top: 3px;" day=[[day]]>
	        				[[computePrettyDay(day)]]
	        			</div>
	        			<div class="content" style="font-size: 16px; font-weight: 500; font-family: merriweather;">
	        				add here the item adder from the to-do list
						</div>
	      			</paper-header-panel>
				</template>
			</section>
		</div>
	</div>
</template>
<script>
Polymer({
	is: "fc-calendar",
	behaviors:[
				Polymer.PaperInputBehavior,
			 	Polymer.IronFormElementBehavior,
				FCBehaviors.FcCalendarBehaviorPrime,
				Polymer.NeonSharedElementAnimatableBehavior
				],
	properties: {
		myData:{
			type: Array,
			computed:"computeDataCalendar(theDate)",
			notify: true
		},
		inputValue:{
				type: String,
				notify: true
		},
		value: {
			type: String,
			notify: true
		},
		day:{
			type: String,
			notify: true
		},
		occurance: {
				type: String,
				notify: true
		},
		days:{
			type: Array,
			value: function()
			{
					return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
			},
			notify: true
		},
		dataFcid:{
				type: Object, //this should be an object with methods backwards and forwards
				notify: true
		},
		 animationConfig: {
		        type: Object,
		        value: function() {
		          return {
		            'exit': [{
		              name: 'ripple-animation',
		              id: 'ripple',
		              fromPage: this
		            }, {
		              name: 'hero-animation',
		              id: 'hero',
		              fromPage: this
		            }]
		          }
		        }
		      }

		    },

    listeners: {
      click: '_onClick'
    },

    _computeTileClass: function(color) {
      return 'tile ' + color + '-300';
    },

    _onClick: function(event) {
      var target = event.target;
      while (target !== this && !target._templateInstance) {
        target = target.parentNode;
    		}
      },

     
	attached: function(){
		this.calendarCreator();
		},
	computeDataCalendar: function(theDate){
		var days = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
		this.dayOfWeek = days[theDate.getDay()].toString();  
		var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
		this.month = months[theDate.getMonth()].toString().slice(0,3);
		console.log(this.month);
		var day = this.date = theDate.getDate().toString();
		var year = this.year = theDate.getFullYear().toString();
	},

	computePrettyDay: function(day)
	{
		var result = day.getFCMonth() + " " + day.getDate() + ", " + day.getFullYear();
		return result;
	},

	computeHeaderColor: function(day)
	{
		var numDays = this.displayedMonth.length;
		var lastDay = this.displayedMonth[numDays -1];
		console.log(day.getFCMonth(), lastDay.getFCMonth());
		var result = (day.getMonth() == lastDay.getMonth()) ? "blue": "pink";
		console.log()
		return result;
	},

	openDialog:function(e){
		console.log("selecting days");
			


	}
});
</script>
</dom-module>