<dom-module id="fc-date-card">
<style>
 :host{
          margin: 2px 2px 2px 2px;
          min-width: 39px;
          max-width: 2200
          min-height: 120px;
          max-height: 1900px;
          display: flex;
          flex: flex-shrink;
          color: #008;
          font-weight: 700;
        
         /*//position: fixed; */
        paper-header-panel{
          @apply(--paper-header: {height: 42px; color: #008;});
          @apply(--paper-header-panel: {max-width: 520px;});
        }

        };

    .todaysEvent paper-icon-button[icon=delete]{
			-webkit-transition: opacity 0.5s;
			transition: opacity 0.5s;
			opacity: 0;
		}
		.todaysEvent:hover paper-icon-button[icon=delete]{
			opacity: 1;
		}
    .forCalendar{
        margin:2px 3px 2px 3px;
        width:calc(91%/7.8)!important;

    }



		checkbox {
		  display: inline-block;
		  margin: 1px 0;
		  transition: opacity 0.3s;
		}

		paper-checkbox[checked] + .label {
		  opacity: 0.5;
		  text-decoration: line-through;
		}

</style>
<template>
<fc-ddr-card draggable=true drags="true" id$="{{Fcid}}" is-mini=true header-title="[[computePrettyDay(day)]]" class="blue flex layout vertical nowrap forCalendar" > 
    
    <fc-event-list events="{{todaysEvents}}" number-date="{{computeNumberDate(data)}}" event-day="{{data}}" item={{event}} event="{{ptestarr}}"></fc-event-list>         
 <!--   <section class="daycard">[[event.holiday]]</section>
   <section class="daycard">[[event.practiceTest]]</section>
   <section class="daycard">[[event.startTime]]</section>
   <section class="daycard">[[event.endTime]]</section> -->
   <content class="daycard"></content>
      <span on-track="_resize" style="position: absolute; bottom: 0px; right: 0px; height: 8px; width: 8px; padding: 4px; border: 2px white solid; border-radius:180px; background: aqua;"></span>  
  </fc-ddr-card>
</template> 
<script>
FcDateCard=Polymer({
	is:'fc-date-card',
  behaviors:["fcDraggableDataBehavior", "Polymer.IronResizableBehavior", "FCBehaviors.FcCalendarBehaviorPrime"],
	properties: {
     todaysEvents: {
      type: Array,
      value: function(){
        var timeSlots= [];
        return timeSlots;
      },
      notify: true
        },
    event: {
      type: Object,
      computed: "_computeEventDetails(day)",
      notify: true
    },
    data:{
        type: Object,
        notify: true
    },

    ptestarr:{
      type: Array,
      value:[],
      observer: "practiceTestObserver",
      notify: true,
      reflectToAttribute: true
    },
		drags:{
			type: Boolean, 
			value: false,
			notify: true
		},
    times:{
      type: Date,
      notify: true,
    },
    eventHidden:{
      type: Boolean,
      value: false,
      notify: true
    },
		isResizing: {
			type: Boolean,
			value: false, 
			notify: true
		},
    notFixed:{
      type: Boolean,
      value: function(){return true;},
      notify: true
    },
		isAddingEvent: {
			type: Boolean,
			value: false,
			notify: true
		},
    currentWidth:{
      type: String,
      value: function(){return"180px";},
      notify: true
    },
      isMini: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true
      },
      selected: {
        type: String,
        notify: true
      },
      currentHeight: {
          type: String, 
     	    value:function(){return "360px";},
          notify: true, 
          reflectToAttribute: true
      },
      day:{
      		type: Date,
      		notify: true,
      		reflectToAttribute: true
      },
      fcid: {
      	type: String,
        computed: "_computeFcid(data)",
      	notify: true,
      },
      id:{
      	type: String,
      	computed: "_computeId(theId, data)",
      	notify: true
      },
      theId: {
        type: String, 
        computed: "_computeRelId(data)",
        notify: true,
      },
      
    },
  
    attached: function(){
      console.log(this.data);
    	// this.center();
    },
    computeNumberDate: function(data)
    {
        console.log(data);
        var retVal=data.midnightToker();
        return retVal;
    },
    _computeEventDetails: function(data){
     //console.log(day);
      var eventDay ={};
      eventDay=this.setHolidays(data);
      console.log(eventDay);
      return eventDay;
     // console.log(eventDay.date, eventDay.holiday, eventDay);

    },

    practiceTestObserver: function(newVal, oldVal){
            console.log(oldVal);
      // if(oldVal==[]){
       console.log(newVal);
        var counter = newVal.length;
        var holder=[];
        var i=0;
        for(i=0;i<counter;i++)
        { var str=newVal[i].toLocaleString();
          console.log(str);
          if(this.data.toLocaleString() == newVal[i].toLocaleString())
            { console.log(newVal[i]);
              this.set("event.practiceTest", "Practice Test: " + newVal[i].toDateString());
              this.set("event.startTime", "Start Time: 9:00AM");
              this.set("event.endTime", "End Time: 12:35PM");
              console.log(this.data);
            }
        }
      // }


    },
    setHolidays: function(dayE){ 
      var holidayArray = [];
      holidayArray = [{"name": "Daylight Saving Time", "holiday":[2016,3,13]  }, 
        {"name": "St. Patrick's Day", "holiday":[2016,3,17] },
        {"name": "Palm Sunday", "holiday":[2016,3,20] }, 
        {"name": "Passover Begins", "holiday": [2016,3,23]  },
        {"name": "Purim", "holiday": [2016,3,24]  }, 
        {"name": "Good Friday", "holiday": [2016,3,25]  },
        {"name": "Easter", "holiday": [2016,3,27] },
        {"name": "Orthodox Good Friday", "holiday": [2016,4,29] },
        {"name": "Last Day of Passover", "holiday": [2016,4,30] }, 
        {"name": "Yom HaShoah", "holiday": [2016,5,4] }, 
        {"name": "Isra and Mi'raj, Cinco Di Mayo", "holiday": [2016,5,5]  }, 
        {"name": "MOTHERS DAY!!!", "holiday": [2016,5,8]  },
        {"name": "Memorial Day", "holiday": [2016,5,30] },
        {"name": "Ramadan Begins", "holiday": [2016,6,7]  },
        {"name": "Father's Day", "holiday": [2016,6,19] },
        {"name": "Independence Day July 4", "holiday": [2016,7,4] },
        {"name": "Labor Day", "holiday": [2016,9,5] },
        {"name": "Rosh Hashana, Muharram", "holiday": [2016,10,3] },
        {"name": "Columbus Day", "holiday": [2016,10,10]  },
        {"name": "Yom Kippur", "holiday": [2016,10,12]  },
        {"name": "Diwali", "holiday": [2016,10,29]  },
        {"name": "Halloween", "holiday": [2016,10,31] },
        {"name": "Veterans Day", "holiday": [2016,11,11]  },
        {"name": "Thanksgiving", "holiday": [2016,11,24]  },
        {"name": "Thanksgiving", "holiday": [2016,11,25]  }, 
        {"name": "Christmas Eve", "holiday": [2016,12,24] },
        {"name": "Christmas", "holiday": [2016,12,25] },
        {"name": "New Year's Eve", "holiday": [2016,12,31]  }
        ];
  
      var counter = holidayArray.length;
      var i=0;
      var eventDay={};
      eventDay.holiday='';
      eventDay.date=dayE;
      for(i=0;i<counter;i++){
        var holiday = new Date(holidayArray[i].holiday);
     // if(dayE.getDate()==4){console.log(holiday, dayE);}
        if (dayE.toLocaleString() == holiday.toLocaleString()){

           eventDay.holiday = holidayArray[i].name + " ";
           console.log(holiday, holiday, eventDay.holiday);
        }
        if (eventDay.holiday!='' && dayE.toLocaleString()!=holiday.toLocaleString())
          {return eventDay;}
      }
      return eventDay;

    },
    _computeFcid: function(data){},
    computePrettyDay: function(data)
  {
     console.log(data, result);
      var result = data.toDateString();
      
      
      return result;
  },
   
    _computeCurrentHeight: function(isMini, currentHeight){
      if(isMini==true)
      {   
        return "76px";
        this.set("isMini", false);   
      }
      else{ return currentHeight;}
    },
    _computeCurrentWidth:function(data, id, isAddingEvent){
       Polymer.dom.flush();
       var resizer = this.parentNode;
       var w = parseInt(window.getComputedStyle(resizer, null).getPropertyValue("width"));
       while(w==NaN && resizer!=document.body){
        resizer=resizer.parentNode;
        w== parseInt(window.getComputedStyle(resizer, null).getPropertyValue("width"));
console.log(w);
       } 
       var z = parse.Int(window.getComputedStyle(resizer, null).getPropertyValue("width"));
       console.log(z);
            var wn=Math.ceil(z/7.8);
      var width=wn.toString() + "px";
      
      this.notifyResize();
      return width;  
    },

    resizeMe: function(){
       Polymer.dom.flush();
       var resizer = this.parentNode;
       var w = parseInt(window.getComputedStyle(resizer, null).getPropertyValue("width"));
       while(w==NaN && resizer!=document.body){
        resizer=resizer.parentNode;
        w== parseInt(window.getComputedStyle(resizer, null).getPropertyValue("width"));

       } 
       var z = window.getComputedStyle(resizer, null).getPropertyValue("width");
       //console.log(z);
            var wn=Math.ceil(w*.8);
      var width=wn.toString() + "px";
      this.set("currentWidth", width);
      this.notifyResize();  
    },

    _computeRelId: function(data){
    	 var dayId	= data.toLocaleString();
    	 //console.log(dayId, dayId, dayId, dayId);
    	 return dayId;
    },
    _computeId:function(theId){
    	//console.log(theId, theId, theId, theId, theId, theId);
    },
});
</script>
</dom-module>

