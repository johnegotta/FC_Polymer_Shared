<script>
Date.prototype.addDays = function(days) {
       var dat = new Date(this.valueOf())
       dat.setDate(dat.getDate() + days);
       return dat;
}

Date.prototype.assignFullMonth = function()
{
	var dat = new Date(this.valueOf());
	var monArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
	return monArray[dat.getMonth()];
}


   function getDates(startDate, stopDate) {
      var dateArray = new Array();
      var currentDate = startDate;
      while (currentDate <= stopDate) {
        dateArray.push(currentDate)
        currentDate = currentDate.addDays(1);
      }
      return dateArray;
    }

// Date.prototype.addDays = function(days) {
//        var dat = new Date(this.valueOf())
//        dat.setDate(dat.getDate() + days);
//        return dat;
// }
// var numChars=Number;
// Date.prototype.assignFullMonth=function()
// { 
// 	var dat = new Date(this.valueOf());
// 	var originalInput=dat;
// 	var monArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
// 	return monArray[dat.getMonth()];
// }
// /*type [months, days] as strings to be clipped or numbers, days of week can be "gotten" with a 0 or a 1 to get M/Tu/W/Th/F/Sa/Su; argType refers to months, month, days or day; the design anticipates taking numbers or string values.*/
//  function getShortMonth(argDateArray, numChars)
// {	argDateArray=this.valueOf();
// 	var this=this.calendarObj={};
// 	var thisTwo =this.returnArray=[];
// 	if(numChars<2){numChars=2;}
// 	argDateArray.forEach(value, index, array, assignFullMonth(value).slice(0, numChars).bind(this));
// 		this.push(abbr);
// 		console.log(this);
// 	}

	
function getShortDays(numChars, argDay)
{	var shortDaysArray = [Su, M,Tu,W,Th,F,Sa];
	var singlesArray = [M,W,F];
	var dayBlocks=["M|W|F","Tu|Th"];
 	var md = argDay;
			if(numChars>2)
			{
			md=md.slice(0,numChars);
			return md;
			}
			else
				{
					var letters = md.slice(0,2);
					var lilLetters=md.slice(0,1);
					if(	shortDaysArray.indexOf(letters)!==-1)
						{
							var john = singlesArray.indexOf(lilLetters);
							console.log(singlesArray[john]);
							return singlesArray[john];
						}
					else {var retVal= shortDaysArray.indexOf(letters);
						console.log(shortDaysArray[retVal]);
							return shortDaysArray[retVal];
						}
				}
		}

// function CalendarConstructor()
// Date.prototype.createClassSchedule= function(startDate, endDate, fcidObj)	
// {



// 		}
// Date.prototype.createClassSyllabus=function(classSchedule, materialList)
// {}
// Date.prototype.getDaysOfWeekLong=function()
// {}


//    function getDates(startDate, stopDate) {
//       var dateArray = new Array();
//       var currentDate = startDate;
//       while (currentDate <= stopDate) {
//         dateArray.push(currentDate)
//         currentDate = currentDate.addDays(1);
//       }
//       return dateArray;
//     }
window.FCBehaviors = window.FCBehaviors || {};
FCBehaviors.FcCalendarBehaviorPrime = {
	properties: {
		
		 startDate:{
		 	type: Date,
		 	value: function(){ var returnVal=new Date();
		 			return returnVal;},
		 	notify: true
		 },
		 endDate:{
		 	type: Date,
		 	value: function(){ var returnVal=new Date();
		 			return returnVal;},
		 	notify: true
		 },
		displayedMonthIndex:{
			type: Number,
			notify: true
		},
		theDate:{
			type: Date,
			value: function(){var d = new Date(); return d;},
			notify: true
		},
		displayedMonth:{
			type: Array,
			value: [],
			notify: true
		},
		monthsArray:{
			type: Array,
			value: function(){return [];},
			notify: true
		},
		dayOfWeek: {
			type: String,
			notify: true
		},
		date: {
			type: Array,
			value: function(){ return [];},
			notify: true
		},
		year: {
			type: String,
			notify: true
		},
		days:{
			type: Array,
			value: function()
			{
					return ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
			},
			notify: true
		}, 
		
		month: {
			type: String,
			value:"",
			notify: true
		}


	},


	attached: function(){
	
		//console.log(this.day, this.theId);
	},

	calendarCreator: function()
	{	
		var i=0;
		var startDate = (new Date()).addDays(-30);
		var endDate = (new Date()).addDays(150);
		//console.log(startDate, endDate);
		if(endDate<=startDate)
			{
				var startDateHolder=startDate;
				startDate=[];
				startDate=endDate;
				endDate=[];
				endDate=startDateHolder; 
				//console.log(startDate, startDateHolder, endDate);
			}//date crossing condition
		while(startDate.getDay() != 0)//filling beginning week of calendar
		{
			startDate = startDate.addDays(-1);
			
		}
		//console.log(endDate);
		// var endDate = (new Date()).addDays(+1);//took care of crossing condition on start and end of utilizin talent
		while(endDate.getDay() != 6)
		{
			endDate = endDate.addDays(+1);
			
		}
		
		this.set('date', getDates(startDate, endDate));
		//console.log(this.date);
		var numDays = this.date.length;
		var currentMonth = 0; 
		for (i = 0; i < numDays; i++) 
		{
			var currDate = this.date[i];
			if(i==0)
			{	
				this.push("monthsArray", []);
				this.monthsArray[currentMonth].push(currDate);
				this.set("month", currDate.assignFullMonth());
			}
			else if(i>0)
			{
				var currDate = this.date[i];
				var yesterday = this.date[i-1];
				var dateYester = yesterday.toDateString();
				var dateToday = currDate.toDateString();
				if(currDate.assignFullMonth() != yesterday.assignFullMonth())
				{	
					this.push("monthsArray", [currDate]);
					currentMonth++;
					//we do all data at once in start, this makes the data make sense other way fine for dynamic even necessary.  Now not important less in auth context
				}
				else
				{
					this.monthsArray[currentMonth].push(currDate);
				}
			}
		}
		
		this.padMonths();
		this.set("displayedMonth", this.monthsArray[0]);
		this.set("year", this.displayedMonth[0].getFullYear());
		this.set("displayedMonthIndex",0);
		var numDizDays = this.displayedMonth.length;
		this.set("month", this.displayedMonth[numDizDays-1].assignFullMonth());
		//console.log("length", numDizDays, "index", this.displayedMonthIndex, "year", this.year, "month0", this.displayedMonth[0], "length again", this.displayedMonth.length)

	},//end of function

	padMonths: function()
	{
		var i = 0;
		var numMonths = this.monthsArray.length;
		for(i=1; i < numMonths; i++)
		{
			var month = this.monthsArray[i];
			//console.log(month);
			var lastMonth = this.monthsArray[i-1];
			var numDaysPrevMonth = this.monthsArray[i-1].length;
			var fillerDay = numDaysPrevMonth - 1;
			while (month[0].getDay() != 0)
			{
				month.unshift(this.monthsArray[i-1][fillerDay--]);
			}
			//console.log(this.monthsArray[i]);
		}
	},


	_backOneMonth:function(){
		if(this.displayedMonthIndex==0){
			var counter =this.monthsArray.length-1;
			this.set("displayedMonth", this.monthsArray[counter]);
			this.displayedMonthIndex=counter;
		}
		else{
			var diLess=this.displayedMonthIndex-1;
			this.set("displayedMonth", this.monthsArray[diLess]);
			this.displayedMonthIndex--;
		}
		var length=(this.displayedMonth.length-1);
		var month = this.displayedMonth[length].assignFullMonth();
			var year = this.displayedMonth[length].getFullYear();
			this.set("month",month);
			//console.log(year);
			this.set("year", year);
	},

	_forwardOneMonth:function(){
console.log( "index", this.displayedMonthIndex, "year", this.year, "month0", this.displayedMonth[0], "length again", this.displayedMonth.length)
		if(this.displayedMonthIndex==this.monthsArray.length-1)
		{
			this.set("displayedMonth",this.monthsArray[0]);
			this.displayedMonthIndex=0;						
		}
		else{
			var diMore=this.displayedMonthIndex+1;
			this.set("displayedMonth", this.monthsArray[diMore]);
			this.displayedMonthIndex=diMore;
			
		}
		console.log(this.displayedMonth);
		var length=this.displayedMonth.length-1;
		var month = this.displayedMonth[length].assignFullMonth();
		var year = this.displayedMonth[length].getFullYear();
			this.set("month",month);
		
			this.set("year", year);
			
	}

};
</script>