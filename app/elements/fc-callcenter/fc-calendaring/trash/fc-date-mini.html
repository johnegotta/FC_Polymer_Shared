<dom-module id="fc-date-mini">
<template>
<style>
</style>
		<section class="vertical layout flex self-shrink" on-tap="toggleDays" style="background: [[computePickedDaysDark(toggleDay, inMonth)]]; border: 1px solid #afafaf; border-top: 2px solid #afafaf; border-bottom: 5px solid #afafaf;margin: 1px 1px 1px 0px;height: 100%;">
			<section class="horizontal layout" style="font-size:8px;font-weight: 600; width: 100%;background: [[computeWhite(toggleDay, inMonth)]]; border-bottom: blue 2px solid; border-right: 2px solid #afafaf; text-align: center;" >
				<content class="horizontal layout flex" select=".prettyDay"></content>
			</section>
			<span class="horizontal layout flex center-justified"style="margin: auto; height: 25px; width: 25px; border-radius: 180px; font-size: 18px; cursor: pointer; border: 3px solid [[computeWhite(toggleDay, inMonth)]]; background: [[computePickedDaysDark(toggleDay, inMonth)]]; text-align: center; color: [[computePickedDaysWhite(toggleDay, inMonth)]];"> <content select=".date"></content></span>
		</section>
</template>
<script>
Polymer({
	is:"fc-date-mini",
	behaviors: [FCBehaviors.FcCalendarBehaviorPrime],
	properties: {
		miniDate:{
			type: Date, 
			notify: true,
		},
		toggleDay:{
			type: Boolean,
			value: false, 
			notify: true
		}, 
		inMonth: {
			type: Boolean,
			value: true,
			 reflectToAttribute: true,
			 notify: true

		}, 
		selectedArray:{
			type: Array,
			value: [],
			observer: "inSelectedArray",
			//computed: "computeSelectedArray(isSelected, selected, toggleDay)",
			notify: true
		},
		selected: {
			type: Object, 
			computed: "_computeSelected(miniDate, isSelected)",
			notify: true
			},
		isSelected: {
			type: Boolean,
			value: false,
			notify: true
		},

	},
	inSelectedArray: function(newVal, oldVal)
	{
		console.log(newVal, oldVal, this.selectedArray, this.isSelected);

	},
	_computeSelected: function(miniDate, isSelected)
	{
		var d=new Date();
		d= d.dayStamp();
				return {"id": this.id, "isSelected": isSelected, "timeStamp": d, "date": miniDate};
	},
  	computePickedDaysDark: function(toggleDay, inMonth)
  	{
  		if(inMonth===true)
  		{
  			var retVal =(toggleDay==true)?"#008":"white";
  			return retVal;
  		}
  		else
  		{
  			return "#dfdfdf";
  		}
  	},
  	toggleDays: function(e)
  	{	
  		console.log(e, e.target);
  		if(this.inMonth===true)
  		{
	  		this.toggleDay=!this.toggleDay;
	  		this.isSelected = !this.isSelected;
	  		var retSelected = this._computeSelected(this.miniDate, this.isSelected)
	  		this.push("selectedArray", retSelected);
	  		console.log(this.selectedArray, "here is the selected Array");
  		}
  	},
  	computeWhite: function(toggleDay, inMonth)
  	{
  		if(inMonth===true)
  		{
  			var retVal=(toggleDay===true)?"white": "white";
  		return retVal;
  		}
  		else 
  		{
  			return "#dfdfdf";
  		}
  	},
  	computePickedDaysWhite: function(toggleDay, inMonth){
  		if(inMonth===true)
  		{
  			var retVal=(toggleDay===true)?"white": "#008";
  			return retVal;
  		}
  		else 
  		{
  			return "#efefef";
  		}
  	},
  computeSelectedArray: function(isSelected, selected, toggleDay)
  {

  },
});
 </script>
 </dom-module>