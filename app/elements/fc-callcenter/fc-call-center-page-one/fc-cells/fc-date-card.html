<dom-module id="fc-date-card">
 
<style>
 :host{
          margin: 8px;
          min-width: 90px;
          max-width: 1300px;
          min-height: 120px;
          max-height: 1300px;
          position: fixed;   
        }
     paper-header-panel {
        float: left;
        max-width: 1280px;
        min-width: 88px;
        max-height: 1280px;
        min-height: 112px;
        margin: 4px;
        border: 4px solid #efefef;
        @apply(--shadow-elevation-2dp);
      }
      .paper-header {
        height: 36px;
        font-size: 22px;
        line-height: 30px;
        padding: 4px;
        color: white;
        transition: height 0.2s;
      }
      .paper-header.tall {
        height: 60px;
      }
      .paper-header.medium-tall {
        height: 48px;
        line-height: 40px;
      }
      .content {
        height: 2500px;
      }
      .cover {
        margin: 2px;
      }
      .blue .paper-header {
        background-color: var(--paper-light-blue-500);
      }
      .red .paper-header {
        background-color: var(--paper-red-500);
      }
      .orange .paper-header {
        background-color: var(--paper-amber-500);
      }
      .green .paper-header {
        background-color: var(--paper-green-500);
      }
      .cyan .paper-header {
        background-color: var(--paper-cyan-500);
      }
      .lime .paper-header {
        background-color: var(--paper-lime-500);
      }
      .pink .paper-header {
        background-color: var(--paper-pink-a200);
      }
.toDoItem paper-icon-button[icon=delete]{
			-webkit-transition: opacity 0.5s;
			transition: opacity 0.5s;
			opacity: 0;
		}
		.toDoItem:hover paper-icon-button[icon=delete]{
			opacity: 100;
		}

		paper-button {
		  flex-shrink: 1;
		}
		paper-input {
		  flex-grow: 1;
		}

		paper-checkbox {
		  display: inline-block;
		  margin: 5px 0;
		  transition: opacity 0.3s;
		}

		paper-checkbox[checked] + .label {
		  opacity: 0.5;
		  text-decoration: line-through;
		}
	
      .blue .content {
        background: linear-gradient(white, #b3e5fc);
      }
      .red .content {
        background: linear-gradient(white, #ffcdd2);
      }
      .orange .content {
        background: linear-gradient(white, #ffecb3);
      }
      .green .content {
        background: linear-gradient(white, #c8e6c9);
      }
      .cyan .content {
        background: linear-gradient(white, #b2ebf2);
      }
      .lime .content {
        background: linear-gradient(white, #f0f4c3);
      }
      .pink .content {
        background: linear-gradient(white, #f8bbd0);
      }
</style>
<template>

<iron-icon 
            icon="icons:highlight-off" 
            name="fc-dialog-closer"
        
            description="designed to close the dialog"
            class="menuItems-light"
            dialog-dismiss
            style="position: absolute; z-index: 45; border-radius: 180px; background: red; width: 20px; height: 20px; border-shadow: 11px 4px 18px 7px #afafaf; right: 8px; top: 9px;"
          >
      </iron-icon>

  <paper-header-panel id="myDialog" drags="true" style$="height: [[currentHeight]]; width: [[currentWidth]];" id$="{{relId}}" class="blue">


     <div class="paper-header"  on-track="_focusedDraggable" style="text-align: center;">
     [[day]]
     </div>
  
        <div class="content">
    <!--  <textarea rows="40" cols="18"value="Hi! Am Text Area!" value="{{inputValue}}"></textarea> -->    	
		</div>
      </paper-header-panel>
        <iron-icon 
            icon="icons:aspect-ratio" 
            name="fc-resizer"
            on-track="_resize"
            track
            draggable="true"
            description="the dragable edge of a panel intended to change height"
            class="menuItems-light"
            style="position: absolute;border-radius: 180px; width: 16px; height: 16px; right: -8x; bottom: 8px; margin-left: -24px; background: gold;"
          >
      </iron-icon>
 


</template>
    <script>
FcDateCard=Polymer({
	is:'fc-date-card',
	behaviors:[
      Polymer.PaperDialogBehavior,
      Polymer.NeonAnimationRunnerBehavior
    ],
    listeners: {
      'neon-animation-finish': '_onNeonAnimationFinish'
    },
	properties: {
		drags:{
			type: Boolean, 
			value: true,
			notify: true
		},
		isResizing: {
			type: Boolean,
			value: false, 
			notify: true
		},
		isAddingEvent: {
			type: Boolean,
			value: false,
			notify: true
		},
		inputValue: {
				type: String,
				notify: true,
				reflectToAttribute: true

		},
		noCancelOnOutsideClick:{
			type: Boolean,
			value: function(){return true;},
			notify: true
		},
selectionArray: {
        type: Array,
        value: function(){
          return [
                'first', 
                'second', 
                'third', 
                'fourth'
          ];
        },
        notify: true
      },
 
      selected: {
        type: String,
        notify: true
      },
      currentWidth: {
          type: String, 
          value: function(){
                    return '280px';
              },
          notify: true, 
          reflectToAttribute: true
      },
      currentHeight: {
          type: String, 
     	  value:function(){ return "280px";},
          notify: true, 
          reflectToAttribute: true
      },
      day:{
      		type: String,
      		notify: true,
      		reflectToAttribute: true
      },
      theId: {
      	type: String, 
      	notify: true,
      },
      id:{
      	type: String,
      	computed: "_computeId(theId, day)",
      	notify: true
      },
      dragCorrection: {
      	type:Number,
      	value: function(){return 0;},
      	notify: true
      }
    },
    attached: function(){
    	this.center();
    	
    },
    goDialog: function(){
      this.$.myDialog.opened=!this.$.myDialog.opened;


    },
    _computeCurrentHeight: function(relId){
    	var ht="350px";
    	if(currentHeight==undefined) {return ht;}
    	else{ this._resize(e);
    	}
    },
    _computeId: function(theId, day){
    	console.log(theId, day, day, day, day, theId);



    },
    computeSelected: function(selectionArray){
      return "[name=first]";
    },
    _renderOpened: function() {
      if (this.withBackdrop) {
        this.backdropElement.open();
      }
      this.playAnimation('entry');
    },
    _renderClosed: function() {
      if (this.withBackdrop) {
        this.backdropElement.close();
      }
      this.playAnimation('exit');
    },
    _onNeonAnimationFinish: function() {
      if (this.opened) {
        this._finishRenderOpened();
      } else {
        this._finishRenderClosed();
      }
    },
    _computeRelId: function(day){
    	 var dayId	= day.replaceAll("\\s+","");
    	 console.log(dayId, dayId, dayId, dayId);
    	 return dayId;
    },
    computeId:function(theId){
    	console.log(theId, theId, theId, theId, theId, theId);
    },
    _resize: function(e){
          var self=this;
          e.preventDefault();
          switch(e.detail.state) {
                case 'start':
                var theId=this.relId;
                var elem=this.$$(theId);
                 break;
                case 'track':
                  var newheight = parseInt(self.currentHeight) + e.detail.ddy;
                  var nwidth = parseInt(self.currentWidth) + e.detail.ddx;
                  var trueWidth = nwidth.toString()+'px';
                  var trueHeight = newheight.toString()+'px';
                  
           
                  self.currentWidth=trueWidth;
                  self.currentHeight=trueHeight;
                  self.style.width= trueWidth;
                  self.style.height= trueHeight;
                
                  break;
                case 'end':
                  self.notifyResize();
                  self.ironResize;
                  Polymer.dom.flush();
                  break;
              }
       
        },
        _closeDialog: function(){
          this.$.myDialog.close();
        },


  _focusedDraggable:function(e){
  	console.log("we tried to drag");
  	 if(this.drags==true){
        var self=this;
        e.preventDefault();
switch(e.detail.state) {
          case 'start':
            console.log('START NoWayAreWe Draggin');
            console.log(e);
            if (this.dragCounter<1){
              self.style.left=0;
              self.style.top=0;
              this.dragCounter++;
            }
            self._leftprime = parseInt(window.getComputedStyle(self, null).getPropertyValue("left"))-e.detail.x;
            self._topprime = parseInt(window.getComputedStyle(self, null).getPropertyValue("top"))-e.detail.y;
            console.log('top distance differenced?' + self._topprime);
            // }
            self.changeX=0;
            self.changeY=0;
            Polymer.dom.flush();
            break;
          case 'track':
            self.changeX=e.detail.ddx + self.changeX;
            self.changeY=e.detail.ddy + self.changeY;
            self.translate3d(self.changeX.toString() + 'px', self.changeY.toString() + 'px', 0);
            break;
          case 'end':
            console.log(self._topprime);
            self._right = parseInt(window.getComputedStyle(self, null).getPropertyValue("right"))
            self._bottom = self.getBoundingClientRect().top;
            self._x= ((self._leftprime + e.detail.x)>=0)?(self._leftprime + e.detail.x): 0;
            self._y=((self._topprime + e.detail.y)>=0)?Math.ceil(self._topprime + e.detail.y):0;
            self.translate3d(0, 0, 0);

            console.log("ENDING", self._x);
            self.style.left=self._x.toString()+'px';
            self.style.top=self._y.toString()+'px';
            console.log('y: ' + e.detail.y);
            self.dragging=false;
            Polymer.dom.flush();
            break;
        }
      }
    }

});
</script>
</dom-module>