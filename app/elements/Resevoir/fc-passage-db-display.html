<dom-module id="fc-passage-db-display">
<template>
<style>
:host {
	padding-left: 12px;
	margin-left: 24px;
	position: relative;
	top: 0px;
	font-size: 16pt;
	bottom: 0px;
	height: 96vh;
	right: 0px;
	left: 0px;
	display: flex;
    }
    div.line-number {
	width: 28px;
	height: 20px;
	line-height: 1.2;
	font-size: 16pt;
	/*font-size: 1.25em;*/
	font-family: merriweather;
	font-weight: 500;
	font-style: italic;
	padding: 2px 4px;
	margin: 5px;
    }
    paper-textarea, paper-input{
    	padding: 12px;
    }
    .blurb-class{
    	max-width: 670px; 
    	padding: 4px 0px 4px 8px; 
    	font-size: 12pt; 
    	line-height: 1.05;
    	font-style: oblique;
    }
    .highlighted {
	background: yellow;
    }
    div.text {
	line-height: 1.2;
	font-size: 16pt;
     /* font-size: 1.25em;*/
	font-family: merriweather;
	font-weight: 500;
	padding: 2px 4px 8px 4px;
	margin: 5px;
	min-height: 900px !important;
	display: flex;
	min-width: 420px !important;
	max-width: 680px !important;
    }
</style>
<paper-header-panel class="vertical layout flex" style="height: 91vh; margin:12px 10px; padding: 6px 6px 24px 6px; font-weight: 600; background: #fff; border: 3px solid silver; color: #000088;">
	    <paper-material class="paper-header header-panel head horizontal layout" style="min-hieght: 60px; max-height: 90px; padding: 12px 6px 12px 6px; font-weight: 600; text-align: center; background: aliceblue; font-size: 20px; border-bottom: 1px solid #000088; color: #000088;">

	    <section class="horizontal layout flex-2 nowrap">	
			<array-selector 
				id="selector" 
				items="{{menuItemArray}}" 
				selected="{{selected}}" 
				multi 
				toggle>
			</array-selector>

	    	<fc-dropdown-menu 
	    		class="flex layout horizontal"							
		  		style="min-width: 360px; max-width: 96%" 
		  		on-select="toggleSelection"
		  		id="passagesListFromDB"
		  		data-source="{{menuItemArray}}" 
		  		selected="{{selected}}"
		  		return-item-key="{{selectedItemKey}}"
		  		>
		  	</fc-dropdown-menu>
		</section>
	  </paper-material>
	   <div class="layout vertical flex" style="height: 1900px;">
	     		<section class="blurb-class">
	     			<p>[[selected.itemValue.0.passageType]]</p>
	     			<p>[[selected.itemValue.0.passageBlurb]]</p>
	     		</section>
		<div class="layout horizontal flex nowrap container" style="min-height: 5000px; padding: 2px 0px 6px 8px;">
		<div id="lineNumbers" class="layout vertical line-number">
		  <div class="line-numbers" id="linesA1">Lines</div>
		    <template is="dom-repeat" items="{{lineNumberArray}}" filter="{{_numberFilter(lineNumbers)}}">
			  <span hidden="{{!item.show}}" id$="LN{{item.number}}">{{item.number}}</span>
			  <span hidden="{{item.show}}">&nbsp</span>
		    </template> 
		  </div>
			  <!--passage-1-column-1 container-->
	    <div id="firstColumn" class="layout horizontal flex wrap text">
		<article id="textColumnOne" style="margin: 2px 2px 2px 2px; padding: 0ps 3px 0px 8px; max-width: 600px;">
	
		  <template is="dom-repeat" items="{{selected.itemValue}}" id="aDarnedTemplate2" filter="">
			<template is="dom-if" if="{{item.newPara}}">
			  <br><span>&nbsp&nbsp&nbsp&nbsp</span>
			</template>
			<a id$="A[[item.wordIndex]]" hidden$="{{item.is_transitionWord}}">{{item.word}}</a>
		     <a id$="A[[item.wordIndex]]_transition" style="" hidden$="{{!item.is_transitionWord}}">{{item.word}}</a>
		  
		  	</template>
		  	<br class="line-numbers">
		  	<hr>
		  	<div id="focusedMark" class="right-justified line-numbers" style="float:right; text-align: right;" id="singleColumnBounder"> Focused Coaching (c) 2016</div>
		</article>
	    </div>
	    </div>
	  </div>
	  </paper-header-panel> 
	</template><!--the arrays below should contain useful subPropertieslike their length;-->
<script>
FcPassageDbDisplay=Polymer({
	is: "fc-passage-db-display",
	behaviors: [Polymer.IronResizableBehavior,
				//FCBehaviors.MetaObjectSavingBehavior,
				FCBehaviors.FcPassageLocalDataBehavior,
				FCBehaviors.FcSingleColumnLineNumberBehavior
				],
	listeners: {'iron-resize': '_onIronResize',
				'notifyResize': 'setMeasureParams'},
	properties: {
	 
	estimatedHeight: {
			type: Number,
			value: function(){
			  var estimatedHeight=Math.ceil(screen.height*.795);
		 	return estimatedHeight;
			},
			notify: true,
	    }, 
	
	
    passageObject: {
    	type: Object,
    	 notify: true
    },
  
}, //end of properties
	ready: function(){
	 this.addEventListener("mouseover", this.setMeasureParams);
	},
	_computeSelectedQuestions: function (selected){
	var returnValue = selected.relatedItemKey; 
	return returnValue;
},
	toggleSelection: function(e){
	
		
		console.log(e);
	},
	
	_computeSharedSelection:function(selected){
	 		var returnValue = this.menuItemArray.questionItemKey;
	 		return returnValue; 
	 },
	attached: function(){
		this._getAndSetLocalOrDatabase();
		this.setMeasureParams();
	},
	

_theContentFilter: function(firstWordIndex, lastWordIndex) {
	
		return true;

  },
  _numberFilter: function(lineNumbers) {
	return (item) =>{
	  return (item.number <= lineNumbers);
	    };
	  } 			
});
</script>
</dom-module>