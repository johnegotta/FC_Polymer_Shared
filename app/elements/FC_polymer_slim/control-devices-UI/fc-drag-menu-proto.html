<dom-module id="fc-drag-menu-proto">
<style>
:host {position:fixed;}
.edged{
  outline-width: 0px;
}
.menuItems-dark{
  color: #000066;
}
.menuItems-light{
  color: #aedafd;
}
.menubuttons{
  display: inline-block; 
  width:78px; 
  height: 48px;
}
iron-icon.selected{
        height: 32px;
        width: 32px;
        color: #000066;
        background: #aecdfe;
      }
</style>
<template>
  <paper-tabs id="dragMenu" draggable="true" style="max-height: 96px; min-height: 24px; min-width: 250px; background: #000066;"> 
        
    <iron-icon 
            name="fcdragtag"
            on-track="dragmeplease" 
            draggable="true" 
            dragging
            icon="icons:label-outline"  
            description="the dragable edge of the card"
            class="menuItems-light"
          >
    </iron-icon>

    <button>
      <span 
        on-tap="_toggleLeftDrawer" 
        class="menuItems-dark" 
        style="font-size: 1.1em;"
        >
      L
        <iron-icon 
            icon="icons:swap-horiz"  
            on-mousedown="doSomething"
            class="menuItems-dark"
          >
        </iron-icon>
      </span>
    </button>
<button>
        <iron-icon  
            icon="icons:perm-identity"  
            on-tap="_menuLaunch,"
            name: "loginAndProfile"
            id:'drag-menu{{dragmenuid}}'
            description: 'a button designed to launch a modal loginrform and profile'
            class="menuItems-dark dropdown-trigger"
            pressed='{{!pressed}}'
          >
        </iron-icon>
</button>
    <button>
        <iron-icon 
           
            icon="icons:spellcheck"  
        
            class="menuItems-dark"
          >
        </iron-icon>
    </button>
    

    <button>
        <iron-icon 
           
            icon="icons:visibility"  
        
            class="menuItems-dark"
          >
        </iron-icon>
    </button>

  <button>
        <iron-icon 
           
            icon="icons:view-list"  
        
            class="menuItems-dark"
          >
        </iron-icon>
    </button>

  
    
    <button>
        <iron-icon 
            icon="icons:stars"  
            track
            class="menuItems-dark"
          >
        </iron-icon>
    </button>
    
    <button>
    <iron-icon         
            id="theBest" 
            dragging
            icon="icons:account-circle"  
            track
            class="menuItems-dark"
            wanted="av:repeat"
          >
    </iron-icon>
    </button>
    <button>
    <iron-icon         
            id="theBest" 
            dragging
            icon="icons:account-circle"  
            track
            class="menuItems-dark"
            wanted="av:repeat"
          >
    </iron-icon>
    </button>

    <button>
        
        <span on-tap="_toggleRightDrawer" 
          class="menuItems-dark" 
          style="font-size: 1.1em;"
          >
          <iron-icon 
              icon="icons:swap-horiz"  
              class="menuItems-dark"
          >
          </iron-icon>
    <b>R</b>
    </span>
    </button>
   
        <iron-icon
            
            track
            icon="icons:input"  
            on-track="_resizer"
            class="menuItems-light"
            >
        </iron-icon>
   
  </template>      
</paper-tabs>
<script>
FcDragMenuProto = Polymer({
	is:'fc-drag-menu-proto',
	behaviors: [
		Polymer.IronResizableBehavior,
		Polymer.NeonAnimationBehavior,
		Polymer.IronSelectableBehavior,
		Polymer.NeonAnimationRunnerBehavior,
		Polymer.IronMenubarBehavior,
		Polymer.IronRangeBehavior],
	properties: {
          	class: {
                type: String,
                value: function(){
                    return 'horizontal layout'
                }, 
                notify: true,
                reflectToAttribute: true
               },
               newWidth:{
                  type: Number,
                  computed: 'computeNewWidth(base, delta)',
                  notify: true
              },
                base:{
                  type: Number,
                  value: function(){return 620;},
                  notify: true
                },
                slide:{
                        type: Boolean,
                        value: false,
                        notify: true
                },
                delta: {
                  type: Number, 
                  animationcomputed: '_extendWidth(base)',
                  notify: true
                },

                _leftHidden: {
                  type: Boolean,
                  value: false
                },
                _rightHidden: {
                  type: Boolean,
                  value: false
                },
                _previousButton: {
                  type: Object
              },
              hostAttributes: {
                role: 'tabList'
              },
              listeners: {
                'iron-resize': '_onResize',
                'iron-select': '_onIronSelect',
                'iron-deselect': '_onIronDeselect'
              },
              hostAttributes: {
                'role': 'menubar'
              },
              keyBindings: {
                'left': '_onLeftKey',
                'right': '_onRightKey'
              } 
          },
    
    created: function() {
      this._holdJob = null;
    },
    ready: function() {
      this.setScrollDirection('y', this.$.tabsContainer);
    },
    attached: function(){
    },
  _computeScrollButtonClass: function(hideThisButton, scrollable, hideScrollButtons) {
      if (!scrollable || hideScrollButtons) {
        return 'hidden';
      }
      if (hideThisButton) {
        return 'not-visible';
      }
      return '';
    },
    _computeTabsContentClass: function(scrollable) {
      return scrollable ? 'scrollable' : 'horizontal';
    },
    _computeSelectionBarClass: function(noBar, alignBottom) {
      if (noBar) {
        return 'hidden';
      } else if (alignBottom) {
        return 'align-bottom';
      }
    },
    
     _onResize: function() {
      this.debounce('_onResize', function() {
        this._scroll();
        this._tabChanged(this.selectedItem);
      }, 10);
    },
    _onIronSelect: function(event) {
      this._tabChanged(event.detail.item, this._previousTab);
      this._previousTab = event.detail.item;
      this.cancelDebouncer('tab-changed');
    },
    _onIronDeselect: function(event) {
      this.debounce('tab-changed', function() {
        this._tabChanged(null, this._previousTab);
      // See polymer/polymer#1305
      }, 1);
    },
    get _tabContainerScrollSize() {
      return Math.max(
        0,
        this.$.tabsContainer.scrollWidth -
          this.$.tabsContainer.offsetWidth
      );
    },

    	_toggleRightDrawer: function(){
			var drawer = document.querySelector('#drawer-2');	
			if(drawer.forceNarrow!==true)
			{drawer.forceNarrow = true;}
			else{drawer.forceNarrow = false;
			}
	},
	_toggleLeftDrawer: function(){
		var drawer = document.querySelector('#drawerPrimed');
          var dashboard = document.querySelector("#dashboardPrime");	
		if(drawer.forceNarrow!==true)
          {
               drawer.forceNarrow = true;
               drawer.responsiveWidth='90000px';
               dashboard.leftHidden=true;
          }
          else
          {
               drawer.forceNarrow = false;
               drawer.responsiveWidth ='1080px';
               dashboard.leftHidden=false;

          }
     },
	
  computebasePlusDelta: function(e, base){
            return (base + 1000);
  },

	dragmeplease: function(e) {
     this.dragging=true;
        var self=this;
       // var dragbox = this.$.dragMenu.getBoundingClientRect();
      e.preventDefault();
        switch(e.detail.state) {
          case 'start':
            self._x = e.detail.x;
            self._y = e.detail.y;
            console.log('START');
            console.log(e);
            break;
          case 'track':
            self._ddx = e.detail.ddx; //last event x change
            self._ddy = e.detail.ddy; //last event y change
            self._dx = e.detail.dx; //from start x change 
            self._dy = e.detail.dy; // from start y change
            self.translate3d(self._dx.toString() + 'px', self._dy.toString() + 'px', 0);
            break;
          case 'end':
            console.log("ENDING", e.detail.x, e.detail.y, e.detail.dx, e.detail.dy);
            self.translate3d(0, 0, 0);
            self.style.left = e.detail.x.toString() + 'px';
            self.style.top = e.detail.y.toString() + 'px';
            self.dragging=false;
            break;
        }
     },
 
 _lockMenu: function(){
     this.lockMenu=!this.lockMenu;
 },
 onLocked: function(){
  Polymer.dom(this).setAttribute('');
 }
 

});
  </script>
</dom-module>
