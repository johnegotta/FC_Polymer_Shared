<dom-module id="fc-login-dialog">
	<template>
		<style>
			:host{

    			}
.firstfcheader{
        font-family: Merriweather;
        font-size: 26px;
        font-weight: 700;
        color: #000066;
      }
			.menubuttons{
			 	display: inline-block; 
			  	width: 42px; 
			  	height: 36px;
			}
			.menuItems-dark{
			  	color: #000066;
			   	vertical-align: center;
			  
			}
			.fc-thirdheader{
				font-family: Merriweather;
				font-size: 16px;
				font-weight: 700;
				color: #000066;
			}

			.Logged-In{
				font-family: Merriweather;
				font-size: 16px;
				font-weight: 700;
				color: green;
			}

			.Logged-Out{
				font-family: Merriweather;
				font-size: 16px;
				font-weight: 700;
				color: red;

			}

			.login{
				background: white; 
				border: 4px double #000066;
				min-width: 320px;
				max-width: 420px;
			    	min-height: 340px;
			    	max-height: 440px;
			    	box-shadow: 10px 5px 5px #afafaf;
			     	padding: 6px 8px 6px 8px;
			    	margin: 6px; 
			}

			#loginMenu{
				position: fixed;
				left: 50%;
				top: 30%;
			}

			.buttonclass{
			 	min-height: 42px;
			 	min-width: 42px;
			 	display: inline-block;
			 	padding: 12px;
			 	margin-left: 24px;
			 	border: 2px ridge silver;
			}
		</style>
        	<firebase-auth 
        		id="firebaseLogin" 
        		user="{{user}}" 
        		status-known="{{statusKnown}}" 
        		location="focused0ne.firebaseio.com" 
        		provider="password" 
        		on-error="errorHandler" 
        		on-user-created="userSuccessHandler" 
        		on-password-changed="userSuccessHandler" 
        		on-password-reset="userSuccessHandler" 
        		on-user-removed="userSuccessHandler" 
        		on-firebase-login="changeStatus">
        	</firebase-auth>

		
		<paper-dialog 
			id="loginMenu" 
			class="login"
			>
      <div class="firstfcheader horizontal layout flex nowrap" >
     <img style="position: absolute; top: 0; left: 0; width:60px; height: 80px;"src="../../../images/icon_menu/sail-icons/dblue_sail_small.png"></img>  
     <span style="margin-left: auto; margin-right: auto;">Focused Coaching Login</span>



      </div>
      <hr style="height: 2px; background: #000066;" >
			<gold-email-input 
				label="Email" 
				class="fc-thirdheader" 
				auto-validate 
				required 
				value="{{email}}"
				>
          		</gold-email-input>
          		<paper-input 
          			label="Password" 
          			name="login_password" 
          			class="fc-thirdheader" 
          			type="password" 
          			required 
          			value="{{password}}"
          			>
          		</paper-input>
          		<paper-button
          			raised 
          			on-tap="login" 
          			class="center center-justified Logged-In buttonclass" 
          			hidden$="{{computeLoginHidden(statusKnown, user)}}"
          			>
          			Login
          		</paper-button>
          		<paper-button 
          			raised 
          			on-tap='newUser' 
          			class="center center-justified Logged-In buttonclass" 
          			hidden$='{{computeLoginHidden(statusKnown, user)}}'
          			>
          			Create a Login
          		</paper-button>
          		<paper-button 
          			raised 
          			on-tap="logout" 
          			class="center center-justified Logged-Out buttonclass" 
          			hidden$="{{computeLogoutHidden(statusKnown, user)}}"
          			>
          			Logout
          		</paper-button>
              <paper-button 
                raised 
                on-tap="viewProfile" 
                class="center center-justified Logged-In buttonclass" 
                hidden$="{{computeLogoutHidden(statusKnown, user)}}"
                >
                View Profile
              </paper-button>
			<div 
				class="horizontal layout flex wrap"
				>
    				<span class="fc-thirdheader">Login Status: </span> &nbsp<span class$="{{computeLoginStatus(statusKnown, user)}}">{{computeLoginStatus(statusKnown, user)}}</span>
			</div>
			<div class="horizontal layout flex wrap">
   				<span> <span class="fc-thirdheader">User ID: </span> <span class$="{{computeLoginStatus(statusKnown, user)}}" hidden$="[[!user]]">{{user.uid}}</span></span>
			</div>  
     		</paper-dialog>
  	</template>
	<script>
  Polymer({
    is: 'fc-login-dialog',

    properties: {
      provider: {
        type: String,
        value: 'password'
      },

      message: {
        type: String,
        value: ''
      },

      email: {
        type: String,
        value: ''
      },

      password: {
        type: String,
        value: ''
      },

      pressed: {
        type: Boolean,
        value: false,
        notify: true
      },

      user: {
        type: Object,
        value: null,
        notify: true
      },

      statusKnown: {
        type: Boolean,
        notify: true
      }
    },
    _openMenu: function(){
    	this.$.loginMenu.open();
    },
    login: function() {
      var params = {'email':this.email,'password':this.password};
      this.$.firebaseLogin.login(params);
    },
    logout: function() {
      this.$.firebaseLogin.logout();
    },
    newUser: function(){
      this.$.firebaseLogin.createUser(this.email, this.password);
    },
    errorHandler: function(e) {
      alert('Error: ' + e.detail.message);
    },
    computeLoginHidden: function(statusKnown, user) {
      return !statusKnown || !!user;
    },
    computeLogoutHidden: function(statusKnown, user) {
      return !statusKnown || !user;
    },
    computeLoginStatus: function(statusKnown, user) {
      if (statusKnown && user) {
        return 'Logged-In';
      }
      if (statusKnown) {
        return 'Logged-Out';
      }
      return 'Unknown (checking status...)';
    }
  });
</script>
</dom-module>