<dom-module id="fc-dialog">
<template>
<style>
:host {
      padding-left: 12px;
      margin-left: 6px;
      position: relative;
      top: 0px;
      font-size: 16pt;
      bottom: 0px;
      height: 99vh;
      right: 0px;
      left: 0px;
      display: flex;
      min-width: 96%;
      max-width: 99vw;
    }
    div.line-number {
      width: 28px;
      height: 20px;
      line-height: 1.2;
      font-size: 16pt;
      /*font-size: 1.25em;*/
      font-family: merriweather;
      font-weight: 500;
      font-style: italic;
      padding: 2px 4px;
      margin: 2px;


    }
    /*div.columnContainer{
      overflow-y: scroll;
    }*/

    .highlighted {
      background: yellow;
    }

    div.text {
      line-height: 1.2;
      font-size: 16pt;
     /* font-size: 1.25em;*/
      font-family: merriweather;
      font-weight: 500;
      padding: 2px 0px 8px 4px;
      margin: opx 0px 6px 0px;
      min-height: 2500px !important;
      display: flex;
      min-width: 300px !important;
      max-width: 720px !important;
    }
</style>            

        <fc-resizing-drag-panel class="vertical layout flex wrap text" header-mode="waterfall" style="margin: 12px; padding: 12px 84px 12px 36px; border: 3px ridge silver;">
                     <div class="paper-header" id="headerPanel" style="margin-bottom: 12px; border-bottom: 2px solid black;"> 
                      <array-selector id="selector" items="{{passagesWordArrays}}" selected="{{selected}}" multi toggle>
                      </array-selector>

          <fc-dropdown-menu style="min-width: 360px;" on-select="toggleSelection" id="passagesList" data-source="{{passagesWordArrays}}" selected="{{selected}}">
          

          </fc-dropdown-menu>
                         
                      
                          </div>

          <div class="layout vertical flex main-content super-content">
           <section style="max-width: 780px; padding: 4px 0px 4px 18px; font-size: 12pt; line-height: 1.05;">[[selected.0.passageBlurb]]</section>
            <div class="layout horizontal flex nowrap container" style="max-width: 1300px; min-height: 5000px; padding: 2px 0px 12px 8px;">
            <div id="line-numbers" class="layout vertical line-number">
              <div class="line-numbers" id="linesA1">Lines</div>
                <template is="dom-repeat" items="{{lineNumberArray}}" filter="{{_numberFilter(lastRowIndex)}}">
                    <span hidden="{{!item.show}}" id$="LN{{item.number}}">{{item.number}}</span>
                    <span hidden="{{item.show}}">&nbsp</span>
                </template> 
              </div>
                    <!--passage-1-column-1 container-->
          <div id="firstColumn" class="layout horizontal flex wrap text">
            <article id="textColumnOne" style="margin: 2px 2px 8px 2px; padding: 0ps 3px 0px 16px;">
              <template is="dom-repeat" items="{{selected}}"  filter="{{_theContentFilter(firstWordIndex, lastWordIndex)}}">
                  <template is="dom-if" if="{{item.newPara}}">
                    <br><span>&nbsp&nbsp&nbsp&nbsp</span>
                  </template>
                  <a id$="A[[item.wordIndex]]" hidden$="{{item.is_transitionWord}}">{{item.word}}</a>
                 <a id$="A[[item.wordIndex]]_transition" style="background:green;"hidden$="{{!item.is_transitionWord}}" >{{item.word}}</a>
              
              </template>
              <br class="line-numbers">
              <hr>
              <div class="right-justified line-numbers" style="float:right; text-align: right;" id="singleColumnBounder"> Focused Coaching (c) 2016</div>
            </article>
            <code style="opacity: 0;">[[passageOneWordArray.0.passageType]]</code>
          </div>
          </div>
        </div>                    
    </fc-resizing-drag-panel>

                     
            

                   
</template>
<script>
'use strict';
    (function() {
      class fcDialog {
         get behaviors() { 
          return [
              Polymer.IronResizableBehavior
              ];
         }
           beforeRegister() {

            this.is = 'fc-dialog';
          this.properties = {
        
          estimatedHeight: {
            type: Number,
            value: function(){
              var estimatedHeight=Math.ceil(screen.height*.895);
             return estimatedHeight;
            },
            notify: true,
            reflectToAttribute: true 
          }, 
          passagesWordArrays:{
            type: Array,
            value: function(){return []},
            notify: true
          },
          lineNumberArray: {
              type: Array,
              computed: '_computeLineNumberArray(passageOneWordArray, lastRowNode)',
              notify: true
              },
        
          passageOneWordArray: {
            type: Array,
            computed: '_computePassageOneWordArray(passagesTestOne)',
            observer: 'gotContent',
            notify: true
          },
          passageTwoWordArray:{
            type: Array,
            computed: '_computePassageTwoWordArray(passagesTestOne)',
            notify: true
          },
          passageThreeWordArray:{
            type: Array,
            computed: '_computePassageThreeWordArray(passagesTestOne)',
            notify: true
          },
          passageFourWordArray:{
            type: Array,
            computed: '_computePassageFourWordArray(passagesTestOne)',
            notify: true
          },
          doublePassageWordArray: {
            type: Array,
            computed: '_computeDoublePassageWordArray(passagesTestOne)',
            notify: true

          },
          firstRowIndex: {
            type: Number,
            value: 1,
            notify: true
          },

          lastRowIndex:{
            type: Number,
            value: 1,
            notify: true,
            reflectToAttribute: true
          },
          passagesTestOne: {
              type: Array,
              value: function(){
                return [

                     { 'menuLabel':  `Reading Passages From College Board Test One: (C) 2016`,
                       'menuName':  `Reading_Passages_From_College_Board_Test_One__0001_2016`
                     },
                      {'menuLabel': `Passages From College Board Test One: (C) 2016`,
                      'passageType': `fiction, personal narration, period Modernist Japan, classes, social order`,
                      'blurb': `This passage is from Lydia Minatoya, “The Strangeness of Beauty. ©1999 by Lydia Minatoya.” The setting is Japan in 1920. Chie and her daughter Naomi are members of the House of Fuji, a noble family.\n \n`,
                      'passage': `Akira came directly, breaking all tradition. Was that it? Had he followed form—had he asked his mother to speak to his father to approach a go-between—would Chie have been more receptive? \n He came on a winter’s eve. He pounded on the door while a cold rain beat on the shuttered veranda, so at first Chie thought him only the wind. The maid knew better. Chie heard her soft scuttling footsteps, the creak of the door. Then the maid brought a calling card to the drawing room, for Chie. \n Chie was reluctant to go to her guest; perhaps she was feeling too cozy. She and Naomi were reading at a low table set atop a charcoal brazier. A thick quilt spread over the sides of the table so their legs were tucked inside with the heat.  \n “Who is it at this hour, in this weather?” Chie questioned as she picked the name card off the maid’s lacquer tray. \n “Shinoda, Akira. Kobe Dental College,” she read. \n Naomi recognized the name. Chie heard a soft intake of air. \n “I think you should go,” said Naomi. \n Akira was waiting in the entry. He was in his early twenties, slim and serious, wearing the black military-style uniform of a student. As he bowed-his hands hanging straight down, a black cap in one, a yellow oil-paper umbrella in the other—Chie glanced beyond him. In the glistening surface of the courtyard’s rain-drenched paving stones, she saw his reflection like a dark double. \n “Madame,” said Akira, “forgive my disruption, but I come with a matter of urgency.” \n His voice was soft, refined. He straightened and stole a deferential peek at her face. \n In the dim light his eyes shone with sincerity. Chie felt herself starting to like him. \n “Come inside, get out of this nasty night. Surely your business can wait for a moment or two.” \n “I don’t want to trouble you. Normally I would approach you more properly but I’ve received word of a position. I’ve an opportunity to go to America, as dentist for Seattle’s Japanese community.” \n “Congratulations,” Chie said with amusement. “That is an opportunity, I’m sure. But how am I involved?” \n Even noting Naomi’s breathless reaction to the name card, Chie had no idea. Akira’s message, delivered like a formal speech, filled her with maternal amusement. You know how children speak so earnestly, so hurriedly, so endearingly about things that have no importance in an adult’s mind? That’s how she viewed him, as a child. \n It was how she viewed Naomi. Even though Naomi was eighteen and training endlessly in the artsneeded to make a good marriage, Chie had made no effort to find her a husband. Akira blushed. \n “Depending on your response, I may stay in Japan. I’ve come to ask for Naomi’s hand.” \n Suddenly Chie felt the dampness of the night. \n “Does Naomi know anything of your...ambitions?” \n “We have an understanding. Please don’t judge my candidacy by the unseemliness of this proposal. I ask directly because the use of a go-between takes much time. Either method comes down to the same thing: a matter of parental approval. If you give your consent, I become Naomi’s yoshi. We’ll live in the House of Fuji. Without your consent, I must go to America, to secure a new home for my bride.” \n Eager to make his point, he’d been looking her full in the face. Abruptly, his voice turned gentle. \n “I see I’ve startled you. My humble apologies. I’ll take no more of your evening. My address is on my card. If you don’t wish to contact me, I’ll reapproach you in two weeks’ time. Until then, good night.” He bowed and left. Taking her ease, with effortlessgrace, like a cat making off with a fish. \n “Mother?” Chie heard Naomi’s low voice and turned from the door. “He has asked you?” \n The sight of Naomi’s clear eyes, her dark brows gave Chie strength. Maybe his hopes were preposterous. \n “Where did you meet such a fellow?” Chai began.  “Imagine! He thinks he can marry the Fuji heir and take her to America all in the snap of his fingers!” \n Chie waited for Naomi’s ripe laughter. Naomi was silent. She stood a full half minute looking straight into Chie’s eyes. Finally, she spoke: \n “Mother.” \n “Yes?” \n “I mean to have him.”`
                },
                { 'menuLabel': `Passages From College Board Test One: (C) 2016`,
                      'passageType': `pop-econ, sociology.  poor version of freakanomics`,
                  'blurb': `This passage is adapted from Francis J. Flynn and Gabrielle S. Adams, “Money Cant Buy Love: Asymmetric Beliefs about Gift Price and Feelings of Appreciation. ©2008” by Elsevier Inc.\n\n`,
                  'passage':  `Every day, millions of shoppers hit the stores in full force—both online and on foot—searching frantically for the perfect gift. Last year, Americans spent over $30 billion at retail stores in the month of 5 December alone. Aside from purchasing holiday  gifts, most people regularly buy presents for other occasions throughout the year, including weddings, birthdays, anniversaries, graduations, and baby showers. This frequent experience of gift-giving can engender ambivalent feelings in gift-givers. Many relish the opportunity to buy presents because gift-giving offers a powerful means to build stronger bonds with one’s closest peers. At the same time, many dread the thought of buying gifts; they worry that their purchases will disappoint rather than delight the intended recipients. Anthropologists describe gift-giving as a positive social process, serving various political, religious, and psychological functions. Economists, however, offer a less favorable view. According to Waldfogel (1993), gift-giving represents an objective waste of resources. People buy gifts that recipients would not choose to buy on their own, or at least not spend as much money to purchase (a phenomenon referred to as ‘‘the deadweight loss of Christmas”). To wit, givers are likely to spend $100 to purchase a gift that receivers would spend only $80 to buy themselves. This ‘‘deadweight loss” suggests that gift-givers are not very good at predicting what gifts others will appreciate. That in itself is not surprising to social psychologists. Research has found that people often struggle to take account of others’ perspectives— their insights are subject to egocentrism, social projection, and multiple attribution errors. What is surprising is that gift-givers have considerable experience acting as both gift-givers and gift-recipients, but nevertheless tend to overspend each time they set out to purchase a meaningful gift. In the present research, we propose a unique psychological explanation for this overspending problem—i.e., that gift-givers equate how much they spend with how much recipients will appreciate the gift (the more expensive the gift, the stronger a gift-recipient’s feelings of appreciation). Although a link between gift price and feelings of appreciation might seem intuitive to gift-givers, such an assumption may be unfounded. Indeed, we propose that gift-recipients will be less inclined to base their feelings of appreciation on the magnitude of a gift than givers assume. Why do gift-givers assume that gift price is closely linked to gift-recipients’ feelings of appreciation? Perhaps givers believe that bigger (i.e., more expensive) gifts convey stronger signals of thoughtfulness and consideration. According to Camerer (1988) and others, gift-giving represents a symbolic ritual, whereby gift-givers attempt to signal their positive attitudes toward the intended recipient and their willingness to invest resources in a future relationship. In this sense, gift-givers may be motivated to spend more money on a gift in order to send a “stronger signal” to their intended recipient. As for gift-recipients, they may not construe smaller and larger gifts as representing smaller and larger signals of thoughtfulness and consideration. The notion of gift-givers and gift-recipients being unable to account for the other party’s perspective seems puzzling because people slip in and out of these roles every day, and, in some cases, multiple times in the course of the same day. Yet, despite the extensive experience that people have as both givers and receivers, they often struggle to transfer information gained from one role (e.g., as a giver) and apply it in another, complementary role (e.g., as a receiver). In theoretical terms, people fail to utilize information about their own preferences and experiences in order to produce more efficient outcomes in their exchange relations. In practical terms, people spend hundreds of dollars each year on gifts, but somehow never learn to calibrate their gift expenditures according to personal insight.`
                },
                  {  'menuLabel': `Passages From College Board Test One: (C) 2016`,
                      'passageType': `gender, science, history. Watson, Crick, Rosalind Franklin`,
                    'blurb': `This passage is adapted from J. D. Watson and F. H. C. Crick, “Genetical Implications of the Structure of Deoxyribonucleic Acid. ©1953” by Nature Publishing Group. Watson and Crick deduced the structure of DNA using evidence from Rosalind Franklin and R. G. Gosling’s X-ray crystallography diagrams of DNA and from Erwin Chargaff’s data on the base composition of DNA.\n \n`,
                  'passage': `The chemical formula of deoxyribonucleic acid (DNA) is now well established. The molecule is a very long chain, the backbone of which consists of a regular alternation of sugar and phosphate groups. To each sugar is attached a nitrogenous base, which can be of four different types. Two of the possible bases—adenine and guanine—are purines, and the other two—thymine and cytosine—are pyrimidines. So far as is known, the sequence of bases along the chain is irregular. The monomer unit, consisting of phosphate, sugar and base, is known as a nucleotide. The first feature of our structure which is of biological interest is that it consists not of one chain, but of two. These two chains are both coiled around a common fiber axis. It has often been assumed that since there was only one chain in the chemical formula there would only be one in the structural unit. However, the density, taken with the X-ray evidence, suggests very strongly that there are two. The other biologically important feature is the manner in which the two chains are held together. This is done by hydrogen bonds between the bases. The bases are joined together in pairs, a single base from one chain being hydrogen-bonded to a single base from the other. The important point is that only certain pairs of bases will fit into the structure. One member of a pair must be a purine and the other a pyrimidine in order to bridge between the two chains. If a pair consisted of two purines, for example, there would not be room for it. We believe that the bases will be present almost entirely in their most probable forms. If this is true, the conditions for forming hydrogen bonds are more restrictive, and the only pairs of bases possible are: adenine with thymine, and guanine with cytosine. Adenine, for example, can occur on either chain; but when it does, its partner on the other chain must always be thymine. The phosphate-sugar backbone of our model is completely regular, but any sequence of the pairs of bases can fit into the structure. It follows that in a long molecule many different permutations are possible, and it therefore seems likely that the precise sequence of bases is the code which carries the genetical information. If the actual order of the bases on one of the pair of chains were given, one could write down the exact order of the bases on the other one, because of the specific pairing. Thus one chain is, as it were, the complement of the other, and it is this feature which suggests how the deoxyribonucleic acid molecule might duplicate itself.`
                },
                  { 'menuLabel': `Passages From College Board Test One: (C) 2016`,
                      'passageType' :`fiction, Virginia Woolf. Modernist`,
                    'blurb': `This passage is adapted from “Virginia Woolf, Three Guineas. ©1938 by Harcourt, Inc.” Here, Woolf considers the situation of women in English society. \n \n`,
                  'passage': `Close at hand is a bridge over the River Thames, an admirable vantage ground for us to make a survey. The river flows beneath; barges pass, laden with timber, bursting with corn; there on one side are the domes and spires of the city; on the other, Westminster and the Houses of Parliament. It is a place to stand on by the hour, dreaming. But not now. Now we are pressed for time. Now we are here to consider facts; now we must fix our eyes upon the procession—the procession of the sons of educated men. There they go, our brothers who have been educated at public schools and universities, mounting those steps, passing in and out of those doors, ascending those pulpits, preaching, teaching, administering justice, practising medicine, transacting business, making money. It is a solemn sight always—a procession, like a caravanserai crossing a desert. . . . But now, for the past twenty years or so, it is no longer a sight merely, a photograph, or fresco scrawled upon the walls of time, at which we can look with merely an esthetic appreciation. For there, trapesing along at the tail end of the procession, we go ourselves. And that makes a difference. We who have looked so long at the pageant in books, or from a curtained window watched educated men leaving the house at about nine-thirty to go to an office, returning to the house at about six-thirty from an office, need look passively no longer. We too can leave the house, can mount those steps, pass in and out of those doors,... make money, administer justice. . . . We who now agitate these humble pens may in another century or two speak from a pulpit. Nobody will dare contradict us then; we shall be the mouthpieces of the divine spirit—a solemn thought, is it not? Who can say whether, as time goes on, we may not dress in military uniform, with gold lace on our breasts, swords at our sides, and something like the old family coal-scuttle on our heads, save that that venerable object was never decorated with plumes of white horsehair. You laugh—indeed the shadow of the private house still makes those dresses look a little queer. We have worn private clothes so long. . . . But we have not come here to laugh, or to talk of fashions—men’s and women’s. We are here, on the bridge, to ask ourselves certain questions. And they are very important questions; and we have very little time in which to answer them. The questions that we have to ask and to answer about that procession during this moment of transition are so important that they may well change the lives of all men and women for ever. For we have to ask ourselves, here and now, do we wish to join that procession, or don’t we? On what terms shall we join that procession? Above all, where is it leading us, the procession of educated men? The moment is short; it may last five years; ten years, or perhaps only a matter of a few months longer.... But, you will object, you have no time to think; you have your battles to fight, your rent to pay, your bazaars to organize. That excuse shall not serve you, Madam. As you know from your own experience, and there are facts that prove it, the daughters of educated men have always done their thinking from hand to mouth; not under green lamps at study tables in the cloisters of secluded colleges. They have thought while they stirred the pot, while they rocked the cradle. It was thus that they won us the right to our brand-new sixpence. It falls to us now to go on thinking; how are we to spend that sixpence? Think we must. Let us think in offices; in omnibuses; while we are standing in the crowd watching Coronations and Lord Mayor’s Shows; let us think . . . in the gallery of the House of Commons; in the Law Courts; let us think at baptisms and marriages and funerals. Let us never cease from thinking—what is this “civilization” in which we find ourselves? What are these ceremonies and why should we take part in them? What are these professions and why should we make money out of them? Where in short is it leading us, the procession of the sons of educated men?`
                },
                { 'menuLabel': `Passages From College Board Test One: (C) 2016`,
                      'passageType': `double-passage, science, space-exploration`,
                  'blurb': `Passage 1 is adapted from Michael Slezak, “Space Mining: the Next Gold Rush? ©2013” by New Scientist. Passage 2 is from the editors of New Scientist, “Taming the Final Frontier. ©2013” by New Scientist.\n \n`,
                  'passage': `Follow the money and you will end up in space. That’s the message from a first-of-its-kind forum on mining beyond Earth. Convened in Sydney by the Australian Centre for Space Engineering Research, the event brought together mining companies, robotics experts, lunar scientists, and government agencies that are all working to make space mining a reality. The forum comes hot on the heels of the 2012 unveiling of two private asteroid-mining firms. Planetary Resources of Washington says it will launch its first prospecting telescopes in two years, while Deep Space Industries of Virginia hopes to be harvesting metals from asteroids by 2020. Another commercial venture that sprung up in 2012, Golden Spike of Colorado, will be offering trips to the moon, including to potential lunar miners. Within a few decades, these firms may be meeting earthly demands for precious metals, such as platinum and gold, and the rare earth elements vital for personal electronics, such as yttrium and lanthanum. But like the gold rush pioneers who transformed the western United States, the first space miners won’t just enrich themselves. They also hope to build an off-planet economy free of any bonds with Earth, in which the materials extracted and processed from the moon and asteroids are delivered for space-based projects. In this scenario, water mined from other worlds could become the most desired commodity. “In the desert, what’s worth more: a kilogram of gold or a kilogram of water?” asks Kris Zacny of HoneyBee Robotics in New York. “Gold is useless. Water will let you live.” Water ice from the moon’s poles could be sent to astronauts on the International Space Station for drinking or as a radiation shield. Splitting water into oxygen and hydrogen makes spacecraft fuel, so ice-rich asteroids could become interplanetary refuelling stations. Companies are eyeing the iron, silicon, and aluminium in lunar soil and asteroids, which could be used in 3D printers to make spare parts or machinery. Others want to turn space dirt into concrete for landing pads, shelters, and roads.`,
                  'passageTwo': `The motivation for deep-space travel is shifting from discovery to economics. The past year has seen a flurry of proposals aimed at bringing celestial riches down to Earth. No doubt this will make a few billionaires even wealthier, but we all stand to gain: the mineral bounty and spin-off technologies could enrich us all. But before the miners start firing up their rockets, we should pause for thought. At first glance, space mining seems to sidestep most environmental concerns: there is (probably!) no life on asteroids, and thus no habitats to trash. But its consequences —both here on Earth and in space—merit careful consideration. Part of this is about principles. Some will argue that space’s “magnificent desolation” is not ours to despoil, just as they argue that our own planet’s poles should remain pristine. Others will suggest that glutting ourselves on space’s riches is not an acceptable alternative to developing more sustainable ways of earthly life. History suggests that those will be hard lines to hold, and it may be difficult to persuade the public that such barren environments are worth preserving. After all, they exist in vast abundance, and even fewer people will experience them than have walked through Antarctica’s icy landscapes. There’s also the emerging off-world economy to consider. The resources that are valuable in orbit and beyond may be very different to those we prize on Earth. Questions of their stewardship have barely been broached—and the relevant legal and regulatory framework is fragmentary, to put it mildly. Space miners, like their earthly counterparts, are often reluctant to engage with such questions. One speaker at last week’s space-mining forum in Sydney, Australia, concluded with a plea that regulation should be avoided. But miners have much to gain from a broad agreement on the for-profit exploitation of space. Without consensus, claims will be disputed, investments risky, and the gains made insecure. It is in all of our long-term interests to seek one out.`
                }
              ];
            },
            notify: true
          },
          currentBackground:{
              type: String, 
              value: function(){
                return 'aliceblue';
              },
              notify: true
            },

            currentWidth:{
              type: Number, 
              value: function(){
                return 380;
              },
              notify: true
            },

            rightLeftRight:{
              type: String,
              value: function(){
                return 'right';
              },
              notify: true,
              reflectToAttribute: true
            },
      
            currentHeight:{
              type: Number,
              value: function(){
                return 920;
              },
              notify: true
            }, 
            currentZ:{
              type: Number,
              value: function(){
                return 1;
              },
              notify: true
            },
          yourName: {
              type: String,
              value: "use your name",
              notify: true
            },
          passageTitle: {
            type: String,
            value: 'none',
            notify: true
          },
          passageBlurb:{
            type: String,
            value: 'none',
            notify: true
          },

          transitionArray: {
            type: Array,
            value: [],
            notify: true
          },
          paragraphArray: {
            type: Array,
            value: [],
            notify: true
          },

          truePassageArray:{
            type: Array,
            value: [],
            notify: true
          },
          passageWordArrayOrdered:{
            type:Array,
            value: [],
            notify: true
          },
          passageArray:{
            type:Array,
            value: [],
            notify: true
          }, 
         
          orderIndex: {
            type: Number, 
            value: 0,
            notify: true
          },
          columnOne: {
            type: Boolean,
            value: false,
            notify: true,
            reflectToAttribute: true
          },

      firstWordIndex: {
            type: Number,
            value: 0
          },

      lastWordIndex: {
            type: Number,
            observer: 'gotLastWordIndex',
            notify: true
          },
      firstRowIndex: {
        type: Number,
        value: 1,
        notify: true
      },

      lastRowIndex:{
        type: Number,
        value: 1,
        notify: true,
        reflectToAttribute: true
      },

      firstRowNode: {
          type: Object,
          notify: true,
          reflectToAttribute: true
      },
      lastRowNode: {
          type: Object,
          notify: true,
          reflectToAttribute: true
      },
      minTarra: {        
        type: Array,
        value: function(){
          return  [];
          },
        notify: true,
      },

      holderArray: {
        type: Array,
        value: function(){
          return  this.passageThreeWordArray;
          },
        notify: true,
        reflectToAttribute: true
      },

      minTranArray:{
        type: Array,
        notify: true,
      }, 

      doublePassage: {
        type: Boolean,
        value: false,
        notify: true, 
        reflectToAttribute: true
      },
      secondPassage: {
        type: Boolean,
        value: false,
        notify: true,
        reflectToAttribute: true

      },
      shorterThan500:{
        type: Boolean,
        value: false, 
        notify: true,
        reflectToAttribute: true
      }
            
    };

        this.listeners = {
      
          };
         }
        
    
    _computePassageOneWordArray(passagesTestOne){
            this.passagesWordArrays =[];
            var blurb = this.passageBlurb;
            var passageTitle = this.passageTitle;
            var passageType = this.passageType;
            var test = this.testId;
            var fcid = this.fcid;
            var self = this;
            var passagesCounter = passagesTestOne.length;
            // console.log(passagesCounter);
            var p=1;
            while(p<passagesCounter){
            var passageContent = passagesTestOne[p];
            self.set('passageBlurb', passageContent.blurb);
            self.set('passageType', passageContent.passageType);
            var matches = passageContent.blurb.match(/“[^”]*”/g);
            //console.log(matches);


            var truePassageContent = passageContent.passage.replace(/[\—]/g, " — ");
            var arrayPassed=truePassageContent.split(/\s/g);
            var order =arrayPassed.length;
            self.orderIndex=0;
            self.paragraphArray = truePassageContent.split(/\n/);
              self.passageArray = [];
              var i = self.paragraphArray.length-1;
              for(; i>= 0; i--)
                {
                    //console.log(i + " " + self.paragraphArray[i]);
                  var wordCounter = 0;
                  var newPara = false;
                  var wordArray = self.paragraphArray[i].split(/\s/g);
                  var paraWordRemaining = wordArray.length-1;
                  var paragraph_number = Math.ceil(i/2);
                  var isLastWordOfPara =false;
                  var currentWord;
                  var orderIndex = self.orderIndex;

                  while(paraWordRemaining>=0)
                  // para word loop
                  {       
                      self.orderIndex++;
                      order--;
                      self.wordCounter--;
                      if (paraWordRemaining==0){
                        newPara = true;
                        
                        
                      }
                      else if(wordCounter==0)
                      { 
              
                        isLastWordOfPara = true;
                      }
                      else{
                        newPara=false;
                        isLastWordOfPara=false;
                      
                      }
                        
                        currentWord = wordArray[paraWordRemaining];               
                        self.push("passageArray",
                          { 
                            "passageTitle": matches,
                            "passageBlurb": blurb,
                            "indexPrime":orderIndex,
                            'order': order,
                            'word' : currentWord, 
                            'newPara': newPara,
                            'paragraph_number': paragraph_number,
                            'isLastWordOfPara':isLastWordOfPara,
                            'paragraphsRemaining': i
                          });
                        wordCounter++;
                        paraWordRemaining--;
                      } //SINGLE word entry ends here, WOULD LOVE TO CUT THIS IN HALF
                    }//SINGLE line loop
          //this is the paragraph for loop
          
        var qtip= self.passageArray.length;
          var z=0;
              var upperbound= Math.floor(qtip*(1-.578));
              var upperboundholder=upperbound;
              var lowerbound = Math.ceil(qtip*(1-.675));
              var lowerboundholder=lowerbound;
              var numTWords = upperbound-lowerbound;
         
          // console.log(self.passageArray);
          self.minTarra=[];
          self.transitionArray=[];
          self.passageWordArrayOrdered=[];
          for(let passageArrayLength= self.passageArray.length; passageArrayLength>=0; passageArrayLength--)
          {
      
            if(z==0){
              var upperbound= Math.floor(passageArrayLength*(1-.578));
              var upperboundholder=upperbound;
              var lowerbound = Math.ceil(passageArrayLength*(1-.675));
              var lowerboundholder=lowerbound;
              let numTWords = upperbound-lowerbound;
              let q=1;
              for(;upperbound>=lowerbound; upperbound--){

                let pickle= passageArrayLength-upperbound;
                var firstPickle=passageArrayLength-upperboundholder;
                var secondPickle=passageArrayLength-lowerboundholder;
                self.push('transitionArray', { 
                              'indextransitionArray':pickle ,
                              'word': self.passageArray[upperbound].word,
                              'numberOrder': q,
                              'transition_total':numTWords,
                              'L8ofFst': ((q<=22)?true:false),
                              'happy': true,
                              'lowerbound': firstPickle,
                              'upperbound': secondPickle
                              });
                (q<=22)?self.push('minTarra', {'word':self.passageArray[upperbound].word, 'passageIndex':pickle, 'isMinTarra': true}):// console.log(`array forming: measuring next <p>no way</p>`);
                    q++;
                    lowerbound++;
                  }  


               
           
             self.push('passageWordArrayOrdered',
                           {  'wordIndex': z,
                              "passageType": passageContent.passageType,
                              "passageTitle": matches,
                              "menuLabel": passageContent.menuLabel,
                              "menuItem": matches,
                              "passageBlurb": passageContent.blurb,
                              "total_word_count": passageArrayLength, 
                              "number_transition_words": numTWords,                   
                              "transitionArray":self.transitionArray,
                              "has_charts": "TRUE",
                              "is_double_passage": "TRUE"
                                     });
          
          }
          else{

            var miniUpper=secondPickle-21;
            self.push('passageWordArrayOrdered', 
                {           'wordIndex': z,
                            'word' : self.passageArray[passageArrayLength].word, 
                            'newPara': self.passageArray[passageArrayLength].newPara,
                            'paragraph_number': self.passageArray[passageArrayLength].paragraph_number,
                            'isLastWordOfPara':self.passageArray[passageArrayLength].isLastWordOfPara,
                            'is_transitionWord': (z>=firstPickle&&z<=secondPickle)?true:false,
                            'is_miniTarra': ((z>=miniUpper && z<=secondPickle)?true: false),


                  });
            }
            z++;
        }
// console.log(`transition array in zero ${JSON.stringify(self.passageWordArrayOrdered)}`);
         self.push('passagesWordArrays', self.passageWordArrayOrdered);
      
          self.set('passageArray', null);
          self.set('passageWordArrayOrdered',null);
          order=0;;
          p++;
          self.passageWordArrayOrdered=[];
          self.passageArray=[];
          self.set('transitionArray', null);

          
        }
        return self.passagesWordArrays[0];
       
        }
     
         _computePassageTwoWordArray(passagesTestOne){
          return passagesTestOne[1].passage;
        }

        _computePassageThreeWordArray(passagesTestOne){
          return passagesTestOne[2].passage;
        }
        _computePassageFourWordArray(passagesTestOne){
           return passagesTestOne[3].passage;
        }
        _computeDoublePassageWordArray(passagesTestOne){
            return passagesTestOne[4].passage, passagesTestOne[4].passageTwo;
        }

        _computeLineNumberArray(passageOneWordArray, lastRowNode){
              this.arrayNums=[]
              for(var i=1; i <= 180; i++)
                 {
                  var showLine =  i % 5 ? false: true;
                  this.push('arrayNums',{'number': i, 'show': showLine});
                  }
                  return this.arrayNums;
                  }

        setMeasureParams(){
          var elm= this.$.firstColumn;
        var hait=parseInt(window.getComputedStyle(this.$.firstColumn, null).getPropertyValue("width"));
     
        let theID ='#A' + this.lastWordIndex;
    let theFirstId = '#A2';
    let theLastNode = Polymer.dom(this.$.textColumnOne).querySelector(theID);
    let theFirstNode = Polymer.dom(this.$.textColumnOne).querySelector(theFirstId);
       
        this.set('firstRowNode',theFirstNode);
        this.set('lastRowNode',theLastNode);
         this.computeLastRowIndex(theLastNode);
           (!isNaN(parseInt(window.getComputedStyle(this.$.firstColumn, null).getPropertyValue("height"))))?(this.removeEventListener("mouseover", this.setMeasureParams) || this.set("estimatedHeight",parseInt(window.getComputedStyle(this.$.firstColumn, null).getPropertyValue("height"))) || this.setMeasureParams): console.log("cannot set height even estimatedHeight");

        }
      attached(){
        
          }
      gotContent(newTheContent) {
        // console.log(this, 'IN gotContent', newTheContent);
        this.lastWordIndex = newTheContent.length-1;
  }


  
      
  gotLastWordIndex(newLastWordIndex) {
    console.log(this, "IN gotLastWordIndex", newLastWordIndex);
    this.checkForLastNode();
     this.addEventListener("mouseover", this.setMeasureParams);
     this.notifyResize();
    

  }

  wordsOffBottom() {
      var lwId =  '#A' + this.lastWordIndex;
      var lastWordNode = document.querySelector(lwId);
      // console.log(lastWordNode);
      var lastWordNodeBottom = lastWordNode.getBoundingClientRect().bottom;

      var previousWordNode = lastWordNode;
      var previousWordNodeBottom = lastWordNodeBottom;
      var numberOfWordsToCut = 0;

      while(previousWordNodeBottom == lastWordNodeBottom){
        previousWordNode = previousWordNode.previousSibling;
        if(previousWordNode.nodeName == lastWordNode.nodeName){
          previousWordNodeBottom = previousWordNode.getBoundingClientRect().bottom;
          numberOfWordsToCut++;
        }
      }

      // console.log(this, "IN wordsOffBottom", this.lastWordIndex, numberOfWordsToCut);
      return numberOfWordsToCut;
  }

  wordsOffTop() {
      var lwId =  '#A' + this.firstWordIndex;
      var firstWordNode = this.$$(lwId);
      var firstWordNodeBottom = firstWordNode.ClientRects().bottom;

      var nextWordNode = firstWordNode;
      var nextWordNodeBottom = firstWordNodeBottom;
      var numberOfWordsToCut = 0;

      while(nextWordNodeBottom == firstWordNodeBottom){
        nextWordNode = nextWordNode.nextSibling;
        if(nextWordNode.nodeName == firstWordNode.nodeName){
          nextWordNodeBottom = nextWordNode.getBoundingClientRect().bottom;
          numberOfWordsToCut++;
        }
      }
      // console.log(this, "IN wordsOffTop", this.firstWordIndex, numberOfWordsToCut);
      return numberOfWordsToCut;
  }
  
  computeLastRowIndex(lastWordNode) {
    var last_word_bottom = parseInt(window.getComputedStyle(this.$.firstColumn, null).getPropertyValue("height"));
    var line_height = 24;
    console.log(last_word_bottom, 'I GOT A NUMBER');
    var bottom_of_top_mark =80;

    var delta =  last_word_bottom - bottom_of_top_mark;
    var numRows = Math.floor(delta/line_height);
    console.log(numRows);
    this.lastRowIndex = this.firstRowIndex + numRows - 1;
    console.log(this, "IN computeLastRowIndex", this.lastRowIndex);

      
  }


  getLastWordNode(nodeId) {
    //console.log(this.lastWordIndex);
    let theID ='#A' + this.lastWordIndex;
    var lastNode = Polymer.dom(this.$.textColumnOne).querySelector(theID);
  
    var alastNode= Polymer.dom(this.$.textColumnOne).querySelector(theID);
    
      if(lastNode || alastNode){
        return lastNode;
      } else if (lastNode===undefined || lastNode === null){

          return console.log(Error(`lastNode doesnt exist.`));
      }
        else {
          return lastNode;
      }
    

    return lastNode;
  }

  checkForLastNode() {
    var self = this;
    var lwId =  '#A' + this.lastWordIndex;
    console.log(lwId);
    var lastNode = this.getLastWordNode(lwId)?this.getLastWordNode(lwId): Polymer.dom(this.$.textColumnOne).querySelector(lwId);
    lastNode?console.log("yeah") :self.getLastWordNode;
    
  }


_theContentFilter(firstWordIndex, lastWordIndex) {
      if(!isNaN(lastWordIndex)){
        return (item) =>{
            return (item.wordIndex >= firstWordIndex && item.wordIndex <= lastWordIndex);
        };
      } else {
        return (item) =>{
            return true;
        };
      }
  }

  _numberFilter(lastRowIndex) {
      return (item) =>{
        return (item.number <= lastRowIndex);
          };
        } 
      resetWidth(e){
          var self=this;
          e.preventDefault();
          
              switch(e.detail.state) {
                case 'start':
                  console.log('START');
                  console.log(e);
                  break;
                case 'track':
                  self.currentWidth = self.currentWidth> 18? parseInt(self.currentWidth) + e.detail.ddx: self.currentWidth=23;
                  break;
                case 'end':
                 // console.log("ENDING", e.detail.x, e.detail.y, self.currentWidth, e.detail.dx, e.detail.dy);
                  //self.currentWidth = parseInt(self.currentWidth) + e.detail.ddx;
                  self.notifyResize();
                  break;
                 
          }
        }

        _resizeHeight(e){
          var self=this;
          e.preventDefault();
          
              switch(e.detail.state) {
                case 'start':
                  break;
                case 'track':
                  self.currentHeight = parseInt(self.currentHeight) + e.detail.ddy;
                  break;
                case 'end':
                  self.draggable=false;
                  self.notifyResize();
                  break;
                 
          }
        }
        _computeWidth(currentWidth){
          return `width:${currentWidth}px;`;
        }
        _computeHeight(currentHeight){
          return `height:${currentHeight}px;`;
        }
        _computeBackground(currentBackground){
          return `background:${currentBackground};`;
        }
        _computeZ(currentZ){
          return `z-index: ${currentZ};`;
        }


        

        _closeDialog(){
          this.close();
        }
      }
    Polymer(fcDialog);
  })();
</script>
</dom-module>