
<script>
window.FCBehaviors = window.FCBehaviors || {};
FCBehaviors.ResizerTagBehaviorImpl = {

	properties: {
		          currentWidth:{
              type: Number, 
              notify: true
            },
            stupidCounter:{
              type: Number,
              value: 0,
              notify: true
            },

            isRightDrawerPanel:{
              type: Boolean,
              value: function(){
                return false;
              },
              notify: true,
              reflectToAttribute: true
            },
            
            currentHeight:{
              type: Number,
              notify: true
            },
            _notifyingDescendant: {
                  type: Boolean,
                  value: true, 
                  notify: true
              },
            screenWidth: {
              type: Number,
              notify: true,
              reflectToAttribute: true
            }
          },
     
	listeners:{
		track: '_focusedRootResize'}, 

  ready: function(){
    console.log(window.screen.width);
    this.set('screenWidth', window.screen.width);
  },       

 _focusedRootResize: function(e){
      var self = this;
          e.preventDefault();
      switch(self.name){
        // case 'resizer':
        //       switch(e.detail.state) {
        //         case 'start':
        //           self.set('parentNode.currentHeight', window.getComputedStyle(self.parentNode, null).getPropertyValue("height"));
        //           self.set('parentNode.currentWidth', window.getComputedStyle(self.parentNode, null).getPropertyValue("width"));
        //           console.log(self.parentNode.currentHeight, self.parentNode.currentWidth, 'pay attention to this one');
        //          break;
        //         case 'track':
        //           var newheight = parseInt(self.parentNode.currentHeight) + e.detail.ddy;
        //           var nwidth = parseInt(self.parentNode.currentWidth) + e.detail.ddx;
        //           var trueWidth = nwidth.toString()+'px';
        //           var trueHeight = newheight.toString()+'px';
                  
           
        //           self.parentNode.currentWidth=trueWidth;
        //           self.parentNode.currentHeight=trueHeight;
        //           self.parentNode.style.width= trueWidth;
        //           self.parentNode.style.height= trueHeight;
                
        //           break;
        //         case 'end':
        //           self.parentNode.notifyResize();
        //           self.root.ironResize;
        //           Polymer.dom.flush();
        //           break;
        //       }
        //     break;
        case 'leftDrawer':
            switch(e.detail.state) {
                case 'start':
                  self.set('parentNode.currentWidth', window.getComputedStyle(self.parentNode, null).getPropertyValue("width"));
                  break;
                case 'track':
                  var nwidth = parseInt(self.parentNode.currentWidth) + e.detail.ddx;
                  nwidth=(self.screenWidth> 1600 && nwidth>self.screenWidth-200)? self.screenWidth-200: nwidth;
                  var trueWidth = nwidth.toString()+'px';
                  self.parentNode.currentWidth=trueWidth;
                  self.parentNode.style.width= trueWidth;

                  break;
                case 'end':
                  self.parentNode.notifyResize();
                  break;
              }
            break;
        // case 'heightResizer':
        //     switch(e.detail.state) {
        //         case 'start':
        //               self.set('parentNode.currentHeight', window.getComputedStyle(self.parentNode, null).getPropertyValue("height"));
        //               break;
        //         case 'track':
        //               var newheight = parseInt(self.parentNode.currentHeight) + e.detail.ddy;
        //               var trueHeight = newheight.toString()+'px';
        //               self.parentNode.currentHeight=trueHeight;
        //               self.parentNode.style.height= trueHeight;
        //               break;
        //         case 'end':
        //               self.parentNode.notifyResize();
        //               Polymer.dom.flush();
        //               break;     
        //         }
        //     break;
        case 'rightDrawer': 
            switch(e.detail.state) {
                case 'start':
                self.set('parentNode.currentWidth', window.getComputedStyle(self.parentNode, null).getPropertyValue("width"));
                  break;
                case 'track':
                  var nwidth = parseInt(self.parentNode.currentWidth) - e.detail.ddx;
                  var trueWidth = nwidth.toString()+'px';
                  self.parentNode.currentWidth=trueWidth;
                  self.parentNode.style.width= trueWidth;

                  break;
                case 'end':
                  self.parentNode.notifyResize();
                  self.parentNode.notifyResize();
                  break;      
              }
          break;
        }
      }

    };
FCBehaviors.ResizerTagBehavior = [
  Polymer.IronResizableBehavior,
  FCBehaviors.ResizerTagBehaviorImpl];
</script>