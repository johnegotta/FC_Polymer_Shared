<dom-module id="fc-data-administrator">
	<!-- CodeMirror -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.2.0/codemirror.css" />

<!-- Firepad -->
<link rel="stylesheet" href="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.css" />
<script src="https://cdn.firebase.com/libs/firepad/1.2.0/firepad.min.js"></script>

	<template>
		<style is="custom-style">
	 	
	 	#div1 {
	 		width:365px; 
	 		height:680 px;
	 		padding:10px;
	 		border:1px solid #aaaaaa;
	 	}
	 	article { display: block;}
	  	
	  	.iconset{
  			  height: 97px;
			  width: 164px;
			  font-family: merriweather;
			  font-size: 1.05em;
			  color: black;
			  padding: 5px;
			  margin: 5px 5px 5px 0px;
			  text-align: center;
			  display: block;
			}

		div.assistView::--webkit-scrollbar {
					display: none;
			}
		
		paper-dialogue-scrollable::--webkit-scrollbar {
					display: none;}
	
			paper-dialog {
				font-family: merriweather;
			  	font-size: 1.05em;
				position: fixed;
				display: block;
				width: 541px;
				height: 668px;
				overflow: hidden;
				border: 2px ridge #002c90;
				background: #fff;
				border-radius: 8px;
				z-index: 100000;
				opacity: 1;
			}


			.subheading{
				font-size: 13px;
				color: brown;
				font-weight: 800;
			}
			h6.subheading{
				font-size: .6em;
				color: brown;
				font-weight: 800;
			}
			

			.fc-headerclass{
				padding: 4px 2px 2px 4px;
				font-family: Merriweather;
				font-size: 26px;
				color: #000066;
				}
			
			h3, h4 {
				color: #000066;
				margin-bottom: 4px;
				margin-top: 8px;
				font-family: Merriweather;
				font-weight: 700;

			}

			h2 {


			}
			section {
			 	height: 98vh;
			 	overflow-y: scroll;
			}
			iron-page {
				display: float;
				position: relative;
				margin-top: 0px;
				padding-top: 4px;


			}
			p.assistant{
				height: 100vh;
				font-family: Times;
				font-size: 14px;
				font-weight: 500px;
				color: goldenrod;
				overflow-y: scroll;

			}

			div.scroll-master{
				height: 98%;
				overflow: hidden;
				overflow-y: scroll;
				border: 0px 3px 0px 3px inset #fffffe;
				border-top: 1px solid #000066;
				border-bottom: 1px solid #000066;
			}


			iron-icon{
				height: 36px;
				width: 36px;
			}

			
			iron-pages{
				height: calc(100vh-65px);
				position: relative;
				display: flex;

			}

			
			
</style>
	<div class="layout container vertical center center-justified iconset">
		
		<iron-icon class="fc-icon" icon="hardware:dock" on-tap="flattap" style="z-index:1;" data-assist="tutorial">
		</iron-icon>
		<br>
		<span>Focused Administrator</span>
</div>

								
<paper-dialog id="dragDialog2" class="layout vertical container" style="position: fixed;"  draggable="true" no-cancel-on-outside-click="true">

	<h3 class="fc-headerclass horizontal layout center-justified" style="padding-bottom: 4px;">The Focused Data Administrator</h3>
	<h6 on-mousedown="_startDrag" class="subheading horizontal layout center-justified" style="line-height:.2; margin: 10px 3px 0px 3px;">CLICK TO DRAG || CLICK AGAIN TO RELEASE</h6>
	<div class="scroll-master">
		<iron-pages id="assistantPages" selected="0">
			<section>
			<div id="firepad" class="fit"></div>
			</section>
			<section>
				<h3> Build Elements From Template Elements</h3>
				<p class="assistantView container" no-cancel-on-outside-click="true">
		
				<p> 
					<ul>Cells 
						<li> <paper-button> Label-Value Display Cells</paper-button> </li>
						<li> <paper-button> Value Only Display Cells </paper-button></li>
						<li> <paper-button> Label-Value User Input Cells </paper-button></li>
						<li> <paper-button> Label-Value Admin Cells</paper-button></li>
					</ul>
				</p>
				<hr>
				<p>
					<ul> Horizontal Display Rows
						<li> <paper-button> No-Wrap Rows</paper-button></li>
						<li> <paper-button> Wrap Rows</paper-button></li>
					</ul>
				</p>
				<hr>
				<p>
					<ul> Cards
						<li> <paper-button>Portrait Cards w/ or w/o Focused Header</paper-button></li>
						<li><paper-button>Landscape Cards w or w/o Focused Header</paper-button></li>
					</ul>
				</p>
				<hr>
				<p>
					<ul> Card Sets
						<li> <paper-button> Animated Horizontal Sliding Portrait Animation Sets </paper-button></li>
						<li><paper-button> Animated List-View/Landscape + Reverse Full View Sets</paper-button></li>
						<li><paper-button> Animated Stub-Card Grid to Full View Sets</paper-button></li>
						<li><paper-button> Tabbed-Animated Stub-Card Grid to Full View Sets</paper-button></li>
					</ul>
				</p>
				<hr>
				<p>
					<ul> Dashboard with Flex Splitters
						<li> <paper-button>Top View Panel-Bottom View Panel: Grid Bottom Design</paper-button></li>
						<li><paper-button> Top View Panel - Bottom Split Panel Design</paper-button></li>
						<li><paper-button> Four Panel (2x2 Design)</paper-button></li>
						<li><paper-button> Four Panel Full Screen Work Layout (no Drawer Panel)</paper-button></li>
					</ul>
				</p>
				<hr> 
			<h4>	Next: Use Your Previous Element and View Models and Collections</h4>
			</p>
			</section>

			<section>
				<h3>Your Element Collections </h3>
				
				<details>
				<summary> <b>Dashboard Top-View Collection</b></summary>
					<ul> Here are your Elements As Assembled in your Top-View Dashboard
						<li> One with picture</li>
						<li> Two With Picture</li>
						<li> Three With Picture</li>
						<li> Four With Picture</li>
						<li> Five With Picture</li>
						<li> Six with Picture</li>
					</ul>
				</details>

				<details>
				<summary> <b>Dashboard Top-Bottom Grid-Full View Collection</b></summary>
					<ul> Here are your Elements As Assembled in your Top-Bottom/ Grid-Full View Collection
						<li> One with picture</li>
						<li> Two With Picture</li>
						<li> Three With Picture</li>
						<li> Four With Picture</li>
						<li> Five With Picture</li>
						<li> Six with Picture</li>
					</ul>
				</details>
				<details>
				<summary> <b>DashBoard Four Panel Two-by-Two Collection</b></summary>
					<ul> Here is your Four Panel Collection
						<li> One with picture</li>
						<li> Two With Picture</li>
						<li> Three With Picture</li>
						<li> Four With Picture</li>
						<li> Five With Picture</li>
						<li> Six with Picture</li>
					</ul>
				</details>
				<details>
				<summary> <b>DashBoard Four Panel Full Screen Collection</b></summary>
					<ul> Here is your Four Panel Full Screen Collection
					<template is="dom-repeat" items={{superItemArray}}>
						<li>{{item.fcid}}</li>
						<li>{{item.Email}}</li>
						<li>{{item.Full_Name}}</li>
					
						</template>
					</ul>
				</details>
			</section>
		
			<section>
				<h3> Cell Creation Page</h3>
				<paper-input>lolo</paper-input>
				<paper-input>lolo</paper-input>
				<div style="border: 5px ridge silver; width: 240px; height: 120px;"> 
					<h6>BUILD HERE</h6>
				</div>
				<paper-button>Save To Collection</paper-button>
				<input list="collectionsList" placeholder="Collection List">
					<data-list>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</data-list>
			</section>
			<section>
				<h3> Card Creation Page</h3>
				<paper-input>lolo</paper-input>
				<paper-input>lolo</paper-input>
				<div style="border: 5px ridge silver; width: 240px; height: 120px;"> 
					<h6>BUILD HERE</h6>
				</div>
				<paper-button>Save To Collection</paper-button>
				<input list="collectionsList" placeholder="Collection List">
					<data-list>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</data-list>
			</section>

			<section>
				<h3> Layout Creation Area</h3>
				<paper-input>lolo</paper-input>
				<paper-input>lolo</paper-input>
				<div style="border: 5px ridge silver; width: 240px; height: 120px;"> 
					<h6>BUILD HERE</h6>
				</div>
				<paper-button>Save To Collection</paper-button>
				<input list="collectionsList" placeholder="Collection List">
					<data-list>
						<option>1</option>
						<option>2</option>
						<option>3</option>
						<option>4</option>
						<option>5</option>
					</data-list>
			</section>
					</section>
			<h3> Graphs and other Data Representation</h3>
				<paper-input>lolo</paper-input>
				<paper-input>lolo</paper-input>
				<div style="border: 5px ridge silver; width: 240px; height: 120px;"> 
					<h6>BUILD HERE</h6>
				</div>
				<paper-button>Save To Collection</paper-button>
				<input list="collectionsList" placeholder="Collection List">
					<datalist id="collectionsList">
						<option value='1'>1</option>
						<option value='2'>2</option>
						<option value='3'>3</option>
						<option value='4'>4</option>
						<option value='5'>5</option>
					</datalist>


					<section>
						
					</section>
					</iron-pages>
				</div>
			
			<div class="buttons" style="height: 65px; padding: 8px 8px 8px 14px;" class="horizontal layout left-justified">
				
				
<paper-button on-tap="conttap">Continue</paper-button>
				<paper-button on-tap="coolThings">do cool things</paper-button>
				<paper-button dialog-dismiss>Exit</paper-button>
			
				<paper-button on-tap="conttap">Continue</paper-button>
			</div>
	
</paper-dialog>
</template>
<script>  
	Polymer({
		is: 'fc-data-administrator',
		properties:{
		offsetX: {
				type: Number,
				notify: true,
				reflectToAttributes: true
				},
		offsetY: {
				type: Number,
				notify: true,
				reflectToAttributes: true
				},

			dragging: {
				type: Boolean, 
				value: false, 
				notify: true
			},

			timeout: {
				type: Boolean, 
				value: false, 
				notify: true
			},
		open: 	{
			type: Boolean,
			value: false, 
			notify: true
			},
		currentDragger:{
			type: Object,
			notify: true,
			reflectToAttributes: true
		}, 
		superItemArray:{
			type:Array,
			value: [],
			notify: true,
			reflectToAttributes: true
		}




	},

	 created: function(){

	 	var setFB = new Firebase("https://focusedstaging1.firebaseio.com/students"); 
	    var self = this;
	    setFB.on("value", function(snap){
	    var theSet = snap.val();
		console.log(theSet);
	    var counterone = 0;
		var keyfirst = Object.keys(theSet);
		var limit = keyfirst.length;
		console.log(limit);
	
	     for(counterone = 0; counterone < limit; counterone++){
	     	var testKeys =  Object.keys(theSet[keyfirst[counterone]].test_results);
			var testCounter = testKeys.length;
	     	
	     	var studenters = keyfirst[counterone];
			alert(testCounter + "c " + studenters);
			var full = theSet[keyfirst[counterone]].first_name + " " + theSet[keyfirst[counterone]].last_name;
			self.push('superItemArray', {
						'Full_Name' : full,
						'fcid': theSet[keyfirst[counterone]].student,
						'Email': theSet[keyfirst[counterone]].email,
						'Test_Results': {function(){
			
					     	var testFB = new Firebase("https://focusedstaging1.firebaseio.com/test_results");
					     	var thisTestResult = this;
					     	testFB.orderByChild('student').equalTo(studenters).on("value", function(snapshot){
					    			var testies = snapshot.val();
					    			var testcounter = testies.length;
					    			console.log(testcounter);
					    			var i = 0;
					    			for(i=0; i<testcounter; i++){
						     			var keysInTestResults = Object.keys(testies);
						     			var FITRs = keysInTestResults.length;
						     			console.log(Object.keys(testies[keysInTestResults[j]]));//values we want;
						     			var scoreHeaders = Object.keys(testies[keysInTestResults[0]]);
										var it = testies[keysInTestResults[j]].values();
										var entry;
											while (!(entry = it.next()).done) {
    											
    											self.push('superItemArray', entry.valuer);
												}
												console.log(entry.value);
												return entry.value;
										};
	     							
	    							});
	    						}
	     					}
						});
					
				}
			});
		},



	
		coolThings: function(){
			var adminStorage2 = window.localStorage;
			var len = this.superItemArray.length;
			var franklin = this.superItemArray[1];
			var name = this.superItemArray[1].Full_Name;
			var email = this.superItemArray[1].Email;
			alert(JSON.stringify(this.superItemArray[1]));
			adminStorage2.setItem(name,email);

			

		},
		ready: function() { 
			console.log(this.superItemArray);
			var firepadRef = new Firebase('https://focusedstudents.firebaseio.com/firepad');
  			var codeMirror = CodeMirror(this.$.firepad, { lineWrapping: true });
  			var firepad = Firepad.fromCodeMirror(firepadRef, codeMirror,
      		{ richTextShortcuts: true, richTextToolbar: true, defaultText: 'Hello, World!' });
		},

 		conttap: function() {
 			 var pages = this.$.assistantPages;
    			pages.selectNext();
  				
  				},

  		flattap: function() {
			this.$.dragDialog2.open();			
	},

		back: function(){
			var pages = this.$.assistantPages;
    			pages.selectPrevious();

	},

getData: function(argItem)
	{
		console.log(argItem);
		this.fcid = argItem;
		if(this.scores.hasOwnProperty(argItem))
		{
//			return this.scores[argItem];
		
			return ['PRETEST: ' + this.scores[argItem].scoresPreTest + "  \n\r",
					'TEST 1: ' + this.scores[argItem].scoresTest1 + "    |||    ",
					'TEST 2: ' + this.scores[argItem].scoresTest2 + "    |||    ",
					'TEST 3: ' + this.scores[argItem].scoresTest3 + "    |||    ",
					'TEST 4: ' + this.scores[argItem].scoresTest4 + "    |||    ",
					'TEST 5: ' + this.scores[argItem].scoresTest5 + "    |||    ",
					'TEST 6: ' + this.scores[argItem].scoresTest6 + "    |||    ",
					'REAL SAT: ' + this.scores[argItem].realSAT + "    |||    "
					];
		}
	},
		_startDrag: function(e){
		
			//console.log(e);
			this.dragging=true;
			var dragbox = this.$.dragDialog2.getBoundingClientRect();
			this.offsetX = e.offsetX;
			//console.log(this.offsetX);
			var Xoff = this.offsetX = e.offsetX;
			var Yoff = this.offsetY = e.offsetY;
			//console.log(Yoff);
			document.captureEvents(Event.MOUSEMOVE);
			document.onmousemove = dragmeplease;
			function dragmeplease(mp){
				var _x = mp.clientX - 80;
				var xString = _x.toString() + 'px';
				var	_y = mp.clientY -80; 
				var yString = _y.toString() + 'px';

		  		document.querySelector('#dragDialog2').style.top = yString;
		  		//console.log("_y has this value here " + _y);
		  		document.querySelector("#dragDialog2").style.left = xString;
		  		//console.log(_x + " that was x");
		  	document.captureEvents(Event.MOUSEUP);
			document.onmouseup = endThisPlease;
			function endThisPlease(omu){
				//console.log(omu.detail);
				document.onmousemove = null;
				document.onmouseup = null;


			}
	
	}
} 
/*
saveEdits() {
var editElem = document.getElementById("edit");
var userVersion = editElem.innerHTML;
localStorage.userEdits = userVersion;
document.getElementById("update").innerHTML="Edits saved!";

}


<body onload="checkEdits()">
function checkEdits() {

if(localStorage.userEdits!=null)
document.getElementById("edit").innerHTML = localStorage.userEdits;
}*/
});
</script>
</dom-module>
