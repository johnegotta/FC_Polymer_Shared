<dom-module id="fc-single-column-layout">
<template>
<style>
div.line-number {
			width: 28px;
			line-height: 1.2;
			font-size: 14pt;
			font-size: 1.25em;
			font-family: merriweather;
			font-weight: 500;
			font-style: italic;
			padding: 6px 0px 6px 0px;
			margin: 6px 0px 6px 0px;
			
		}
		div.columnContainer{
			overflow-y: scroll;
		}
		
		.highlighted {
			background: yellow;
		}
		
		div.text {
			line-height: 1.2;
			font-size: 14pt;
			font-size: 1.25em;
			font-family: merriweather;
			font-weight: 500;
			padding: 6px;
			margin: 6px 0px 6px 0px;
			min-height: 720px !important;
			display: flex;
			min-width: 260px !important;
			max-width: 680px !important;	
		}
</style>
<div class="layout horizontal container">
			<!--Line number container-->
					 		<div id="linenumbersA1" class="layout vertical line-number">
					 		<span class="line-numbers" id="linesA1">Lines</span>
					 			<template is="dom-repeat" items="{{longestLineNumberArray}}" filter="{{_numberRowsFilter(num_lines)}}">
     								<span hidden="{{!item.show}}" id="oneOneNumbers_{{item.number}}">{{item.number}}</span><span hidden="{{item.show}}">&nbsp</span>
     							
    							</template>
					 		</div>
			<!--passage-1-column-1 container-->
					 		<div id="colUno" class="layout horizontal flex wrap text">
					 		<article id="textColumnOne">
					 	    	<template is="dom-repeat" items="{{theContent}}">
 									<template is="dom-if" if="{{item.newPara}}">
 										<br><span>&nbsp&nbsp&nbsp&nbsp</span>
 									</template>
 									<a id="oneOneWords_{{item.order}}" hidden="{{!columnOneShow}}">{{item.word}}</a>
								</template>
									<br class="line-numbers">
									<hr>
								<span class="right-justified line-numbers" style="float:right; text-align: right;" id="singleColumnBounder"> Focused Coaching (c) 2016</span>
							</article>
					 		</div>
					 	</div>					
</template>
<script>
Polymer({
	is: 'fc-single-column-layout',
		observers: ['arrayWatcher(theContent.splices)'],
		properties: {

		theContent:{
			type: Array, 
			value: [],
			notify: true, 
			reflectToAttibutes: true 
		},
		lastWordIndex:{
			type: Number,
			notify: true,
			reflectToAttributes: true
		},
		
		longestLineNumberArray:{
			type: Array,
			value: function(){for(var i=1; i <= 180; i++)
			{	this.longestLineNumberArray = new Array(180);
				j=	i % 5 ? false: true;
				this.push("longestLineNumberArray", {'number': i, 'show': j});
				}
			},
			notify: true

		},
		
		lastRow:{
			type: Number,
			notify: true,
		},
		
		shown:{
			type: Boolean,
			value: true,
			notify: true,
			reflectToAttributes: true
		}

	},


ready: function(){
	this.longestLineNumberArray=[];
		for(i=1; i <= 180; i++)
			{
			j=	i % 5 ? false: true;
			this.push("longestLineNumberArray", {'number': i, 'show': j});
		
			}	
},

attached: function(){

		this.loadContent();
	},

loadContent:function(){
			this.notifyResize();

},

arrayWatcher: function(miki){
	console.log(this.theContent);


},
notifyResize:function(){
	this.numberOneColumn();

},

numberOneColumn: function(RowsEstimate){
		 var bottom_of_first_word = this.$.linesA1.getBoundingClientRect().bottom;
		 var last_word = this.$.singleColumnBounder;
		 var last_word_rect =  last_word.getBoundingClientRect();
		 var line_height = this.$.linesA1.clientHeight;
		 var delta = last_word_rect.bottom - bottom_of_first_word;
		 this.num_lines = Math.round(delta/line_height) - 2.3;
		 this._numberRowsFilter();
		},
_numberRowsFilter: function(){
		if(this.shown == true || this.shown==false){
		return (item) =>{
			return(item.number<=this.num_lines);
			};
		}else {return (item) =>{
			return false;
			};
		}
	}
});

</script>
</dom-module>


		


